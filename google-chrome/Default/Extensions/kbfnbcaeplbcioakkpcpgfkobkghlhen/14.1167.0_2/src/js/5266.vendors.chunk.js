(self.webpackChunk=self.webpackChunk||[]).push([[5266],{72481:(e,t,r)=>{r.d(t,{p:()=>i});var i,n=r(27378),a=r(40327),o=r(23239),s=r(98403),l=r(19751),c=r(2834),d=r(9223),u=r(5114),p=r(83078),m=r(90845);!function(e){var t=e.Manager=function(e){var t=e.children,r=e.cardWidth,i=s.Dx(r).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return m.P.useSingleton("CardWidth.Manager"),m.P.useSubscriptionTo(i),n.createElement(g.Provider,{value:i},t)},r=(e.DefaultManager=function(e){var i=e.children;return m.P.useSingleton("CardWidth.DefaultManager"),n.createElement(t,{cardWidth:r(h)},i)},e.withCardWidthEffect=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return e.pipe(c.b((function(e){return t(u.some(e))})),d.x(t.bind(null,u.none)),l.shareReplay({refCount:!0,bufferSize:1}))}),i=e.defaultCardWidthSetter=function(e){f(document.documentElement,e)},h=e.defaultSizeObserver=o.h.create(400),g=e.Context=n.createContext(h),f=e.setRootCssVar=function(e,t){e.style.setProperty("--cardWidth",(0,a.pipe)(t,u.map(String),p.QP))}}(i||(i={}))},3929:(e,t,r)=>{r.d(t,{B:()=>I,N:()=>S});var i=r(50858),n=r(55818),a=r(27378),o=r(8543),s=r(54001),l=r(23239),c=r(76974),d=r(98403),u=r(77176),p=r(2844),m=r(93508),h=r(66310),g=r(19751),f=r(8125),y=r(18245),v=r(89894),x=r(40456),b=r(32096),C=r(37539);function I(e){var t=e.value,r=e.initValue,n=void 0===r?C.g.MIN:r,l=e.wrapperClass,p=e.progressClass,m=e.borderClass,h=e.isLoading,g=void 0===h?c.of(!1):h,f=S(t,n);return a.createElement(o.F.div,(0,i._)({role:"progressbar","aria-label":"Progress","aria-valuenow":d.Dx(t).pipe(u.U(C.g.iso.unwrap))},(0,s.Sh)(D.wrapper,l)),a.createElement(w,{width:f,progressClass:p,borderClass:m,isLoading:g}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.g.MIN,r=l.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return r.set(!0)}))})),p.aj(d.Dx(e),r,(function(e,r){return r?e:t}))}function w(e){var t=e.width,r=e.progressClass,l=e.isLoading,c=e.borderClass,d=t.pipe(u.U((function(e){return"".concat(e,"%")}))),p=t.pipe(u.U(C.g.prism.reverseGet),u.U((function(e){return e>0?"".concat(e+.75,"%"):0})),m.O(0)),y=l.pipe(h.w((function(e){return e?d:"0"}))),v=t.pipe(u.U(C.g.isMin),g.shareReplay({bufferSize:1,refCount:!0}));return a.createElement(a.Fragment,null,a.createElement(o.F.div,(0,n._)((0,i._)({},(0,s.Sh)(D.borderContainer,v.pipe(u.U((0,f.RN)(D.borderContainerZeroWidth,D.borderContainerWithMinWidth))),c)),{style:{width:p}})),a.createElement(o.F.div,(0,n._)((0,i._)({},(0,s.Sh)(Boolean(r)?r:D.defaultProgress,D.progressBar,v.pipe(u.U((0,f.RN)(D.progressBarZeroWidth,D.progressBarWithMinWidth))))),{style:{width:d}})),a.createElement(o.F.div,{className:D.loading,style:{width:y}}))}var A=v.ux.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),E={position:"relative",width:v.ux.percent(100),height:v.ux.rem(.25),borderRadius:v.ux.rem(b.Jr),backgroundColor:x.xO},_={position:"relative",top:0,height:v.ux.percent(100),borderRadius:v.ux.rem(b.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},k={minWidth:v.ux.px(4)},T={position:"absolute",backgroundColor:y.Il.CoreNeutral0},M={minWidth:v.ux.px(6)},N={position:"absolute",minWidth:0,backgroundImage:x.b6,backgroundSize:"20px 20px",transition:"none",animation:"".concat(A," 1s linear infinite")},L={backgroundImage:x.Xd},D=v.ux.stylesheet({wrapper:[E,E],progressBar:[_],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[k],borderContainer:[_,T],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[M],loading:[_,N],defaultProgress:[L]})},62295:(e,t,r)=>{r.d(t,{x:()=>i});var i,n=r(18775),a=r(50858),o=r(55818),s=r(98314),l=r(27378),c=r(8543),d=r(54001),u=r(77176),p=r(98403),m=r(57091),h=r(93508),g=r(19962),f=r(18245),y=r(33678),v=r(4870),x=r(8965),b=r(89894),C=r(40456),I=r(61722),S=r(37539);!function(e){var t=function(e){return 0===e?"":e>=n?"".concat(Math.min(Math.trunc(e/n),9),"k+"):String(e)},r=10,i=100,n=1e3,f=function(e){var t=e.className,r=e.isChecking,i=e.type,n=e.animateFade,a=void 0===n||n,o=I.f.fadeOutState(r),s=o.state,p=o.complete,m="checking-complete";return l.createElement(c.F.div,(0,d.Sh)(J.loader,t),a?s.pipe(u.U((function(e){return"end"===e?l.createElement("div",{key:"checking-complete",className:m}):l.createElement(x.$,{key:"spinner",variation:i,size:"100%",className:"fadeOut"===e?J.fadeOut:void 0,onTransitionEnd:p})}))):r.pipe(u.U((function(e){return e?l.createElement(x.$,{variation:i,size:"100%"}):l.createElement("div",{className:m})}))))},b=function(e){var r=e.name,n=e.theme,s=void 0===n?{}:n,u=e.count,m=e.type,h=void 0===m?"white":m,f=e.suffix,v=void 0===f?"":f,b=l.useContext(y.a.Context);return l.createElement(c.F.div,(0,o._)((0,a._)({},(0,d.Sh)(J.roundCounter,p.ab(h,x.$.getClassName(J)),s.counterWrapper)),{"data-role":"counter"}),l.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:J.circular},l.createElement("g",null,l.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),l.createElement("text",(0,a._)((0,o._)((0,a._)({x:"16",y:"17"},g.h5(b.has(y.a.Flag.supportsSVGDominantBaseline))),{fontSize:u>=i?14:18,"data-name":r}),(0,d.Sh)(L,s.counterContent)),t(u),v))))},C=function(e){var r=e.name,i=e.theme,n=void 0===i?{}:i,s=e.count,u=e.type,m=void 0===u?"white":u,h=e.suffix,f=void 0===h?"":h,v=l.useContext(y.a.Context);return l.createElement(c.F.div,(0,o._)((0,a._)({},(0,d.Sh)(J.ovalCounter,p.ab(m,x.$.getClassName(J)),n.counterWrapper)),{"data-role":"counter"}),l.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 20",className:J.circular},l.createElement("rect",{width:"32",height:"20",rx:"10"}),l.createElement("text",(0,a._)((0,o._)((0,a._)({x:"16",y:"10.5"},g.h5(v.has(y.a.Flag.supportsSVGDominantBaseline))),{fontSize:11,"data-name":r}),(0,d.Sh)(L,n.counterContent)),t(s),f)))},w=(e.Counter=function(e){var t=e.theme,r=void 0===t?{}:t,n=e.count,s=e.type,c=void 0===s?"white":s,u=n>=i?C:b;return l.createElement(u,{theme:(0,o._)((0,a._)({},r),{counterWrapper:(0,d.Sh)(r.counterWrapper,J.flexCounter).className}),count:n,type:c})},e.OutcomeCounter=function(e){var n=e.name,s=e.theme,u=void 0===s?{}:s,m=e.count,h=e.type,f=void 0===h?"white":h,v=e.suffix,b=e.fontSize,C=void 0===b?12:b,I=l.useContext(y.a.Context);return l.createElement(c.F.div,(0,o._)((0,a._)({},(0,d.Sh)(J.outcomeCounter,p.ab(f,x.$.getClassName(J)),u.counterWrapper)),{"data-role":"counter"}),l.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 18",className:J.circular},l.createElement("rect",(0,o._)((0,a._)({},function(e,t){return t||e>=i?{width:32}:e>=r?{x:4,width:24}:{x:7,width:18}}(m,Boolean(v))),{height:18,rx:9})),l.createElement("text",(0,a._)((0,o._)((0,a._)({x:"50%",y:"10px"},g.h5(I.has(y.a.Flag.supportsSVGDominantBaseline))),{fontSize:C,"data-name":n}),(0,d.Sh)(L,u.counterContent)),t(m),v)))});e.MainMeter=function(e){var t=e.count,r=e.isChecking,i=e.className,n=0===t;return l.createElement("div",(0,d.Sh)(J.meter,i),l.createElement(f,{isChecking:r,type:n?"green":"red"}),0===t?l.createElement(v.JO.Grammarly,null):l.createElement(b,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,r=e.isChecking;return l.createElement("div",{className:J.lensNavMeter},l.createElement(f,{isChecking:r,type:"red"}),l.createElement(b,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,i=e.className;return l.createElement("div",(0,d.Sh)(J.plagiarismMeter,i),l.createElement(f,{isChecking:r,type:"violet",animateFade:!1}),l.createElement(c.F.div,{className:J.wrapper},t.pipe(m.a(r),u.U((function(e){var t=(0,s._)(e,2),r=t[0],i=t[1];return 0===r?l.createElement(v.JO.NotificationInfo,{className:J.plagiarismIcon,key:"icon",width:20}):!i&&l.createElement(C,{count:r,type:"violet",key:"value",suffix:l.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),h.O(null))))},e.PlagiarismOutcomesMeter=function(e){var t=e.count,r=e.isChecking,i=e.className;return l.createElement("div",(0,d.Sh)(J.plagiarismMeter,i),l.createElement(f,{isChecking:r,type:"cyan",animateFade:!1}),l.createElement(c.F.div,{className:J.wrapper},t.pipe(m.a(r),u.U((function(e){var t=(0,s._)(e,2),r=t[0],i=t[1];return S.g.isMin(r)?l.createElement(v.JO.CheckmarkOutcomes,{className:J.plagiarismOutcomeIcon,key:"icon",width:20}):!i&&l.createElement(w,{count:S.g.prism.reverseGet(r),type:"cyan",key:"value",suffix:l.createElement("tspan",{fontSize:11},"%")})})),h.O(null))))}}(i||(i={}));var w=1.25,A={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:b.ux.percent(100),height:b.ux.percent(100)},E={position:"absolute",width:b.ux.percent(150),height:b.ux.percent(150),transform:"translate(-17%, -17%)"},_={position:"relative",display:"inline-flex"},k={width:b.ux.percent(100),height:b.ux.percent(100)},T={minWidth:b.ux.rem(2),width:b.ux.percent(100),height:b.ux.rem(w)},M={maxWidth:b.ux.rem(2),height:b.ux.rem(w)},N="counterText",L=b.ux.joinClasses([N,b.ux.style({fontWeight:"bold",textAnchor:"middle",fill:f.Il.CoreNeutral0})]),D={fill:C.zh,$nest:(0,n._)({},"& .".concat(N),{fill:C.FW})},F={fill:f.Il.CoreRed50,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},P={fill:f.Il.CoreGreen50,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},R={fill:f.Il.CoreBlue50,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},O={fill:"transparent",$nest:(0,n._)({},"& .".concat(N),{fill:C.FW})},B={fill:C.lh,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},$={fill:C.AX,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},U={fill:f.Il.CoreYellow20,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreYellow80})},W={fill:f.Il.CoreYellow60,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},z={fill:f.Il.CoreCyan50,$nest:(0,n._)({},"& .".concat(N),{fill:f.Il.CoreNeutral0})},G={width:b.ux.rem(1.5),height:b.ux.rem(1.5)},j={margin:"0 ".concat(b.ux.rem(.25))},H={width:b.ux.rem(2),height:b.ux.rem(w)},Y={margin:"".concat(b.ux.rem(-1)," 0")},V={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:f.Il.CoreCyan50}}},Z={width:b.ux.rem(2),height:b.ux.rem(1.125),position:"relative"},J=b.ux.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[A],loader:[E],wrapper:[_],roundCounter:[_,k],ovalCounter:[_,T],flexCounter:[_,M],gray:[D],red:[F],green:[P],blue:[R],white:[O],violet:[B],yellow:[$],yellowPremium:[U],orange:[W],cyan:[z],meter:[_,G],lensNavMeter:[_,G,j],plagiarismMeter:[_,H],plagiarismIcon:[Y],plagiarismOutcomeIcon:[Y,V],outcomeCounter:[_,{position:"absolute",left:0},Z]})},48911:(e,t,r)=>{r.d(t,{In:()=>p,Vg:()=>c,dy:()=>u});var i=r(98314),n=r(20096),a=r(27378),o=r(54001),s=r(59179),l=r(89894),c=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function d(e){return s.g+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}var u=function(e){var t=e.children,r=e.emojiClassName,i=e.className,n=a.useRef(null);return a.useEffect((function(){n.current&&(n.current.innerHTML=n.current.innerHTML.replace(c,(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.emoji;return'<img alt="'.concat(e,'" class="').concat(t,'" src="').concat(d(e),'" onerror="this.replaceWith(this.alt)" draggable="false" />')}(e,r)})))}),[n,r]),a.createElement("span",{ref:n,className:i},t)},p=function(e){var t=e.id,r=e.className,l=(0,i._)(a.useState(!1),2),c=l[0],d=l[1],u=(0,i._)(a.useState(""),2),p=u[0],h=u[1],g=(0,i._)(a.useState(""),2),f=g[0],y=g[1];return a.useEffect((function(){d(!1),y(function(e){return s.g+e+".svg"}(t)),h(function(e){try{var t;return(t=String).fromCodePoint.apply(t,(0,n._)(e.map((function(e){return parseInt(e,16)}))))}catch(e){return""}}(t.split("-")))}),[t]),c?a.createElement("span",(0,o.Sh)(r,m.emojiFromIDAlt),p):a.createElement("img",{className:r,src:f,alt:p,onError:function(){return d(!0)},"aria-hidden":!0})},m=l.ux.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}],emojiFromIDAlt:[{display:"flex",alignItems:"center"}]})},76457:(e,t,r)=>{r.d(t,{P:()=>T});var i=r(50693),n=r(82900),a=r(74923),o=r(18775),s=r(31099),l=r(50858),c=r(55818),d=r(71346),u=r(27378),p=r(54001),m=r(22232),h=r(19962),g=r(18245),f=r(33678),y=r(4870),v=r(89894),x=r(40456),b=2*Math.PI*32,C=36,I="#f1f2fa",S="#fff",w=function(e,t,r){return e<t?t:e>r?r:e},A=function(e){switch(e){case T.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:I,outline:S};case T.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:I,outline:S};case T.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:I,outline:S};case T.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:I,outline:S};case T.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:I,outline:S};case T.ColorType.logan:return{type:"plain",value:"#a6adc9",background:I,outline:S};case T.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case T.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case T.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case T.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case T.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case T.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case T.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case T.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,m.vE)(e)}},E=function(e){switch(e){case T.FontSize.normal:return 32;case T.FontSize.small:return 24;default:return(0,m.vE)(e)}},_=function(e){switch(e){case T.IconSize.pdf:case T.IconSize.normal:case T.IconSize.outcome:return 5;case T.IconSize.small:return 3;case T.IconSize.extraSmall:return 10;default:return(0,m.vE)(e)}},k=function(e){switch(e){case T.IconSize.pdf:return 110;case T.IconSize.normal:return 52;case T.IconSize.outcome:return 32;case T.IconSize.small:return 24;case T.IconSize.extraSmall:return 16;default:return(0,m.vE)(e)}},T=function(e){(0,s._)(r,e);var t=(0,d._)(r);function r(){var e;return(0,n._)(this,r),e=t.apply(this,arguments),(0,o._)((0,i._)(e),"_gradientId",void 0),e}return(0,a._)(r,[{key:"render",value:function(){var e,t,i,n,a,o=this.props,s=o.percentage,d=o.aimValue,m=void 0===d?100:d,g=o.colorType,v=void 0===g?r.ColorType.logan:g,x=o.fontSize,I=void 0===x?r.FontSize.normal:x,S=o.iconSize,T=void 0===S?r.IconSize.normal:S,M=o.description,N=o.theme,L=void 0===N?D:N,F=[u.createElement("circle",{key:"circle",id:"circle",cx:C,cy:C,r:32,fill:"none"})],P=E(I),R=_(T),O=w(s,0,100),B=w(m,O,100),$=O*b/100,U=B*b/100,W=360*R/b,z=O?b-$-2*R:b,G=A(v);if("plain"===G.type)e=G.value,t=e,i=G.outline,n=G.background,a=void 0===G.backgroundOpacity?1:G.backgroundOpacity;else{var j=G.value;this._gradientId=Boolean(this._gradientId)?this._gradientId:"pb-gradient-".concat(r._nextGradientId++),F.push(u.createElement("linearGradient",(0,l._)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},j.coordinates),u.createElement("stop",{stopColor:j.start,offset:"0%"}),u.createElement("stop",{stopColor:j.end,offset:"100%"}))),e="url(#".concat(this._gradientId,")"),t="#2b2d38",i=G.outline,n=G.background,a=void 0===G.backgroundOpacity?1:G.backgroundOpacity}return u.createElement(f.a.Context.Consumer,null,(function(r){return u.createElement(y.a1,(0,c._)((0,l._)({},(0,p.Sh)(D.iconWrapper,L.radialProgressBar)),{width:k(T),viewBox:"0 0 ".concat(72," ").concat(72)}),u.createElement("defs",null,F),u.createElement("g",null,u.createElement("use",{className:D.valueCircle,stroke:O>=94&&Boolean(i)?i:n,strokeOpacity:a,strokeWidth:R,strokeDasharray:b,strokeDashoffset:b-U,transform:"rotate(-90 ".concat(C," ").concat(C,")"),strokeLinecap:"round",xlinkHref:"#circle"}),Boolean(i)?u.createElement("use",{className:D.valueCircle,stroke:i,strokeWidth:R,strokeDasharray:b,strokeDashoffset:z,transform:"rotate(".concat(-90-W," ").concat(C," ").concat(C,")"),strokeLinecap:"round",xlinkHref:"#circle"}):null,u.createElement("use",{className:D.valueCircle,stroke:e,strokeDasharray:b,strokeDashoffset:b-$,strokeLinecap:"round",transform:"rotate(-90 ".concat(C," ").concat(C,")"),strokeWidth:R,xlinkHref:"#circle"}),u.createElement("text",(0,l._)({className:L.radialProgressText,y:"38",x:"36",fill:t,fontSize:P,fontStyle:"normal",textAnchor:"middle"},h.h5(r.has(f.a.Flag.supportsSVGDominantBaseline))),O),Boolean(M)?u.createElement("text",{className:L.radialProgressDescription,fill:t,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},M):null))}))}}]),r}(u.Component);(0,o._)(T,"_nextGradientId",0),function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(T||(T={}));var M={width:v.ux.percent(100),height:v.ux.percent(100),fontWeight:"bold",fill:g.Il.CoreNeutral90},N={fontSize:v.ux.rem(2),fill:g.Il.CoreNeutral90},L={fontWeight:"normal",fontSize:v.ux.px(11),fill:x.UE},D=v.ux.stylesheet({radialProgressBar:[M],radialProgressText:[N],radialProgressDescription:[L],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},56377:(e,t,r)=>{r.d(t,{L:()=>l});var i,n=r(18775),a=r(27378),o=r(54001),s=r(89894),l=function(e){var t=e.double,r=e.triple,i=e.small;return a.createElement("div",(0,o.Sh)(u,!0===t&&m,!0===r&&g,!0===i&&f))},c=.875,d="spacer",u=s.ux.joinClasses([d,s.ux.style({margin:0,minHeight:s.ux.rem(c),maxHeight:s.ux.rem(1),width:s.ux.percent(100),height:s.ux.rem(1)})]),p="spacerDouble",m=s.ux.joinClasses([p,s.ux.style({minHeight:s.ux.rem(1.75),maxHeight:s.ux.rem(2),height:s.ux.rem(2)})]),h="spacerTriple",g=s.ux.joinClasses([h,s.ux.style({minHeight:s.ux.rem(2.625),maxHeight:s.ux.rem(3),height:s.ux.rem(3)})]),f=s.ux.style({$nest:(i={},(0,n._)(i,"&.".concat(d),{minHeight:s.ux.rem(.4375),maxHeight:s.ux.rem(.5),height:s.ux.rem(.5)}),(0,n._)(i,"&.".concat(p),{minHeight:s.ux.rem(c),maxHeight:s.ux.rem(1),height:s.ux.rem(1)}),(0,n._)(i,"&.".concat(h),{minHeight:s.ux.rem(1.3125),maxHeight:s.ux.rem(1.5),height:s.ux.rem(1.5)}),i)})},8965:(e,t,r)=>{r.d(t,{$:()=>f});var i,n=r(18775),a=r(50858),o=r(55818),s=r(98410),l=r(27378),c=r(8543),d=r(54001),u=r(98403),p=r(22232),m=r(18245),h=r(89894),g=r(40456);function f(e){var t=e.wrapperClassName,r=e.variation,i=e.isIdle,n=(e.ref,e.label),d=(0,s._)(e,["wrapperClassName","variation","isIdle","ref","label"]);return l.createElement(c.F.span,{"data-role":"spinner",role:"status","aria-busy":!Boolean(i),"aria-live":Boolean(i)?"off":"polite","aria-label":null!=n?n:"Content is loading.",className:t},u.ab(r,(function(e){return l.createElement(f.Svg,(0,o._)((0,a._)({},d),{type:e,isIdle:i}))})))}(i=f||(f={})).getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,p.vE)(t)}}},i.Svg=function(e){var t=e.className,r=e.size,i=void 0===r?64:r,n=e.strokeWidth,c=void 0===n?2:n,u=e.type,m=e.name,h=e.isIdle,g=(0,s._)(e,["className","size","strokeWidth","type","name","isIdle"]),y=l.useRef(null),v=l.useRef(null);return l.useEffect((function(){return(0,p.kG)(null!==y.current,"groupEl should be already created"),v.current=y.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),l.useEffect((function(){(0,p.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;Boolean(e.play)&&(!0===h?e.pause():"running"!==e.playState&&e.play())})),l.createElement("svg",(0,a._)((0,o._)((0,a._)({"data-role":m},(0,d.Sh)(t)),{viewBox:"25 25 50 50",width:i,height:i,"aria-hidden":!0}),g),l.createElement("g",{transform:"translate(50 50)"},l.createElement("g",{ref:y},l.createElement("circle",(0,o._)((0,a._)({},(0,d.Sh)(M.path,!0===h&&x,f.getClassName(M)(u))),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:c,strokeMiterlimit:"10"})))))};var y=200,v=h.ux.keyframes({"0%":{strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1)},"50%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-35)},"100%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-124)}}),x="spinnerIdle",b={animation:"".concat(v," 2s ease-in-out infinite"),strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1),strokeLinecap:"round",$nest:(0,n._)({},"&.".concat(x),{animationIterationCount:0})},C={stroke:m.Il.CoreRed50},I={stroke:m.Il.CoreGreen50},S={stroke:m.Il.CoreBlue50},w={stroke:m.Il.CoreNeutral0},A={stroke:g.lh},E={stroke:g.AX},_={stroke:m.Il.CoreYellow60},k={stroke:g.FW},T={stroke:m.Il.CoreCyan50},M=h.ux.stylesheet({path:[b],red:[C],green:[I],blue:[S],white:[w],violet:[A],yellow:[E],orange:[_],gray:[k],cyan:[T]})},59443:(e,t,r)=>{r.d(t,{Y1:()=>i,uq:()=>u});var i,n,a,o,s,l,c,d,u,p,m,h=r(73975),g=r(55415),f=r(22232),y=r(8125),v=r(87969);!function(e){var t;!function(e){var t;!function(e){e.user="user",e.api="api",e.doubleClick="doubleClick"}(t=e.Source||(e.Source={}));e.eq=(0,h.f7)((function(e,r){return e.source===r.source&&(e.source===t.doubleClick&&r.source===t.doubleClick?e.selectedWord===r.selectedWord:n.equals(e.formatting,r.formatting))}))}(t=e.Meta||(e.Meta={}));e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return v.SV.create(e.index,e.index+e.length)},e.isUserSelection=function(e){return e.meta.source===t.Source.user},e.isApiSelection=function(e){return e.meta.source===t.Source.api},e.isDoubleClickSelection=function(e){return e.meta.source===t.Source.doubleClick};var r=e.eqRange=(0,h.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),n=e.eqFormatting=(0,h.f7)(g.vZ);e.eq=(0,h.f7)((function(e,t){return r.equals(e,t)&&i.Meta.eq.equals(e.meta,t.meta)})),e.empty={index:0,length:0,meta:{source:i.Meta.Source.user,formatting:{}}}}(i||(i={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(n||(n={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),c=o||(o={}),(l=c.Y||(c.Y={})).top="top",l.middle="middle",l.bottom="bottom",(s=c.X||(c.X={})).left="left",s.middle="middle",s.right="right",function(e){e.toViewport=function(e){return function(t){switch(t){case o.X.left:return e.left;case o.X.middle:return e.left+e.width/2;case o.X.right:return e.right;default:return(0,f.vE)(t)}}}}(c.X||(c.X={})),function(e){e.toViewport=function(e){return function(t){switch(t){case o.Y.top:return e.top;case o.Y.middle:return e.top+e.height/2;case o.Y.bottom:return e.bottom;default:return(0,f.vE)(t)}}}}(c.Y||(c.Y={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={}));e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(d||(d={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(u||(u={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={}));e.is=function(e){return(0,y.CI)(t,e)},e.asList=Object.values(p.Type);!function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(p||(p={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(m||(m={}))},2639:(e,t,r)=>{r.d(t,{W:()=>D});var i=r(27378),n=r(56377),a=r(1509),o=r(54001),s=r(25335),l=r(89894),c=r(44060);const d={position:"relative",$nest:{"&:not(:last-child)":{marginBottom:l.ux.rem(.5)}}},u={fontWeight:700,color:c.Il.CoreNeutral60},p={width:l.ux.percent(100),display:"flex",justifyContent:"space-between",alignItems:"center",$nest:{"&:hover":{cursor:"pointer"}}},m={transition:"transform .25s"},h={display:"flex",flexDirection:"column",marginLeft:l.ux.rem(1.875),maxWidth:l.ux.rem(15)},g=l.ux.prefixedStylesheet("accordion",{accordion:[{padding:0}],accordionItem:[d],title:[u],button:[p],arrow:[m],arrowRotated:[m,{transform:"rotate(180deg)"}],content:[h],hiddenContent:[{display:"none"}]}),f=e=>i.createElement("svg",{"aria-hidden":!0,className:e.className,width:"13",height:"8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m2.115.295-1.41 1.41 6 6 6-6-1.41-1.41-4.59 4.58-4.59-4.58z",fill:"#6D758D"})),y=({children:e,className:t})=>i.createElement("dl",(0,o.Sh)(g.accordion,t),e),v=e=>{const{title:t,id:r,children:n,isExpanded:a,onClick:o}=e;return i.createElement("div",{className:g.accordionItem},i.createElement("dt",null,i.createElement(s.zx,{className:g.button,name:`accordion-button-${r}`,onClick:o},t,i.createElement("span",null,i.createElement(f,{className:a?g.arrowRotated:g.arrow})))),i.createElement("dd",{className:a?g.content:g.hiddenContent,"data-name":`accordion-content-${r}`},n))},x={marginTop:l.ux.rem(1.5)},b={color:c.Il.CoreNeutral60,marginLeft:l.ux.rem(.6)},C={fontSize:l.ux.rem(.9),lineHeight:l.ux.rem(1.25),color:c.Il.CoreNeutral60,maxWidth:l.ux.rem(15),margin:0},I=l.ux.prefixedStylesheet("checklist",{listItemTitleContainer:[{display:"flex",alignItems:"center"}],list:[x],listItemTitle:[b],listItemDescription:[C]}),S={display:"flex",justifyContent:"center",alignItems:"center",height:l.ux.px(20),width:l.ux.px(20),borderRadius:l.ux.percent(100),border:"1px solid",transition:"border-color .25s ease, background-color .25s ease"},w={borderColor:c.Il.CoreGreen50,backgroundColor:c.Il.CoreGreen50},A={borderColor:c.Il.CoreGreen50,backgroundColor:c.Il.CoreGreen1,$nest:{"> svg":{display:"none"}}},E={borderColor:c.Il.CoreNeutral30,backgroundColor:c.Il.CoreNeutral30},_=l.ux.prefixedStylesheet("completion_icon",{completed:[S,w],active:[S,A],notCompleted:[S,E]}),k=()=>i.createElement("div",{className:_.completed},i.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),T=e=>i.createElement("div",{className:e.isExpanded?_.active:_.notCompleted},i.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),M=e=>e.completionState.isCompleted?i.createElement(k,null):i.createElement(T,{isExpanded:e.completionState.isExpanded}),{Button:N}=a.Z,L=({title:e,completionState:t})=>i.createElement("div",{className:I.listItemTitleContainer},i.createElement(M,{completionState:t}),i.createElement(N,{className:I.listItemTitle},e)),D=e=>{const{allChecklistItems:t,completedItems:r,expandedItems:a,onExpandItem:o,getCTA:s}=e;return i.createElement(y,{className:I.list},t.map((({description:e,id:t,title:l})=>{const c={isCompleted:r.items.has(t),isExpanded:a.has(t)};return i.createElement(v,{key:t,id:t,title:i.createElement(L,{title:l,completionState:c}),isExpanded:c.isExpanded,onClick:()=>o(t)},i.createElement("p",{className:I.listItemDescription},e),i.createElement(n.L,{small:!0}),s(t))})))}},81301:(e,t,r)=>{r.d(t,{EQ:()=>u,Iy:()=>n,dC:()=>i});var i,n,a,o=r(18775),s=r(23239),l=r(5114),c=r(8125),d=r(19751);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(i||(i={})),function(e){e.setGoals=e=>({type:i.SetGoals,source:e}),e.performance={type:i.Performance}}(n||(n={}));class u{show(e){return this.preload(e).pipe(d.switchMap((e=>this.showPreloaded(e))))}showPreloaded(e){return d.defer((()=>{const t=new d.BehaviorSubject("opened");return this.state.set(l.some(e({onClose:()=>{this.state.set(l.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return d.of(e)}return d.defer((()=>this._modalViews.load(e))).pipe(d.tap((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(l.none)}constructor(e){(0,o._)(this,"_modalViews",void 0),(0,o._)(this,"state",void 0),(0,o._)(this,"_modalFactoryCache",void 0),this._modalViews=e,this.state=s.h.create(l.none),this._modalFactoryCache=new Map}}!function(e){e.Mock=class{show(e){return d.EMPTY}showPreloaded(e){return d.EMPTY}preload(e){return d.EMPTY}constructor(){(0,o._)(this,"state",s.h.create(l.none)),(0,o._)(this,"hideAll",c.Q1)}}}(a||(a={}))},50790:(e,t,r)=>{r.d(t,{DI:()=>k,SJ:()=>T});var i=r(50858),n=r(55818),a=r(27378),o=r(54001),s=r(22232),l=r(44060),c=r(50474),d=r(64757),u=r(4870),p=r(3656),m=r(89894),h=r(24588),g=r(40219),f=r(5802);const y={position:"relative",width:m.ux.percent(100)},v={position:"relative",margin:`0 0 ${m.ux.rem(.5)}`},x={display:"flex",boxSizing:"border-box",padding:`${m.ux.rem(1)} ${m.ux.rem(2)} ${m.ux.rem(1)} ${m.ux.rem(.75)}`,width:m.ux.percent(100),borderRadius:m.ux.rem(g.fx),background:l.Il.BackgroundNotification,color:l.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},b={width:m.ux.percent(100)},C={display:"inline-block",width:m.ux.percent(100)},I={margin:`${m.ux.rem(-.5)} ${m.ux.rem(.75)} ${m.ux.rem(-.5)} 0`},S={position:"absolute",top:0,right:0,marginTop:m.ux.rem(.5),marginRight:m.ux.rem(.4),marginLeft:m.ux.rem(.5)},w={stroke:h.FW},A={margin:`0 0 ${m.ux.rem(.5)}`,color:l.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:m.ux.rem(l.xv.BodySize),lineHeight:m.ux.rem(1.25)},E={marginTop:m.ux.rem(-.1),marginBottom:m.ux.rem(-.25),color:l.Il.CoreNeutral0,fontSize:m.ux.rem(l.xv.BodySize),lineHeight:m.ux.rem(1.25)},_=m.ux.prefixedStylesheet("notifications",{wrapper:[y],notification:[v],flexibleNotification:[v,{display:"flex",width:"auto"}],contentWrapper:[x],miniContentWrapper:[x,{position:"relative",width:"auto"}],fullWidthNotification:[v,x,b],content:[C],miniContent:[{flex:1}],alertIcon:[I],closeIconWrapper:[S],closeIcon:[w],header:[A],description:[E]});var k,T;!function(e){e.Wrapper=({notification:e,onClose:r,children:o,theme:s={}})=>{a.useEffect((()=>e.actions.next("shown")),[e.actions]);const l={wrapper:Boolean(s.wrapper)?s.wrapper:y.wrapper,content:void 0!==s.content?Object.assign({},y.content,s.content):y.content};return a.createElement("div",(0,n._)((0,i._)({},f.P.getAriaLiveProps(e)),{className:l.wrapper}),a.createElement(t,{metadata:e.metadata,onClose:r,theme:l.content},o))};var t=e.Base=({metadata:e,onClose:t,theme:i,children:n})=>a.createElement("div",{className:i.wrapper},r(e,i.icon),a.createElement("div",{className:i.content},n),!function(e){return e.priority===f.P.Priority.high||e.priority===f.P.Priority.highest}(e)&&a.createElement(m,{onClick:t,className:i.close}));const r=(e,t)=>{switch(e.icon){case f.P.Icon.sparkles:return a.createElement(u.JO.Sparkles,{className:t});case void 0:case f.P.Icon.priority:return a.createElement(l,{priority:e.priority,className:t});default:return(0,s.vE)(e.icon)}};e.AdHoc=({title:e,children:t,className:r,onClose:i})=>a.createElement("div",(0,o.Sh)(y.content.wrapper,r),a.createElement("div",{className:y.content.content},a.createElement(h,{title:e},t)),a.createElement(m,{onClick:i,className:y.content.close}));var l=e.PriorityIcon=({priority:e,className:t})=>{switch(e){case f.P.Priority.lowest:case f.P.Priority.low:return a.createElement(u.JO.NotificationInfo,{className:t});case f.P.Priority.average:return a.createElement(u.JO.NotificationWarning,{className:t});case f.P.Priority.high:case f.P.Priority.highest:return a.createElement(u.JO.NotificationError,{className:t});default:return(0,s.vE)(e)}},m=e.CloseButton=({onClick:e,className:t})=>{const r=a.useContext(c.m.Context);return a.createElement(d.zx,{name:"closeNotification","aria-label":r.actions.close,className:t,onClick:e},a.createElement(u.JO.Close,{className:_.closeIcon,width:12}))},h=e.TitledContent=({title:e,children:t})=>Boolean(t)?a.createElement(a.Fragment,null,a.createElement(p.P1,{className:_.header},e),a.createElement(g,null,t)):a.createElement(p.P1,{className:_.description},e),g=e.Content=({children:e})=>a.createElement(p.XY,{className:_.description},e);const y={wrapper:_.wrapper,content:{wrapper:_.fullWidthNotification,icon:_.alertIcon,content:_.content,close:_.closeIconWrapper}}}(k||(k={})),function(e){e.Wrapper=({notification:e,onClose:t,children:r})=>(a.useEffect((()=>e.actions.next("shown")),[e.actions]),a.createElement("div",{className:_.flexibleNotification},a.createElement(k.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:_.miniContentWrapper,icon:_.alertIcon,content:_.miniContent,close:_.closeIconWrapper}},r)))}(T||(T={}))},34101:(e,t,r)=>{r.d(t,{a:()=>d});var i=r(18775),n=r(40327),a=r(22232),o=r(5114),s=r(83078),l=r(42040),c=r(46680);class d{constructor(){(0,i._)(this,"_log",l.C8.Logging.getLogger("AlertManager.repository",c.i.DEBUG)),(0,i._)(this,"_allAlerts",new Map),(0,i._)(this,"_capiAlertsIdMapping",new Map),(0,i._)(this,"add",(e=>{this._allAlerts.set(e.id,e)})),(0,i._)(this,"remove",(e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),(0,a.kG)(0===e.references,"can not dispose alert in use",(()=>e.toString())),(0,a.kG)(!1===e.isValid,"can not dispose valid alert",(()=>e.toString())),(0,a.kG)(this._allAlerts.delete(e.id),"alert should exist in alerts list",(()=>e.toString())),e.dispose()})),(0,i._)(this,"addToCapiMapping",(e=>{e.isValid||(0,n.pipe)(e.rawId,o.fold((()=>this._log.debug("skip register of local alert in capi mapping",e)),(t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),(0,a.kG)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",(()=>e.toString())),e.validate(),this._capiAlertsIdMapping.set(t,e.id)})))})),(0,i._)(this,"removeFromCapiMapping",(e=>{e.isValid&&((0,n.pipe)(e.rawId,s.bw((t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),(0,a.kG)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",(()=>e.toString()))}))),e.invalidate())})),(0,i._)(this,"getByAlertId",(e=>o.fromNullable(this._allAlerts.get(e)))),(0,i._)(this,"getByRawAlertId",(e=>(0,n.pipe)(o.fromNullable(this._capiAlertsIdMapping.get(e)),o.chain(this.getByAlertId)))),(0,i._)(this,"swapRaw",((e,t)=>{const r=(0,n.pipe)(e.rawId,o.exists((e=>this._capiAlertsIdMapping.has(e)))),i=(0,n.pipe)(e.rawId,o.exists((e=>this._capiAlertsIdMapping.has(e))));(0,a.kG)(r||i,"At least one of the swapped alerts should be registered in the system");const l=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(l),r&&this._capiAlertsIdMapping.set(s.MH(e.rawId),e.id),i&&this._capiAlertsIdMapping.set(s.MH(t.rawId),t.id)})),(0,i._)(this,"toArray",(()=>Array.from(this._allAlerts.values()))),(0,i._)(this,"toMap",(()=>this._allAlerts)),(0,i._)(this,"toJSON",(()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})))}}},68169:(e,t,r)=>{r.d(t,{SC:()=>we});var i,n=r(18775),a=r(50858),o=r(55818),s=r(12271),l=r(57050),c=r(40327),d=r(23239),u=r(84966),p=r(67394),m=r(80358),h=r(8125),g=r(5114),f=r(22232),y=r(83078),v=r(95195),x=r(89943),b=r(81670),C=r(19429),I=r(42040),S=r(46680),w=r(7514),A=r(19751),E=r(95983),_=r(98403),k=r(4390),T=r(75167),M=r(88570),N=r(92843),L=r(68983),D=r(51653),F=r(21729);!function(e){var t=e.group=F.dM.group;e.eq=F.dM.eq;function r(e){return r=>(0,c.pipe)(e,N.v.foldMap(t)(n,a,i),(0,L.W)(t.concat)(r))}e.applyDiff=r,e.fromAlerts=function(e){const t=I.C8.Logging.getLogger("DocumentCounters");return e.pipe(A.scan(((e,t)=>({alerts:t,counters:r(k.p.Diff.toRegistered(k.p.diff(e.alerts,t)))(e.counters)})),{alerts:k.p.empty,counters:F.dM.group.empty}),A.tap((({counters:e})=>{F.dM.isValid(e)||t.error("Counters can not be below zero",F.dM.show.show(e))})),A.map((({counters:e})=>e)))};const i=e=>D.R.toUnmutedOnly(e.counters),n=(0,l.ls)(i,t.inverse),a=(e,r)=>t.concat(i(r),n(e))}(i||(i={}));var P,R=r(17771),O=r(45614),B=r(50147),$=r(93756),U=r(37539),W=r(66896);!function(e){e.empty=new Map,e.eq=B.Eh(W.R.Id.ord,U.T.ord);function t(e){const{left:t,right:r}=(0,c.pipe)(e,O.DZ(g.fromNullable),O.z7((e=>"GeneralScore"!==e)),O.Su(((e,t)=>{return{lensId:(r=e,r===W.R.SpecialId.Plagiarism?v.right(W.R.SpecialId.Plagiarism):W.R.OutcomeId.toOutcomeId(r)),score:U.T.fromNumber(t)};var r})),O.tV((0,R.Y)(v.either))),i=(0,c.pipe)(r,O.UI((({lensId:e,score:t})=>(0,l.bc)(e,t))),(e=>new Map(Object.values(e))));return(0,c.pipe)($.Qp(g.fromPredicate((0,l.ff)(O.xb))(t),g.fromPredicate((0,l.ff)(B.xb))(i)),g.getOrElse((()=>$.F2(new Map))))}e.fromCapi=function(e){return e.pipe(A.filter((0,h.Kg)(m.h.is("finish"),m.h.is("async_check_finished"),m.h.is("feedback_ack"))),A.map((e=>e.outcomeScores)),A.filter(h.$K),A.map(t),A.tap($.Vn((e=>{O.xb(e)||I.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),A.filter((0,h.Kg)($.WP,$.tO)),A.map((e=>e.right)))}}(P||(P={}));var z,G=r(51374),j=r(11064),H=r(23330),Y=r(25938),V=r(66665),Z=r(37492),J=r(51072),Q=r(71249),q=r(26328),X=r(32426),K=r(36991),ee=r(82900),te=r(74923),re=function(){function e(t){(0,ee._)(this,e),(0,n._)(this,"_delta",void 0),(0,n._)(this,"_cursor",void 0),this._delta=t,this._cursor={index:0,operationOffset:0}}return(0,te._)(e,[{key:"next",value:function(e){(0,f.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return g.none;for(var r=K.s.operationLength(this._delta.ops[t]),i=e-(r-this._cursor.operationOffset);i>0&&t<this._delta.ops.length-1;)t++,i-=r=K.s.operationLength(this._delta.ops[t]);return i>0?(this._cursor={index:t+1,operationOffset:0},g.none):(this._cursor={index:t,operationOffset:r+i},g.some(this._delta.ops[t]))}}]),e}();!function(e){const t=g.getMonoid((0,X.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=e=>r=>{const i=new re(e);return r.ops.reduce((([e,r],n)=>{const a=i.next(r);return K.s.isInsert(n)?[e.insert(n.insert,g.toUndefined(t.concat(g.chain(K.s.getAttrs)(a),K.s.getAttrs(n)))),0]:[e.push(n),K.s.operationLength(n)]}),[new V.i,1])[0]}}(z||(z={}));var ie=r(70996),ne=r(64015),ae=r(74660);const oe=(0,h.HP)(I.C8.Logging.getLogger),se=(0,l.ls)(ne.UI((({beingAppliedAlert:e,undo:t,reversedAlternative:r})=>H.Y3((()=>{const i={action:u.PZ.ACCEPTED,commit:()=>oe("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(r)},n=e.switchToApplied(i),a=ae.xS.create(n.state.from,ie.h.create(e));return[n.id,a]}),v.toError))),H.mg);function le(e){const t=p.r3.compose(e.alternatives.map(s.UI((e=>e.alternative))),e.currentFullText);return(0,c.pipe)(K.s.nonEmpty(t.composedDelta)?g.some(t):g.none,g.map((({composedDelta:t,reversedAlternatives:r})=>({changeWithFormatting:(0,c.pipe)(t,z.getEnrichedWithFormattingDelta(e.currentFullText),(t=>Y.RI.delta(t,e.originalTextLength))),correctRevAlternatives:(0,c.pipe)(r,b.T.tapFailure((({rejected:e})=>I.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e))),b.T.foldSuccess(Q.UI((t=>({reversedAlternative:t.reversedAlternative,alternative:s.li(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert})))))}))))}var ce;!function(e){const t=(0,l.ls)(((e,t)=>v.tryCatch((()=>ae.xS.create(e,t)),v.toError)),v.map((e=>(0,l.bc)(e[0].id,e))),j.of);e.prepare=j.tS((0,l.og)(t)),e.prepareFromAlert=H.tS((e=>t(e.state.from,ie.h.create(e))))}(ce||(ce={}));function de(e,t,r){return v.fromPredicate(e,(e=>{const i=new f.ej(t,e.toString());return I.C8.Logging.getLogger("AlertManager.ops").error(t,{error:i,extra:r}),i}))}const ue=(e,t)=>de(ae.bZ.isNotDisposed,e,t);function pe(e){return H.tS(g.fold((0,l.a9)(H.F2(void 0)),e))}var me,he,ge,fe,ye,ve;!function(e){e.mock={undoApplied:()=>H.F2(void 0)}}(me||(me={}));class xe{_applyFeedbackToAlert(e,t,r,i){return H.Y3((()=>{this._alertsRepo.removeFromCapiMapping(e);const n=this._createFeedbackUndoable(e,t,i);return e.changeState(ae.bZ.State.Applied.create(n,r,ae.bZ.State.Applied.Method.ByCard,ie.h.create(e)))}),v.toError)}_createFeedbackUndoable(e,t,r){return{action:t,replacement:e.replaceText,commit:r,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitFeedbackToCapi(e,t){return(0,c.pipe)(e.rawId,g.fold((0,l.a9)((()=>this._log.debug("skip feedback for local alert",e))),(e=>this._sendFeedback((0,a._)({id:e},t)))))}_sendFeedback(e){return()=>{J.Vi(this._capiClient.sendFeedback(e)).catch(this._handleCapiError("alert feedback"))}}_commitShortenItSubmitToCapi(e){return(0,c.pipe)(e.rawId,g.fold((0,l.a9)((()=>this._log.debug("skip shorten-it-submit for local alert",e))),(e=>this._shortenItSubmit(e))))}_shortenItSubmit(e){return()=>{J.Vi(this._capiClient.shortenItSubmit(e)).catch(this._handleCapiError("shorten-it-submit"))}}_switchToBeingApplied(e,t,r){return H.Y3((()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,r))),v.toError)}constructor(e,t,r,i){(0,n._)(this,"_positionManager",void 0),(0,n._)(this,"_getContent",void 0),(0,n._)(this,"_capiClient",void 0),(0,n._)(this,"_alertsRepo",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_sendUpdate",void 0),(0,n._)(this,"_sendSingleUpdate",void 0),(0,n._)(this,"_flushChanges",void 0),(0,n._)(this,"changes",void 0),(0,n._)(this,"events",void 0),(0,n._)(this,"undoApplied",void 0),(0,n._)(this,"_dismissBatch",void 0),(0,n._)(this,"_applyAlert",void 0),(0,n._)(this,"_applyTransformJson",void 0),(0,n._)(this,"_alertFeedback",void 0),(0,n._)(this,"_alertBatchFeedback",void 0),(0,n._)(this,"_notifyAlertUpdated",void 0),(0,n._)(this,"_releaseRef",void 0),(0,n._)(this,"_changeMuteState",void 0),(0,n._)(this,"_changeGapValue",void 0),(0,n._)(this,"_confirmApplied",void 0),(0,n._)(this,"_changeTakeawayFeedback",void 0),(0,n._)(this,"_shortenItSummaryNotFound",void 0),(0,n._)(this,"_commitShortenItSummaryRequest",void 0),(0,n._)(this,"_dismissShortenItTransformGroup",void 0),(0,n._)(this,"_changeToneAIToneAlternative",void 0),(0,n._)(this,"_handleCapiError",void 0),(0,n._)(this,"_applyAlertData",void 0),(0,n._)(this,"_sendApplyFeedback",void 0),(0,n._)(this,"_sendApplyTextFeedback",void 0),(0,n._)(this,"_sendApplyTransformJsonFeedback",void 0),this._positionManager=e,this._getContent=t,this._capiClient=r,this._alertsRepo=i,this._log=I.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>H.Y3((()=>this.events.next({updated:new Map(e)})),v.toError),this._sendSingleUpdate=H.tS((e=>this._sendUpdate([e]))),this._flushChanges=H.Y3((()=>this.changes.next(Y.RI.flush())),v.toError),this.changes=new A.Subject,this.events=new A.Subject,this.undoApplied=(e,t)=>{return(0,c.pipe)((()=>this._positionManager.getTextLength()),j.tS((t=>{const i={alertsToUpdate:[],reversedDelta:new V.i,undo:l.Q1},n=e.filter(ae.bZ.isApplied).reduce(((e,t)=>{const i=t.state.undoable;return ae.VD.isWithAlternative(i)?(0,c.pipe)(i.reversedAlternative,g.fold((()=>{u.wQ.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),r(e,t)}),(0,l.ls)((e=>e()),v.map((e=>e.delta)),v.fold((e=>{this._log.error("Could not retrieve reversed delta",{e,alert:t.toLiteString()})}),(i=>{r(e,t),(0,c.pipe)(i,p.r3.fromRawDelta,(t=>t.rebase(e.reversedDelta)),g.fold((()=>{e.reversedDelta=e.reversedDelta.compose(i)}),(({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)})))}))))):r(e,t),e}),i);return n.alertsToUpdate.length>0?(0,c.pipe)(H.Y3((()=>{const e=(0,c.pipe)(n.reversedDelta,z.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(Y.RI.delta(e,t))}),v.toError),H.N(this._flushChanges),H.N((0,c.pipe)(n.undo,j.UI(v.right))),H.a1((0,c.pipe)(n.alertsToUpdate,H.mg,H.tS(this._sendUpdate)))):H.F2(void 0)})));function r(e,r){e.undo=(0,l.ls)(e.undo,r.state.undoable.undo),e.alertsToUpdate.push(ce.prepare((()=>[ie.h.create(r),ie.h.create(r.changeState(t===ae.bZ.State.Applied.Method.ByCard?ae.bZ.State.init:ae.bZ.State.Removed.create(ae.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))}},this._dismissBatch=(e,t)=>(0,c.pipe)(this._flushChanges,H.a1((0,c.pipe)(e,Q.UI((0,l.ls)(j.of,j.UI(ue("_dismissBatch: Cannot send feedback for already disposed",t)),H.tS((e=>this._applyFeedbackToAlert(e,u.PZ.IGNORE,ae.l$.sidebar,this._commitFeedbackToCapi(e,{kind:u.PZ.IGNORE,subtype:t})))),ce.prepareFromAlert)),H.mg,H.tS(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:r,method:i,feedbackSubtype:n,reason:a,gbPrompt:o})=>(0,c.pipe)(e,de(ae.bZ.isRegistered,"can not apply alert in non registered state"),j.of,H.N(this._flushChanges),H.tS((e=>this._switchToBeingApplied(e,r,i))),H.tS((({beingAppliedAlert:e,undo:r})=>(0,c.pipe)(e.getReplaceEither.bind(e),H.LF,H.Pd((()=>new Error("Cannot apply alert with tJSON")),(i=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${i})`);const s=i.start,l=i.end-i.start,c=(new V.i).retain(s).delete(t.length).insert(e.replaceText);return{alert:e,undo:r,reverseDelta:c,replacementText:t,removeLen:l,feedbackSubtype:n,pos:s,reason:a,gbPrompt:o}}))))),H.tS(this._applyAlertData)),this._applyTransformJson=({alerts:e,source:t,method:r,feedbackSubtype:i,drilldownSuggestionIds:n,reason:s,gbPrompt:d})=>(0,c.pipe)(this._flushChanges,H.a1((0,c.pipe)(e,H.pE((e=>(0,c.pipe)(e.alternative,H.UI((t=>(0,l.bc)(t,function(e){switch(e._raw.point){case"AllCapsBoldification":return p.JJ.fromAlternativeBoldified;case"Lists":return p.JJ.fromAlternativeListified;default:return p.JJ.fromAlternative}}(e.alert))))))))),H.tS((t=>H.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),v.toError))),H.UI(le),pe((e=>(0,c.pipe)(e.correctRevAlternatives,Q.UI((({alert:e,alternative:l,reversedAlternative:u})=>(0,c.pipe)(this._switchToBeingApplied(e,t,r),H.mU((e=>H.dk(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,l.alternativeIndex,i,n,s,d)))),H.UI((e=>(0,o._)((0,a._)({},e),{reversedAlternative:u})))))),H.mg,H.tS((t=>(0,c.pipe)(H.Y3((()=>this.changes.next(e.changeWithFormatting)),v.toError),H.N(this._flushChanges),j.a1((0,c.pipe)(se(t),H.tS(this._sendUpdate)))))))))),this._alertFeedback=(e,t,r)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${r})`),ae.bZ.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const i=this._commitFeedbackToCapi(e,t);return(0,c.pipe)(e,ue("_alertFeedback: Cannot send feedback for already disposed",t),j.of,H.tS((e=>t.kind!==u.PZ.LOOKED||e.isRead?u.nw.willRemoveAlert(t.kind)?(0,c.pipe)(this._flushChanges,H.a1(this._applyFeedbackToAlert(e,t.kind,r,i)),ce.prepareFromAlert,this._sendSingleUpdate):(0,c.pipe)(i,H.dk):(0,c.pipe)(ce.prepare((()=>[ie.h.create(e),(e.isRead=!0,ie.h.create(e))])),this._sendSingleUpdate,j.N(i)))))},this._alertBatchFeedback=(e,t,r)=>(0,c.pipe)(e,Q.DZ((e=>e.rawId)),q.nI,g.fold((0,l.a9)(l.Q1),(e=>this._sendFeedback({kind:t,alertIds:e,subtype:r})))),this._notifyAlertUpdated=(0,l.ls)((e=>[[e[0].id,e]]),this._sendUpdate),this._releaseRef=(e,t)=>(0,c.pipe)(H.Y3((()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:ae.bZ.shouldBeRemoved(t)}),ae.bZ.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,ie.h.create(t)]])})}),v.toError)),this._changeMuteState=(e,t)=>{const r=(0,c.pipe)(e,b.T.fromArray((0,l.ls)(ue("_changeMuteState: Cannot send Mute feedback for already disposed",t),v.chain(de((e=>g.isSome(e.muteCategory)||ae.bZ.belongsToAnySpecialCategory(e)),"Alert is not muting")))));return(0,c.pipe)(r,b.T.foldSuccess(Q.UI((e=>ce.prepare((()=>[ie.h.create(e),(e.mute=t,ie.h.create(e))]))))),H.mg,H.UI(q.nI),pe(this._sendUpdate),H.UI((0,l.a9)(r)))},this._changeGapValue=(e,t)=>(0,c.pipe)(e,de(ae.bZ.isOneGap,"can not change gap value for a non one gap alert"),j.of,H.tS((e=>ce.prepare((()=>[ie.h.create(e),ie.h.create(e.changeGapValue(t))])))),this._sendSingleUpdate),this._confirmApplied=(0,l.ls)(Q.UI((e=>ce.prepare((()=>[ie.h.create(e),ie.h.create(e.changeState(ae.bZ.State.Removed.create(ae.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))),H.mg,H.tS(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>(0,c.pipe)(e,de(ae.bZ.isTakeaway,"can not change feedback for non-takeaway alert"),j.of,H.tS((e=>{const r=ie.h.create(e),i=e.setFeedback(t),n=ie.h.create(i);return(0,c.pipe)(ce.prepare((()=>[r,n])),this._sendSingleUpdate,H.UI((()=>i)))}))),this._shortenItSummaryNotFound=e=>(0,c.pipe)(e,ue("_shortenItSummaryNotFound: Cannot change state to not-found for already disposed"),v.chain(de(ae.bZ.isShortenIt,"cannot change state to not-found for a non shorten-it alert")),j.of,H.tS((e=>{const t=ie.h.create(e),r=e.changeSummaryState("notFound"),i=ie.h.create(r);return(0,c.pipe)(ce.prepare((()=>[t,i])),this._sendSingleUpdate,H.UI((()=>r)))}))),this._commitShortenItSummaryRequest=e=>(0,c.pipe)(e,ue("_commitShortenItSummaryRequest: Cannot send shorten_it_submit message for already disposed"),v.chain(de(ae.bZ.isShortenIt,"cannot send shorten_it_submit for a non shorten-it alert")),j.of,H.tS((e=>{const t=ie.h.create(e),r=e.changeSummaryState("requestSent"),i=ie.h.create(r);return(0,c.pipe)(ce.prepare((()=>[t,i])),this._sendSingleUpdate,H.UI((()=>r)),j.N(this._commitShortenItSubmitToCapi(e)))}))),this._dismissShortenItTransformGroup=(e,t)=>(0,c.pipe)(e,ue("_dismissShortenItTransformGroup: Cannot dismiss transform group for already disposed",t),v.chain(de(ae.bZ.isShortenIt,"cannot dismiss transform group for a non shorten-it alert")),j.of,H.tS((e=>{const r=ie.h.create(e),i=e.dismissTransformGroup(t),n=ie.h.create(i);return(0,c.pipe)(ce.prepare((()=>[r,n])),this._sendSingleUpdate,H.UI((()=>i)))}))),this._changeToneAIToneAlternative=(e,t)=>(0,c.pipe)(e,de(ae.bZ.isToneAI,"Cannot change tone for a non-ToneAI alert."),j.of,H.tS((e=>H.Y3((()=>{const r=[(0,l.bc)(e.id,ae.xS.create(ie.h.create(e),ie.h.create(e.setSelectedToneAlternativeIdx(t))))];return this.events.next({updated:new Map(r)}),e}),v.toError)))),this._handleCapiError=e=>t=>{Z.EP.isDroppedError(t)?this._log.debug(`Stopped listening for ${e} message acknowledge`,t):Z.YG.isNotConnectedError(t)?this._log.warn(`Failed to send ${e} as CAPI was not connected`,t):this._log.error(`Failed to send ${e}`,t)},this._applyAlertData=({pos:e,removeLen:t,reverseDelta:r,undo:i,replacementText:n,alert:a,feedbackSubtype:o,reason:s,gbPrompt:l})=>(0,c.pipe)(H.Y3((()=>{let c=this._positionManager.getTextLength(),d=!1;const p={action:u.PZ.ACCEPTED,replacement:n,commit:()=>{d||this._log.debug(`_applyAlert(${a.toLiteString()}):commit()`)},reversedAlternative:g.none,undo:()=>{d=!0,this._log.debug(`_applyAlert(${a.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==c&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${c}, actual: ${e}`);const t=Y.RI.delta(r,e);this.changes.next(t),this.changes.next(Y.RI.flush()),i()}};return this._sendApplyTextFeedback(a,n,o,s,l)(),this.changes.next(Y.RI.delta((new V.i).retain(e).delete(t).insert(n),c)),this.changes.next(Y.RI.flush()),c=this._positionManager.getTextLength(),p}),v.toError),H.tS((e=>H.Y3((()=>a.switchToApplied(e)),v.toError))),ce.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===ae.bZ.State.Applied.Method.ByCard?this._commitFeedbackToCapi(e,t):l.Q1,this._sendApplyTextFeedback=(e,t,r,i,n)=>this._sendApplyFeedback(e,{kind:u.PZ.ACCEPTED,replacementText:t,subtype:r,reason:i,gbPrompt:n}),this._sendApplyTransformJsonFeedback=(e,t,r,i,n,s)=>{const l={kind:u.PZ.ACCEPTED,alternativeIndex:t,subtype:r,drilldownSuggestionIds:i,reason:n,gbPrompt:s},c=ae.bZ.isOneGap(e)?(0,o._)((0,a._)({},l),{gapValue:e.gapValue}):ae.bZ.isShortenIt(e)?(0,o._)((0,a._)({},l),{dismissedTransformGroups:Array.from(e.dismissedTransformGroups)}):l;return this._sendApplyFeedback(e,c)}}}!function(e){e.toString=v.fold((({id:e})=>`rid:${e}`),(e=>`aid:${e.toString()}`))}(he||(he={})),function(e){e.match=function(e){return t=>t instanceof ae.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}(ge||(ge={})),function(e){e.defaultValidator=ae.bZ.isDuplicatedBy}(fe||(fe={}));class be{static _prepareUpdate(e,t){const r=(0,o._)((0,a._)({},e.toRawAlert()),{rev:t.rev});return(0,c.pipe)(t.extraProperties,y.bw((e=>r.extra_properties=e))),(0,c.pipe)(t.muted,y.bw((e=>r.muted=e))),u.wQ.withTransformJson(r)&&(0,c.pipe)(t.transformJson,y.bw((e=>r.transformJson=e))),r}_processBatch(e){return e.reduce(((e,t)=>(ge.match({alertAddOrUpdate:t=>{(0,c.pipe)(t.rawId,g.fold((()=>{e.toAdd.set(t.id,t)}),(r=>{(0,c.pipe)(this._alertsRepo.getByRawAlertId(r),g.filter((e=>e.allowUpdate)),g.map((()=>{(0,c.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)}))),e.toUpdate.set(t.id,t)})),g.getOrElse((()=>{(0,c.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)}))),e.toAdd.set(t.id,t)}))),e.toAddOrUpdate.set(r,t)})))},rangeChange:t=>{(0,f.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e)),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return(0,c.pipe)(e,v.swap,g.fromEither,g.chain((e=>e.mergedIn)),g.chain((e=>{const r=(0,c.pipe)(this._alertsRepo.getByRawAlertId(e),g.map((e=>v.right(e))),g.alt((()=>(0,c.pipe)(g.fromNullable(t.get(e)),g.map((e=>v.left(e)))))));return g.isNone(r)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),g.filter(Ce((e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((e=>e.toLiteString()))}),(0,c.pipe)(e,Q.hX(this._validateAlertAdd),Q.u4({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},((e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const r=this._getAlertsWithMatchingRanges(t.getNotEnclosingHighlightRanges()[0]),i=this._tryToMatchInvalid(t,r);switch(this._log.trace("Adding alert match result",{inc:t.id,match:i}),i.type){case ye.Type.Merged:{const r=i.result[1];ae.bZ.isNotRegistered(r.alert)?ae.bZ.isRemoved(r.alert)&&this._log.warn("unexpected merge into removed alert",{alert:r,newAlert:t}):this._alertsRepo.addToCapiMapping(r.alert),e.alertsToUpdate.set(r.id,i.result);break}case ye.Type.Restored:{const t=i.result[1];(0,f.kG)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,i.result);break}case ye.Type.Unmatched:{const t=i.result,n=r.filter((r=>ae.bZ.isDuplicateCandidate(r,g.isNone(r.rawId))&&this._alertDuplicateValidator(t,r)&&!e.alertsToRemove.has(r.id)));(0,f.kG)(t.allowDuplicates||ae.bZ.isApplicableAlert(t),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type");const a=t.allowDuplicates?{result:ve.Add,toRemove:g.none}:this._tryAddAlert(t,n);switch(a.result){case ve.Add:case ve.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",t.toLiteString()),this._alertsRepo.addToCapiMapping(t),(0,f.kG)(!e.alertsToRemove.has(t.id),"can't add alert which we wanted to remove earlier",(()=>t.toLiteString())),this._alertsRepo.add(t),e.alertsToAdd.set(t.id,ie.h.create(t)),(0,c.pipe)(a.toRemove,y.bw((t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState(ae.bZ.State.Removed.create(ae.bZ.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:ae.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case ve.Skip:this._log.debug("Skip alert with low priority",t.id);break;default:(0,f.vE)(a.result)}break}default:(0,f.vE)(i)}return e})))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map((e=>e.toLiteString()))}),(0,c.pipe)(e,Q.u4(t,((e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),(0,c.pipe)(this._alertsRepo.getByRawAlertId(y.MH(t.rawId)),g.fold((()=>this._log.warn("tried to update unknown alert",t)),(r=>{const i=t._raw;t.dispose();const n=e.has(r.id)?e.get(r.id)[0]:ie.h.create(r);r.enqueueRawAlertForUpdate(i),e.set(r.id,ae.xS.create(n,ie.h.create(r)))}))),e))))}_startAlertsChecking(e,t,r){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map((([e,t])=>[e.toLiteString(),t]))});const i=(e,t)=>{const r=e.changeState(ae.bZ.State.Registered.create(ae.bZ.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),ie.h.create(t.size>0?r.enqueueRangesRemove(t):r)};(0,c.pipe)(e,Q.u4({updatedAlerts:t,addedAlerts:r},((e,[t,r])=>((0,c.pipe)(this._alertsRepo.getByAlertId(t.id),g.fold((()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:r})}),(()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,i(t,r));else{const n=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:ie.h.create(t);e.updatedAlerts.set(t.id,ae.xS.create(n,i(t,r)))}}))),e))))}_removeAlerts(e,t){e.forEach(((e,r)=>{(0,c.pipe)(this._alertsRepo.getByAlertId(r),g.fold((()=>{this._log.warn("tried to remove unknown alert",e)}),(()=>(0,c.pipe)(t.get(r),g.fromNullable,g.map(s.li),g.filter((e=>ae.bZ.isNotDisposed(e.alert))),g.alt((()=>(0,c.pipe)(e.alert,g.fromPredicate(ae.bZ.isNotDisposed),g.map(ie.h.create)))),y.bw((i=>{const n=this._applyRemoveToAlert(e);this._terminateAlertChecking(n),t.set(r,ae.xS.create(i,ie.h.create(n)))}))))))}))}_getAlertsWithMatchingRanges(e){return(0,c.pipe)(this._positionManager.findIntersections(e),Q.hX((0,h.W9)(G.P.is,G.x.isVisible)),Q.hX((0,h.ff)(G.x.isEnclosingView)),Q.DZ((e=>this._alertsRepo.getByAlertId(e.meta.alertId))),Q.hX((e=>!(ae.bZ.isApplied(e)&&e.getAppliedRanges().length>0))))}_tryToMatchInvalid(e,t){return(0,f.kG)(!e.isValid,"added alert should be invalid"),(0,f.kG)(ae.bZ.isRegistered(e),"added alert should be in registered state",(()=>e.toString())),(0,c.pipe)(g.fromNullable(t.find((t=>!t.isValid&&t.canBeMergedWith(e)))),g.fold((()=>({result:e,type:ye.Type.Unmatched})),(t=>{(0,f.kG)((0,c.pipe)(t.rawId,y.wo((0,l.ls)(this._alertsRepo.getByRawAlertId,g.isNone))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const r=ie.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&ae.bZ.isCapiDone(t)?{result:ae.xS.create(r,ie.h.create(t.changeState(ae.bZ.State.init))),type:ye.Type.Restored}:{result:ae.xS.create(r,ie.h.create(t)),type:ye.Type.Merged}})))}_tryAddAlert(e,t){return(0,c.pipe)(q.nI(t),g.map((t=>{(0,f.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map((e=>e.toString()))} with input (${e.toString()})`);const r=t[0];return r.extraProperties.priority<=e.extraProperties.priority?{result:ve.OverwriteExisting,toRemove:g.some(r)}:(e.dispose(),{result:ve.Skip,toRemove:g.none})})),g.getOrElse((()=>({result:ve.Add,toRemove:g.none}))))}_cleanupPendingAlerts(e){e.removed.forEach((e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.debug("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return(0,c.pipe)(Array.from(this._recheckedAlerts.values()),Q.DZ((e=>{const t=this._alertsRepo.getByAlertId(e);g.isNone(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const r=(0,c.pipe)(t,g.filter((e=>ae.bZ.isRegistered(e))),g.map((e=>(0,l.bc)(e.id,this._finishAlertChecking(e)))));return g.isNone(r)&&this._log.error("tried to update checking state on non-registered alert",e),r})),(e=>({updated:new Map(e)})))}constructor(e,t,r){(0,n._)(this,"_positionManager",void 0),(0,n._)(this,"_alertsRepo",void 0),(0,n._)(this,"_alertDuplicateValidator",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_heuristicallyRemovedAlerts",void 0),(0,n._)(this,"process",void 0),(0,n._)(this,"reset",void 0),(0,n._)(this,"_processAlertsBatch",void 0),(0,n._)(this,"_collectChanges",void 0),(0,n._)(this,"_validateAlertAdd",void 0),(0,n._)(this,"_recheckedAlerts",void 0),(0,n._)(this,"_terminateAlertChecking",void 0),(0,n._)(this,"_applyRemoveToAlert",void 0),(0,n._)(this,"_finishAlertChecking",void 0),this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=r,this._log=I.C8.Logging.getLogger("AlertManager.pipeline",S.i.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:r,toAddOrUpdate:i,toRemoveUnfiltered:n,toChangeUnfiltered:a,toDispose:o,rangeChanges:s}=this._processBatch(e),d=e=>(0,c.pipe)(this._alertsRepo.getByAlertId(e),g.getOrElse((()=>t.get(e)||r.get(e)||o.get(e))));a.forEach((e=>(0,c.pipe)(g.fromNullable(i.get(e.id)),g.fold((()=>(0,c.pipe)(this._alertsRepo.getByRawAlertId(e.id),g.map((t=>{const n=t.copy(!1),a=be._prepareUpdate(n,e);g.isSome(e.transformJson)?n.updateAlertWithManagedData(a):n.patchWithRawAlert(a),r.set(n.id,n),i.set(e.id,n)})),g.getOrElse((()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))))),(t=>{const i=be._prepareUpdate(t,e);r.has(t.id)?t.patchWithRawAlert(i):t.updateAlertWithManagedData(i)})))));const u=n.reduce(((e,n)=>{const a=(0,c.pipe)(n,v.fold((({id:e})=>(0,c.pipe)(this._alertsRepo.getByRawAlertId(e),g.map((e=>ae.bZ.isRegistered(e)?e:void 0)),g.getOrElse((()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):i.get(e))))),d));return void 0===a?(v.isLeft(n)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(n.left)):this._log.error("Cannot find existing alert by id",n.right),e):((0,c.pipe)(this._getMergeTarget(n,i),g.filter(Ce((e=>e.lensId!==a.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:a,target:e}),!1):g.isNone(a.rawId)?(this._log.warn("Trying to merge into local alert",{source:a,target:e}),!1):a.references>e.references))),g.fold((()=>{e.set(a.id,{alert:a,reason:(0,c.pipe)(n,v.swap,g.fromEither,g.chain((e=>e.hint)),g.chain((e=>e===m.A.NotFixed?g.some(ae.bZ.State.Removed.Reason.capiDismiss):g.none)),g.getOrElse((()=>ae.bZ.State.Removed.Reason.capiDone)))})}),v.fold((e=>{this._log.debug("swap raw alerts with new alert",{source:a.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(a,e);const n=y.MH(a.rawId);(0,f.kG)(void 0===r.get(e.id),"Added alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()));const s=a.copy();r.set(s.id,s),i.set(n,s),t.delete(e.id),o.set(e.id,e)}),(t=>{this._log.debug("swap raw alerts with existing alert",{source:a.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(a,t),e.set(t.id,{alert:t,reason:ae.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),p=new Map;return s&&s.forEach(((e,t)=>{(0,c.pipe)(t,d,g.fromPredicate((i=>i?ae.bZ.isInteractable(i)?!r.has(i.id)||(this._log.debug("skip range change on updateHolder alert",i.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",i.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1))),g.chain((r=>(0,c.pipe)(r.onRangeChange(e),g.map((e=>{switch(e.state){case ae.bZ.Transition.State.Pending:return p.set(r.id,[r,e.removedRanges]);case ae.bZ.Transition.State.Dispose:return(0,c.pipe)(r.rawId,g.fold((()=>this._log.debug("dispose by range change on unknown rid",r.id)),(e=>this._heuristicallyRemovedAlerts.set(e,r)))),u.set(t,{alert:r,reason:ae.bZ.State.Removed.Reason.textChange});default:return(0,f.vE)(e)}}))))))})),u.forEach((({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),(0,c.pipe)(e.rawId,g.fold((()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),u.delete(e.id),o.set(e.id,e)),(0,f.kG)(!1===r.has(e.id),"Added local alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()))}),(n=>{const a=i.get(n);a&&(i.delete(n),t.delete(a.id)?(this._log.debug("cancel add for: "+a.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),u.delete(e.id),o.set(e.id,e),o.set(a.id,a)):r.delete(a.id)?(this._log.debug("cancel update for: "+a.toLiteString()),a.id!==e.id&&(this._log.debug("marking update to dispose: "+a.toLiteString()),o.set(a.id,a))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",a))}))),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),(0,c.pipe)(this._alertsRepo.getByAlertId(e.id),g.fold((()=>{this._log.debug("cancel delete for: "+e.toLiteString()),u.delete(e.id)}),l.Q1))})),o.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${o.size}`,{alerts:Array.from(o.values()).map((e=>e.toLiteString()))}),o.forEach((e=>{p.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:t,toUpdate:r,toRemove:u,toStartChecking:p}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:r,toStartChecking:i})=>{const{alertsToAdd:n,alertsToUpdate:a,alertsToRemove:o}=this._addAlerts(Array.from(e.values()),r);return t.size>0&&this._updateAlerts(Array.from(t.values()),a),i.size>0&&this._startAlertsChecking(Array.from(i.values()),a,n),o.size>0&&this._removeAlerts(o,a),{added:n,updated:a}},this._validateAlertAdd=e=>{try{const t=!ae.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==u.wQ.Impact.Critical&&e._raw.impact!==u.wQ.Impact.Advanced&&g.isSome(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,c.pipe)(e.rawId,g.exists((e=>g.isSome(this._alertsRepo.getByRawAlertId(e)))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===W.R.Type.Plagiarism&&U.T.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==ae.bZ.State.Removed.Reason.textChange&&t!==ae.bZ.State.Removed.Reason.duplicated&&e.clearCapiId(),e.changeState(ae.bZ.State.Removed.create(t))),this._finishAlertChecking=e=>{(0,f.kG)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=ie.h.create(e);return ae.xS.create(t,ie.h.create(e.changeState(ae.bZ.State.Registered.create(ae.bZ.CheckingState.IDLE))))}}}function Ce(e){return v.fold(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(ye||(ye={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(ve||(ve={}));var Ie=r(34101),Se=r(96021);class we{flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return(0,h.Dw)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(Se.I.splitById).map((({id:e,local:t})=>({id:e,alert:ae.bZ.create((0,c.pipe)(t,u.wQ.matchBy(l.yR,(e=>(0,o._)((0,a._)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,c.pipe)(e.transformJson.alternatives,g.map(p.r3.Group.fromSerialized))}})),l.yR),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)}))).forEach((({id:e,alert:r})=>{this._addAlertBuffered(r),e&&t.set(e,r.id)}))),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!ae.bZ.isPlagiarism(e);case"plagiarism":return e=>ae.bZ.isPlagiarism(e);default:return(0,f.vE)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_handleFreePremium(e){this._log.trace(`_handleFreePremium(${e.id})`),Boolean(e.updatable)&&(0,c.pipe)(this._alertsRepository.getByRawAlertId(e.id),g.filter(ae.bZ.isNotDisposed),y.bw((()=>this._removeAlertBuffered(v.left({id:e.id,mergedIn:g.none,hint:g.none})))));const t=ae.bZ.create(this._transformRawAlert(e),this._ops,this._positionManager,this._alternativeManager);this.flushAlerts(),this._freePremiumAlerts.next(t)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${he.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter(ae.bZ.isNotRemoved)}constructor(e,t,r,a,o,u,p,f=fe.defaultValidator,y=new Ie.a,N=e.rangeChanged){(0,n._)(this,"_positionManager",void 0),(0,n._)(this,"_alternativeManager",void 0),(0,n._)(this,"_getContent",void 0),(0,n._)(this,"_capiEvents",void 0),(0,n._)(this,"_capiClient",void 0),(0,n._)(this,"_documentCounters",void 0),(0,n._)(this,"_transformRawAlert",void 0),(0,n._)(this,"_alertDuplicateValidator",void 0),(0,n._)(this,"_alertsRepository",void 0),(0,n._)(this,"rangeChanged",void 0),(0,n._)(this,"_state",void 0),(0,n._)(this,"state",void 0),(0,n._)(this,"lensesScores",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_addAlerts",void 0),(0,n._)(this,"_removeAlerts",void 0),(0,n._)(this,"_changeAlerts",void 0),(0,n._)(this,"_freePremiumAlerts",void 0),(0,n._)(this,"_flush",void 0),(0,n._)(this,"_alertsPerRevision",void 0),(0,n._)(this,"_ops",void 0),(0,n._)(this,"_pipeline",void 0),(0,n._)(this,"changes",void 0),(0,n._)(this,"loadScores",void 0),(0,n._)(this,"undoApplied",void 0),(0,n._)(this,"_invalidateAlerts",void 0),(0,n._)(this,"_removeInvalidAlerts",void 0),(0,n._)(this,"_onCapiEvent",void 0),(0,n._)(this,"_emitDomainEvent",void 0),(0,n._)(this,"_prepareDiff",void 0),(0,n._)(this,"_disposeAlert",void 0),this._positionManager=e,this._alternativeManager=t,this._getContent=r,this._capiEvents=a,this._capiClient=o,this._documentCounters=u,this._transformRawAlert=p,this._alertDuplicateValidator=f,this._alertsRepository=y,this.rangeChanged=N,this._state=d.h.create(M.r.empty),this.state=this._state.view(M.r.toCheckingResult),this.lensesScores=d.h.create(P.empty),this._log=I.C8.Logging.getLogger(we.loggerName,S.i.TRACE,S.T.Manager.getColor()),this._subs=[],this._addAlerts=new A.Subject,this._removeAlerts=new A.Subject,this._changeAlerts=new A.Subject,this._freePremiumAlerts=new A.Subject,this._flush=new A.Subject,this._alertsPerRevision=0,this._pipeline=new be(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=x.uK(this._getAllAlertsAsArray(),(e=>e.isValid));this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach((e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()})),t.forEach((e=>e.clearCapiId()))},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),r=this._getAllAlertsAsArray().filter((e=>!e.isValid&&ae.bZ.isNotDisposed(e)&&ae.bZ.isRegistered(e)&&t(e)));r.forEach((e=>this._removeAlertBuffered(v.right(e.id)))),this._log.debug(`${r.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(S.i.TRACE)&&this._log.trace("Removed alerts",r.map((e=>e.toString())))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});"unlocked"===e.alert.extra_properties.free_premium?this._handleFreePremium(e.alert):this._addAlertBuffered(ae.bZ.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${g.getOrElse((()=>"None"))(e.mergedIn)}, hint: ${g.getOrElse((()=>"None"))(e.hint)}`);(0,c.pipe)(this._alertsRepository.getByRawAlertId(e.alertId),g.exists(ae.bZ.isBulkApplied))||this._removeAlertBuffered(v.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:g.fromNullable(e.extraProperties),transformJson:g.fromNullable(e.transformJson),muted:g.fromNullable(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){w.jI.isErrorLike(t)?this._log.error("Cannot handle CAPI event.",t,{capiEvent:e}):this._log.error("Cannot handle CAPI event.",{capiEvent:e,error:t})}},this._emitDomainEvent=e=>{(0,c.pipe)(e,this._prepareDiff,T.v.createDiff,b.T.recover((e=>this._log.error("conflicts on diff creating",e))),(e=>(this._log.debug("_emitDomainEvent",k.p.Diff.show.show(e)),e)),M.r.applyDiff,C.UI(b.T.recover((e=>this._log.error("conflicts on diff apply",e)))),(e=>this._state.modify(e)))},this._prepareDiff=({added:e,updated:t=new Map,removed:r=new Map})=>(t.forEach(((e,i)=>{(0,c.pipe)(e,s.Yg,ae.bZ.fromAlertModel,ae.bZ.shouldBeRemoved)&&(t.delete(i),r.set(i,e[0]))})),r.forEach((0,l.ls)(ae.bZ.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:r}),this._disposeAlert=e=>{if(ae.bZ.isApplied(e)&&e.state.undoable.commit(),ae.bZ.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("Cannot remove alert.",t),ae.bZ.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new xe(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const L=this.rangeChanged.pipe(A.map((({affected:e})=>e)),A.filter((e=>e.length>0)),A.map((e=>E.vM((e=>e.meta.alertId),e.filter(G.P.is)))),A.filter((e=>e.size>0)),A.tap((e=>this._log.debug("Range[s] changed",e))),A.share()),D=A.interval(250).pipe(A.startWith(0),A.merge(this._flush)),F=_.RX(this._log);this._subs.push(F("_alertsInvalidation",this._capiEvents.pipe(A.filter((e=>m.h.is("session_started")(e)&&e.isNewSession)),A.tap(this._invalidateAlerts),A.switchMapTo(A.mergeStatic(this._capiEvents.pipe(A.filter(m.h.is("finish")),A.take(1),A.mapTo("alert")),this._capiEvents.pipe(A.filter(m.h.is("async_check_finished")),A.take(1),A.mapTo("plagiarism")))),A.tap(this._removeInvalidAlerts))),F("_capiEvents",this._capiEvents.pipe(A.tap(this._onCapiEvent))),F("_alertsProccesing",this._addAlerts.pipe(A.merge(this._freePremiumAlerts),A.merge(this._removeAlerts),A.merge(this._changeAlerts),A.merge(L),A.buffer(D),A.filter(h.Dw),A.map(this._pipeline.process),A.tap(this._emitDomainEvent))),F("_alertsBuffer",L.pipe(A.merge(this._capiEvents.pipe(A.filter(m.h.is("before_finish","before_async_check_finish","async_check_finished")))),A.mapTo(_.PU),A.tap(this._flush))),F("_alertOpsAlertChanges",this._ops.events.pipe(A.tap(this._emitDomainEvent))),F("_lensesScoresChanges",P.fromCapi(this._capiEvents).pipe(A.tap(_.wW(this.lensesScores)))),F("documentCountersChanges",i.fromAlerts(this._state.view(T.v.iso.wrap)).pipe(A.tap(_.wW(this._documentCounters))))),(0,h.iR)("alerts",(()=>this.toString())),(0,h.iR)("triggerRemove",(e=>{this._removeAlertBuffered(v.right(e))}))}}(0,n._)(we,"loggerName","AlertManager")},6488:(e,t,r)=>{r.d(t,{e:()=>i});var i,n=r(57050),a=r(40327),o=r(5114),s=r(8125),l=r(4390),c=r(74660);!function(e){e.create=function(e){const t=t=>(0,a.pipe)(e.get(),l.p.get(t),o.map(c.bZ.fromAlertModel)),r=e=>(0,a.pipe)(t(e),o.filter(c.bZ.isInteractable)),i=e=>(0,a.pipe)(t(e),o.filter(c.bZ.isRegistered)),d=(0,n.ls)(i,o.filter((0,s.W9)(c.bZ.isNotDisposed,(0,n.ff)(c.bZ.isInPremiumLens),(0,n.ff)(c.bZ.isHidden)))),u=(0,n.ls)(d,o.isSome);return{getById:t,getRegistered:i,getInteractable:r,getValidForFeedback:d,isValidForFeedback:u,isRegistered:e=>(0,a.pipe)(i(e),o.isSome),isInteractable:e=>(0,a.pipe)(r(e),o.isSome)}}}(i||(i={}))},79227:(e,t,r)=>{r.d(t,{k:()=>y});var i=r(18775),n=r(71249),a=r(95195),o=r(23330),s=r(35214),l=r(64015),c=r(57050),d=r(40327),u=r(84966),p=r(95574),m=r(81670),h=r(5114),g=r(42040),f=r(74660);class y{apply(e,t){const{alternativeIndex:r,source:i}=t;return this._log.trace("apply",e),(0,d.pipe)(this._findAlert(e),a.chain(a.fromPredicate(f.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),a.chain((e=>(0,d.pipe)(p.vM((()=>e.apply(t))),a.mapLeft((t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:r,source:i}),t)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,u.DI.BULK_ACCEPTED,t);const r=(0,d.pipe)(e,m.T.fromArray((e=>(0,d.pipe)(this._findAlert(e),a.mapLeft((t=>(0,c.bc)(t,{id:e}))),a.chain(a.fromPredicate(f.bZ.isRegisteredApplicableAlert,(e=>(0,c.bc)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),a.chain(a.fromPredicate((e=>u.wQ.withTransformJson(e._raw)),(e=>(0,c.bc)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),a.mapLeft((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,d.pipe)(r,m.T.flatMap(n.uZ(),(e=>(0,d.pipe)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:f.bZ.getApplicableAlternative(e,0)}))),source:f.l$.api,method:f.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),o.g_((t=>()=>(this._log.error("applyBulk error",t),m.T.of([],e.map((e=>e.id))))),(()=>()=>m.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,d.pipe)(e,m.T.fromArray((0,c.ls)(this._findAlert,a.map(f.Ev.castApplied))),a.mapLeft((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),a.chain((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,d.pipe)(e.map((0,c.ls)(this._findAlert,a.map((e=>[e])))),(0,s.fold)(x),a.chain((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,r){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._alertFeedback(e,t,r)())))}sendBatchFeedback(e,t,r){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,d.pipe)(e,m.T.fromArray(this._findAlert),m.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),m.T.foldSuccess((e=>a.right(this._ops._alertBatchFeedback(e,t,r)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,d.pipe)(this._findAlert(e.id),a.chain((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,d.pipe)(e,m.T.fromArray((e=>this._findAlert(e.id))),m.T.flatMap(n.uZ(),(e=>(0,d.pipe)(this._ops._changeMuteState(e,t)(),a.mapLeft((e=>(this._log.error("Can not change mute state",e),e))),p.MH))))}changeGapValue(e,t){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeGapValue(e,t)())))}changeTakeawayFeedback(e,t){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeTakeawayFeedback(e,t)())))}shortenItSummaryNotFound(e){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._shortenItSummaryNotFound(e)())))}sendShortenItSummaryRequest(e){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._commitShortenItSummaryRequest(e)())))}dismissShortenItTransformGroup(e,t){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._dismissShortenItTransformGroup(e,t)())))}changeToneAIToneAlternative(e,t){return(0,d.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeToneAIToneAlternative(e,t)())))}constructor(e,t){(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_ops",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_findAlert",void 0),(0,i._)(this,"undoBulk",void 0),(0,i._)(this,"getHighlightRanges",void 0),(0,i._)(this,"hasNewRangesForUpdate",void 0),(0,i._)(this,"applyPendingRangesUpdate",void 0),(0,i._)(this,"getAppliedRanges",void 0),this._alertsReader=e,this._ops=t,this._log=g.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,d.pipe)(e,this._alertsReader.getById,a.fromOption((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,c.ls)(l.DZ((0,c.ls)(this._alertsReader.getById,h.filter(f.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,f.bZ.State.Applied.Method.Bulk)()),a.getOrElse((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.ls)(this._findAlert,a.map((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,c.ls)(this._findAlert,a.map((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,c.ls)(this._findAlert,a.map((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,c.ls)(this._alertsReader.getById,a.fromOption((()=>new Error("alert not found in the repo"))),a.filterOrElse(f.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),a.map((e=>e.getAppliedRanges())))}}const v=n.uZ(),x=(0,a.getApplyMonoid)(v)},43320:(e,t,r)=>{r.d(t,{R:()=>a});var i=r(51072),n=r(19751);class a{static init(e,t,r,i,o,s){const l=new n.Subject;return new a(e,t,r,i,o,s,l),l}constructor(e,t,r,i,n,o,s){const l=a.NamedChangesSink.factory(s),c={pm:l(a.Receiver.PM,i),dm:l(a.Receiver.PM,n),capi:l(a.Receiver.CAPI,r),userTextEcho:l(a.Receiver.UserText,e)};a.Producer.create(a.Producer.UserText,{changes:e.changes})(c.dm,c.pm,c.capi),a.Producer.create(a.Producer.ALERT_APPLY,o)(c.userTextEcho),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}}!function(e){let t,r,n,a;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...r)=>t.changes.subscribe((t=>{r.forEach((r=>r.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(r=e.Receiver||(e.Receiver={})),function(e){function t(e,t,r){return{pushChanges:(n,a)=>{try{let o=t.pushChanges(a);"function"==typeof o&&(o=i.Vi(o)),void 0!==o&&o.catch((t=>r.next({exception:t,details:{from:n,to:e}})))}catch(t){r.next({exception:t,details:{from:n,to:e}})}}}}e.factory=function(e){return(r,i)=>t(r,i,e)},e.create=t}(n=e.NamedChangesSink||(e.NamedChangesSink={})),function(e){e.create=e=>({changes:e.changes,pushChanges(t){e.pushChanges(t,"user")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(a=e.UserTextChangesSync||(e.UserTextChangesSync={}))}(a||(a={}))},5008:(e,t,r)=>{r.d(t,{A:()=>n,n:()=>i});var i,n,a=r(57050),o=r(25938),s=r(36991),l=r(8125),c=r(62965),d=r(19751);!function(e){e.noopSync={pushChanges:l.Q1};e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.ls)(e.pushChanges,c.UI(l.Q1))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(o.RI.isDelta(t)?o.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(i||(i={})),function(e){e.merge=function(e){return{changes:d.mergeStatic(...e.map((e=>e.changes)))}}}(n||(n={}))},91247:(e,t,r)=>{r.d(t,{w:()=>p});var i,n=r(57050),a=r(40327),o=r(50147),s=r(92843),l=r(68983),c=r(5114),d=r(51653),u=r(70996);!function(e){e.modelToCounters=function(e){return u.h.isRegistered(e)?e.counters:d.R.empty}}(i||(i={}));var p,m=r(66896);!function(e){e.monoid=o.uZ(m.R.Id.ord,m.R.Meta.group),e.eq=o.Eh(m.R.Id.ord,m.R.Meta.eq),e.isEmpty=o.xb,e.lookup=o.P5(m.R.Id.ord),e.applyDiff=e=>t=>i=>(0,a.pipe)(t,s.v.foldMap(p.monoid)(d(e),u(e),r(e)),(0,l.W)(p.monoid.concat)(i),o.hX((0,n.ff)(m.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let r=t;return e.forEach(((e,t)=>{r=(0,a.pipe)(r,o.cq(m.R.Id.ord)(t,m.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,a.pipe)(r,o.ZQ(m.R.Id.ord)(t,m.R.Meta.fromPercentile(e)))),n.yR))})),r};const t=(0,n.ls)(i.modelToCounters,m.R.Meta.fromAlertCounters),r=e=>r=>h(e)(r,t),d=e=>r=>h(e)(r,(0,n.ls)(t,m.R.Meta.group.inverse)),u=e=>(t,i)=>p.monoid.concat(r(e)(i),d(e)(t)),h=e=>(t,r)=>(0,a.pipe)(e,o.hX((e=>e(t.alert))),o.UI((()=>r(t))))}(p||(p={}))},13313:(e,t,r)=>{r.d(t,{A:()=>i});var i,n=r(50858),a=r(55818),o=r(23239),s=r(19751),l=r(98403),c=r(54216),d=r(4390),u=r(91247);!function(e){var t=e.defaultState={alerts:d.p.empty,lenses:u.w.monoid.empty};e.get=(e,i,n)=>i.pipe(s.startWith(new Map),s.combineLatest(e.pipe(s.startWith(d.p.empty),s.scan(((e,t)=>r(t,n.lensFilters)(e)),t)),p)),e.getMock=(e,t)=>{const r=o.h.create(i.defaultState);return i.get(e,t,c.t.create(c.t.defaultLensFilters,c.t.defaultTextFilters)).subscribe(l.wW(r)),r};const r=(e,t)=>r=>{const i=d.p.Diff.toRegistered(d.p.diff(r.alerts,e));return{alerts:e,lenses:u.w.applyDiff(t)(i)(r.lenses)}},p=(e,t)=>(0,a._)((0,n._)({},t),{lenses:u.w.updatePercentiles(e)(t.lenses)})}(i||(i={}))},35301:(e,t,r)=>{r.d(t,{J:()=>i});var i,n=r(50858),a=r(55818),o=r(71249),s=r(22690),l=r(57050),c=r(40327),d=r(23239),u=r(84966),p=r(80358),m=r(45701),h=r(50147),g=r(5114),f=r(43675),y=r(62965),v=r(8125),x=r(95195),b=r(42040),C=r(19751),I=r(9922),S=r(98403),w=r(74660),A=r(85654);!function(e){let t,r,i;!function(e){let t;!function(e){e.ord=m.ordString,e.show=s._3,e.create=e=>e}(t=e.Id||(e.Id={}));e.isSpecial=e=>Object.values(u.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>h.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>r=>{const i=Array.from(r.keys()),o=A.k.getAlerts(t,i).byCategory;return(0,c.pipe)(r,h.DZ((t=>e(t.id)?g.some((0,a._)((0,n._)({},t),{alertsCount:o.get(t.id).filter(w.bZ.isRegistered).length})):g.none)))}}(r=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let i,n;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(i=e.Events||(e.Events={})),e.create=function(e,n,a,s,m){const h=b.C8.Logging.getLogger("MutedAlertsModel"),E=d.h.create(new Map),_=new C.Subject,k=new I.w.Keeper,T=d.h.create(!1);return k.push(T.pipe(C.switchMap((t=>e.pipe(C.filter((()=>!t)),C.filter(p.h.is("session_started")),C.map((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),C.tap(S.wW(E)),C.tap((()=>_.next({type:i.Type.CategoriesChanged}))))))).subscribe(),E.pipe(C.pairwise(),C.map((([e,r])=>function(e,r){return{muted:f.uz(t.Id.ord)(e,r),unmuted:f.uz(t.Id.ord)(r,e)}}(e,r))),C.map(function(e){return({muted:t,unmuted:r})=>({toMute:A.k.getAlerts(e,t).all.filter((e=>e.mute!==w.bZ.MuteStateType.Muted)),toUnmute:A.k.getAlerts(e,r).all.filter((e=>e.mute!==w.bZ.MuteStateType.Unmuted))})}(a)),C.tap((({toMute:e,toUnmute:t})=>{e.length>0&&s.changeMuteState(e,w.bZ.MuteStateType.Muted),t.length>0&&s.changeMuteState(t,w.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:_,mutedCategories:E,muteCategories:e=>{T.set(!0),(0,c.pipe)(n.sendFeedback({kind:u.Mw.MUTE,userMuteScope:m,userMuteCategories:e}),y.tS((()=>(T.set(!1),y.F2(v.Q1)))),y.Vn((e=>{h.warn("Alerts could not be muted on CAPI",e)})))();const r=A.k.getAlerts(a,e);0===r.all.filter((e=>e.mute!==w.bZ.MuteStateType.Muted)).length&&h.warn("No alerts were muted on category mute",{categoryIds:e});const s=function(e,r,i){return n=>{const a=new Map(n);return e.forEach(((e,n)=>{t.isSpecial(n)?a.set(n,{id:n,scope:r,description:t.specialCategoryDescription}):(0,c.pipe)(o.P5(0,e),g.chain((e=>e.muteCategory)),g.fold((()=>i.error("No alerts to mute",n)),(e=>a.set(n,{id:e.id,description:e.description,scope:r}))))})),a}}(r.byCategory,m,h)(E.get());return E.set(s),_.next({type:i.Type.CategoriesChanged}),x.right(void 0)},unmuteCategories:e=>{T.set(!0),(0,c.pipe)(n.sendFeedback({kind:u.Mw.UNMUTE,userMuteScope:m,userMuteCategories:e}),y.tS((()=>(T.set(!1),y.F2(v.Q1)))),y.Vn((e=>{h.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===A.k.getAlerts(a,e).all.filter((e=>e.mute!==w.bZ.MuteStateType.Unmuted)).length&&h.warn("No alerts were unmuted on category unmute",{categoryIds:e}),E.modify(function(e,t){return r=>{const i=new Map(r);return e.forEach((e=>{r.has(e)?i.delete(e):t.error("Tried to unmute a category which is not muted",e)})),i}}(e,h)),_.next({type:i.Type.CategoriesChanged}),x.right(void 0)},getMutedCategories:()=>(0,c.pipe)(E.get(),r.filterWithCount((0,l.ff)(t.isSpecial),a)),getMutedSpecialCategories:()=>(0,c.pipe)(E.get(),r.filter(t.isSpecial)),loadCachedMutedCategories:e=>{E.set(e)},dispose:()=>k.dispose()}},function(e){e.create=function(){return{events:C.EMPTY,mutedCategories:d.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>x.right(void 0),unmuteCategories:e=>x.right(void 0),loadCachedMutedCategories:v.Q1,dispose:v.Q1}}}(n=e.Mock||(e.Mock={}))}(i=e.CategoriesModel||(e.CategoriesModel={}))}(i||(i={}))},85654:(e,t,r)=>{r.d(t,{k:()=>i});var i,n=r(40327),a=r(5114),o=r(74660),s=r(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,n.pipe)(e.getById(t),a.chain((e=>e.muteCategory)))});e.getAlerts=function(e,t){const r={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,n.pipe)(e.get(),s.p.reduce(r,((e,{alert:r})=>(0,n.pipe)(r.muteCategory,a.filter((e=>t.includes(e.id))),a.map((e=>e.id)),a.alt((()=>a.fromNullable(t.find(o.bZ.belongsToSpecialCategory(r))))),a.fold((()=>e),(t=>(e.byCategory.get(t).push(r),e.all.push(r),e)))))))}}(i||(i={}))},21729:(e,t,r)=>{r.d(t,{dM:()=>i,j:()=>n});var i,n,a,o,s=r(73975),l=r(22690),c=r(40327),d=r(23239),u=r(73353),p=r(48837),m=r(5114),h=r(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,freePremium:p.Kh,paid:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=s.MW({critical:s.lr,advanced:s.lr,free:s.lr,freePremium:s.lr,paid:s.lr,unread:s.lr,muted:s.lr}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,unread:l.yt,muted:l.yt});e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(e){return i.eq.equals(e,i.group.empty)}}(i||(i={})),function(e){var t=e.MIN_GOALS=3;e.TOTAL_GOALS=t+1;e.calculateCompleteness=function(e){const t=(0,c.pipe)(e.goals,m.exists((e=>e.size>0)));return u.R$.eq.equals(e,u.R$.unset)||(0,c.pipe)(e.domain,h.wo((e=>"general"===e)))&&!(m.isSome(e.audience)||m.isSome(e.style)||t)?0:Number(t||0)+n.MIN_GOALS}}(n||(n={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={}));e.Mock={getCheckingForState:()=>d.h.create({kind:o.CheckingKind.Document,type:"idle"})}}(o||(o={}))},51006:(e,t,r)=>{r.d(t,{X:()=>i});var i,n=r(22232);!function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony",e.GrammarlyGOIdeationAssistant="grammarlyGOIdeationAssistant",e.GrammarlyGORewrite="grammarlyGORewrite"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){switch(e){case t.Step2:case t.Step3:case t.Step5:case t.Step6:case t.Step7:case t.Step12:case t.Step13:case t.Step16:return!1;case t.Step1:case t.Step4:case t.Step8:case t.Step9:case t.Step10:case t.Step11:case t.Step14:case t.Step15:case t.DocumentTitle:case t.Synfony:case t.GrammarlyGOIdeationAssistant:case t.GrammarlyGORewrite:return!0;default:return(0,n.vE)(e)}}}(i||(i={}))},94048:(e,t,r)=>{r.d(t,{E:()=>i});const i=(0,r(83171).createTypeStyle)()},7910:(e,t,r)=>{r.d(t,{sJ:()=>m});var i=r(57050),n=r(40327),a=r(5114),o=r(34217),s=r(19751),l=r(26027),c=r(48521),d=r(35416),u=r(76201),p=r(34442);function m(e){return(t,r,i,n,a,s)=>o.Z.composeKnot({content:o.Z.fromSideEffect((r=>{h(t)(r);const i=r.action.action;"item"===i.key&&e(i.action)}),f(r,a,s)),root:g(r,i,n)})}function h(e){return t=>{switch(t.action.action.action.kind){case p.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case p.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const g=(e,t,r)=>o.Z.fromSideEffect((e=>{t.next(e.element)}),s.combineLatestStatic([r,e.view("cardsHeight")]).pipe(s.map((([e,t])=>({disableUserActions:e,height:t}))),s.startWith({disableUserActions:!1,height:0}))),f=(e,t,r)=>{const o=e.view(u.v.Prism.items),m=e.pipe(s.map((e=>e.itemsOrd))),h=e.pipe(s.map((0,i.ls)(d.In.getActiveItem,a.map(l.X.getId)),s.distinctUntilChanged())),g=e.view(t.getActiveAlertsCount).view((e=>0===e));return s.combineLatestStatic([o,h,g,m]).pipe(s.map((([e,i,o,s])=>{const l=(0,n.pipe)(e.find((e=>e.positionState.watched)),a.map((e=>e.value))),d=e.getAt(e.size-1);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,n.pipe)(t,a.exists((t=>t.id===e.id)))||(0,n.pipe)(t,a.exists((e=>e.positionState.isHeightValid))))(e,l))).map((e=>function(e){return(t,r,i,o)=>s=>{const l=(0,n.pipe)(t,a.exists((e=>e===s.id)));return{cell:{item:e.viewState(r,i)(s),root:{height:{value:s.positionState.height,watched:s.positionState.watched&&!e.isScheduledToDispose(s),isValid:s.positionState.isHeightValid},position:{top:s.positionState.absTop,animationInProgress:s.positionState.animationInProgress},layer:l||c.o.isAnimatable(s)&&s.visualState.incomplete&&!(0,n.pipe)(s.visualState.from,a.exists((e=>"focused"===e)))?p.H.Layer.front:p.H.Layer.back}},root:s.id,hashCode:s.hashCode.bind(s),equals:e=>s.equals(e.cell.item.view),compare:e=>o.compare(s,e.cell.item.view)}}}(t)(i,o,(0,n.pipe)(d,a.exists((t=>t.id===e.id))),s)(e)),r(s))})))}},68579:(e,t,r)=>{r.d(t,{A:()=>i});var i,n=r(50858),a=r(55818),o=r(27378),s=r(8543),l=r(54001),c=r(8125),d=r(5114),u=r(34217),p=r(89894),m=r(34442),h=r(95983),g=r(19751);!function(e){let t;function r(e){return u.UI.List.make(h.aW.getFoldableWithIndex(),p(e))}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=r,e.cardList=function(e){return u.UI.Knot.make(i,{content:r(e)})};var i=e.ScrollableBox=u.UI.Grid.make((({notify:e,view:r,slots:i})=>o.createElement(s.F.div,(0,a._)((0,n._)({},(0,l.Sh)(r("disableUserActions").pipe(g.map((0,c.RN)(y.disableUserActions,void 0))),y.scrollContent)),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:r=>e({kind:t.onMount,element:d.fromNullable(r)})()}),i.content)));function p(e){return u.UI.Knot.make(v,{cell:u.UI.Knot.make(m.H.Cell,{item:u.UI.Composite.make(f,e)})})}e.cell=p;var f=e.CardStyleProvider=u.UI.Grid.make((({slots:e})=>o.createElement("div",{className:y.cardWrapper},e.children))),v=e.IdProvider=u.UI.Grid.make((({slots:e,state:t})=>o.createElement(s.F.div,{"data-id":t},e.cell)))}(i||(i={}));const f={margin:`${p.ux.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:p.ux.rem(-.5),width:p.ux.rem(.5),height:p.ux.percent(100),background:"none",content:"''"}}},y=p.ux.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[f]})},27195:(e,t,r)=>{r.d(t,{Q:()=>ve});var i,n=r(27378),a=r(8543),o=r(34217),s=r(19751),l=r(88529),c=r(54290),d=r(22391),u=r(35108),p=r(50858),m=r(55818),h=r(57050),g=r(40327),f=r(77176),y=r(50693),v=r(82900),x=r(74923),b=r(18775),C=r(71905),I=r(7455),S=r(31099),w=r(71346),A=r(5114),E=r(83078),_=r(95300),k=r(78146),T=r(98036),M=function(){function e(t){(0,v._)(this,e),(0,b._)(this,"_keySelector",void 0),this._keySelector=t}return(0,x._)(e,[{key:"call",value:function(e,t){return t.subscribe(new N(e,this._keySelector))}}]),e}(),N=function(e){(0,S._)(r,e);var t=(0,w._)(r);function r(e,i){var n;return(0,v._)(this,r),n=t.call(this,e),(0,b._)((0,y._)(n),"destination",void 0),(0,b._)((0,y._)(n),"_keySelector",void 0),(0,b._)((0,y._)(n),"attemptedToUnsubscribe",void 0),(0,b._)((0,y._)(n),"count",void 0),(0,b._)((0,y._)(n),"_currentGroup",void 0),n.destination=e,n._keySelector=i,n.attemptedToUnsubscribe=!1,n.count=0,n._currentGroup=A.none,n}return(0,x._)(r,[{key:"_next",value:function(e){var t=this,r=this._keySelector(e);(0,g.pipe)(this._currentGroup,A.fold((function(){return t._createGroup(r,e)}),(function(i){var n=i.key,a=i.group;n!==r?(a.complete(),t._currentGroup=A.none,t._createGroup(r,e)):a.closed||a.next(e)})))}},{key:"_createGroup",value:function(e,t){var r=new _.X(t);this._currentGroup=A.some({key:e,group:r}),this.destination.next(new k.T(e,r,this))}},{key:"_error",value:function(e){(0,g.pipe)(this._currentGroup,E.bw((function(t){return t.group.error(e)}))),this._currentGroup=A.none,this.destination.error(e)}},{key:"_complete",value:function(){(0,g.pipe)(this._currentGroup,E.bw((function(e){return e.group.complete()}))),this._currentGroup=A.none,this.destination.complete()}},{key:"unsubscribe",value:function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&(0,C._)((0,I._)(r.prototype),"unsubscribe",this).call(this))}}]),r}(T.L),L=r(66310),D=r(28043),F=r(76974),P=r(8125),R=r(44060),O=r(42040),B=r(48643),$=r(89894),U=r(40219),W=r(26027),z=r(77610),G=r(50224),j=r(52575),H=r(87684),Y=r(76578),V=r(93462),Z=r(28748);!function(e){e.Mini=({card:e,actions:t})=>n.createElement(a.F.Fragment,null,e.pipe(f.U((e=>z.i.isToneAIItem(e)?n.createElement(Z.Y.BundleMini,{card:e,actions:t}):z.i.isEthicalAIItem(e)?n.createElement(V.T.Mini,{card:e,actions:t,useBundleContainer:!0}):n.createElement(Y.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:r,renderCard:l})=>{const{isChecking:c,isCheckingGlobal:d,transform:u}=W.X.useCardStates(e),p=e=>(o("CardBundle").error("card type not supported:",e),null),m=e.pipe((e=>e.lift(new M((e=>e.activeAlert.id)))),L.w((e=>e.pipe(D.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),f.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,g.pipe)(e,D.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),s.shareReplay({bufferSize:1,refCount:!0}))}))))))),y=(e,t)=>{const i=t.alerts.length,o=1===i?ye.bundleInnerContainer:2===i?ye.bundleInnerContainer2Cards:ye.bundleInnerContainerNCards;return n.createElement(a.F.div,{className:o},l?l({card:t,actions:r,isChecking:c,isCheckingGlobal:d,transform:e}):n.createElement(H.J,{card:t,actions:r,isChecking:c,transform:e,isCheckingGlobal:d}))};return n.createElement(a.F.Fragment,null,e.pipe(f.U((o=>z.i.isIndependentBundleItem(o)?y(u,o):n.createElement(i,{card:e,actions:r},n.createElement(t,{state:m,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,B.EJ)(""),next:(0,B.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,B.EJ)(ye.inBundleToUpdatedCardOld),next:(0,B.EJ)(ye.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,B.EJ)(ye.inBundleToUpdatedCardOld),next:(0,B.EJ)(ye.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,B.EJ)(ye.inBundleToNextCardOld),next:(0,B.EJ)(ye.inBundleToNextCardNew)}:{prev:(0,B.EJ)(ye.inBundleToPrevCardOld),next:(0,B.EJ)(ye.inBundleToPrevCardNew)}}},(e=>n.createElement(a.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:h.Q1},(0,g.pipe)(e.state.card,f.U((0,h.ls)(z.i.match({super:p,ethicalAI:p,takeaway:t=>y("prev"===e.type?F.of(t.transform):u,t),synfony:t=>y("prev"===e.type?F.of(t.transform):u,t),shortenIt:t=>y("prev"===e.type?F.of(t.transform):u,t),toneAI:t=>y("prev"===e.type?F.of(t.transform):u,t),suggestedSnippet:t=>y("prev"===e.type?F.of(t.transform):u,t),knowledgeHubSuggestedTerm:t=>y("prev"===e.type?F.of(t.transform):u,t),default:t=>y("prev"===e.type?F.of(t.transform):u,t)}),W.X.foldCard)))))))))))};class t extends B.l5{}const r=({alertCount:e})=>1===e?n.createElement(n.Fragment,null):2===e?n.createElement("div",{className:ye.bundleFakeCard1}):n.createElement(n.Fragment,null,n.createElement("div",{className:ye.bundleFakeCard1}),n.createElement("div",{className:ye.bundleFakeCard2})),i=({children:e,card:t,actions:i})=>n.createElement(a.F.div,{className:ye.bundleCardWrapper},n.createElement(j.PS,{card:t,actions:i}),n.createElement(a.F.div,{className:ye.cardBundleContainer},e,(0,g.pipe)((e=>(0,g.pipe)(e,f.U((e=>A.some(e.alerts.length)))))(t),f.U(A.map((e=>n.createElement(r,{key:e,alertCount:e})))),f.U(A.toNullable)))),o=(0,P.HP)(O.C8.Logging.getLogger)}(i||(i={}));const J=.25,Q="0 1px 8px rgba(109, 117, 141, .18)",q=$.ux.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),X=$.ux.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),K=$.ux.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),ee=$.ux.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),te=$.ux.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),re={position:"relative",borderRadius:$.ux.rem(U.Jr),background:R.Il.CoreNeutral0,boxShadow:Q,zIndex:2},ie={marginTop:$.ux.rem(.75)},ne={marginTop:$.ux.rem(1.25)},ae={position:"absolute",top:$.ux.px(-5),right:$.ux.rem(.5),left:$.ux.rem(.5),zIndex:-1,display:"block",height:$.ux.percent(100),borderRadius:$.ux.rem(U.Jr),backgroundColor:R.Il.CoreNeutral1,boxShadow:Q,content:"' '"},oe={position:"absolute",top:$.ux.px(-10),right:$.ux.rem(1),left:$.ux.rem(1),zIndex:-2,display:"block",height:$.ux.rem(2),borderRadius:$.ux.rem(U.Jr),backgroundColor:R.Il.CoreNeutral10,boxShadow:Q,content:"' '"},se={borderRadius:$.ux.rem(.75),background:R.Il.CoreNeutral20,margin:`${$.ux.rem(-.25)} ${$.ux.rem(-.25)}`,padding:`${$.ux.rem(.25)} ${$.ux.rem(.25)}`,$nest:{[`& .${G.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${G.g.fullCardSelector}`]:{padding:`${$.ux.rem(.75)} ${$.ux.rem(.5)} ${$.ux.rem(.5)} ${$.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${$.ux.rem(-.5)})`}}},le={position:"absolute",top:$.ux.rem(.8),right:$.ux.rem(1),margin:0},ce={borderRadius:$.ux.rem(U.Jr),background:R.Il.CoreNeutral0,boxShadow:Q},de={display:"block",position:"absolute",top:0,$nest:{[`& .${G.g.bundleInnerContainerSelector}`]:{margin:0}}},ue={animation:`${te} ${$.ux.seconds(J)} ease-out`},pe={animation:`${K} ${$.ux.seconds(J)} ease-out`},me={animation:`${X} ${$.ux.seconds(J)} ease-in`},he={animation:`${ee} ${$.ux.seconds(J)} ease-in`},ge={display:"none",animation:`${q} ${$.ux.seconds(J)} ease-in`},fe={animation:`${q} ${$.ux.seconds(J)} ease-in`},ye=(0,m._)((0,p._)({},$.ux.stylesheet({bundleInnerContainer:[re],bundleCardWrapper:[se],minimalBetaLabel:[le],compactCardContainer:[ce],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[de],inBundleToPrevCardOld:[de,ue],inBundleToPrevCardNew:[pe],inBundleToNextCardOld:[de,me],inBundleToNextCardNew:[he],inBundleToUpdatedCardOld:[ge],inBundleToUpdatedCardNew:[fe]})),{bundleInnerContainer:$.ux.joinClasses([G.g.bundleInnerContainerSelector,$.ux.style(re)]),bundleInnerContainer2Cards:$.ux.joinClasses([G.g.bundleInnerContainerSelector,$.ux.style(re,ie)]),bundleInnerContainerNCards:$.ux.joinClasses([G.g.bundleInnerContainerSelector,$.ux.style(re,ne)]),bundleFakeCard1:$.ux.joinClasses([G.g.bundleFakeCard1Selector,$.ux.style(ae)]),bundleFakeCard2:$.ux.joinClasses([G.g.bundleFakeCard2Selector,$.ux.style(oe)])});var ve;!function(e){e.Card=e=>o.UI.Node.make((({view:t})=>{const r=t("view");return n.createElement(a.F.Fragment,null,r.pipe(s.distinctUntilChanged(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),s.map((a=>n.createElement(d.p.Provider,{card:r,cardVisibleViewportHeight:t("visibleViewportHeight")},(o=>n.createElement(c.b.Card,{mount:o,miniCard:n.createElement(i.Mini,{card:r,actions:e}),fullCard:n.createElement(i.Full,{card:r,actions:e}),successCard:n.createElement(l.A.Success,{cardData:a,isLastCard:t("isLastCard"),actions:e}),feedbackForm:n.createElement(l.A.FeedbackForm,{cardData:a,actions:e}),mutedCard:n.createElement(l.A.MutedAlert,{cardData:a,actions:e}),actions:e,card:a,transitionClassMapper:u.a})))))))}))}(ve||(ve={}))},22373:(e,t,r)=>{r.d(t,{p:()=>i});var i,n=r(27378),a=r(57050),o=r(8543),s=r(34217),l=r(19751),c=r(88529),d=r(54290),u=r(22391),p=r(19025);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const r=t("view");return n.createElement(o.F.Fragment,null,r.pipe(l.distinctUntilChanged(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),l.map((i=>n.createElement(u.p.Provider,{card:r,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>n.createElement(d.b.Card,{mount:a,miniCard:n.createElement(c.A.Mini,{card:r,actions:e}),fullCard:n.createElement(c.A.Full,{card:r,actions:e}),successCard:n.createElement(c.A.Success,{cardData:i,isLastCard:t("isLastCard"),actions:e}),feedbackForm:n.createElement(c.A.FeedbackForm,{cardData:i,actions:e}),actions:e,card:i,mutedCard:n.createElement(c.A.MutedAlert,{cardData:i,actions:e})})))))))})),e.DenaliCardWrapper=s.UI.Grid.make((({slots:e,view:t})=>n.createElement(o.F.div,{className:(0,a.zG)(t("layoutDensity"),l.map((e=>(0,p.f8)(e).container)))},e.children)))}(i||(i={}))},40743:(e,t,r)=>{r.d(t,{C:()=>f});var i=r(27378),n=r(40327),a=r(8543),o=r(5114),s=r(34217),l=r(44060),c=r(64757),d=r(3929),u=r(3656),p=r(66896),m=r(89894),h=r(40219),g=r(19751);const f=s.UI.Node.make((({state:e,notify:t})=>i.createElement(a.F.Fragment,null,e.pipe(g.map((({previews:e,disabled:r,activeLensId:s})=>i.createElement(a.F.div,{className:_.lensNavigation},e.map((e=>i.createElement(c.zx.Flat,{name:e.id,key:e.id,className:_.lensButton,active:(0,n.pipe)(s,o.exists((t=>t===e.id))),disabled:r,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},i.createElement(d.B,{value:e.progress,wrapperClass:_.progressBarWrapper,progressClass:y(e.id)}),i.createElement(u.XY,{className:_.lensButtonText},e.title)))))))))));function y(e){switch(e){case p.R.SpecialId.Correctness:return _.correctnessProgressBar;case p.R.SpecialId.Clarity:return _.clarityProgressBar;case p.R.SpecialId.Engagement:return _.engagementProgressBar;case p.R.SpecialId.Delivery:return _.deliveryProgressBar;case p.R.SpecialId.Vox:return _.voxProgressBar;default:return}}const v={display:"flex",height:m.ux.percent(100),justifyContent:"space-between",alignItems:"center"},x={display:"flex",flexDirection:"column",marginRight:m.ux.rem(.3125),padding:`${m.ux.rem(.375)} ${m.ux.rem(.25)} 0`,borderRadius:m.ux.rem(h.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},b={textTransform:"uppercase",fontSize:m.ux.px(8)},C={width:m.ux.rem(2),backgroundColor:l.Il.CoreNeutral20},I={backgroundColor:l.Il.CoreRed50},S={backgroundColor:l.Il.CoreBlue50},w={backgroundColor:l.Il.CoreGreen50},A={backgroundColor:l.Il.CorePurple50},E={backgroundColor:l.Il.CoreNeutral50},_=m.ux.stylesheet({lensNavigation:[v],lensButton:[x],lensButtonText:[b],progressBarWrapper:[C],correctnessProgressBar:[I],clarityProgressBar:[S],engagementProgressBar:[w],deliveryProgressBar:[A],voxProgressBar:[E]})},34442:(e,t,r)=>{r.d(t,{H:()=>g});var i=r(50858),n=r(55818),a=r(27378),o=r(8543),s=r(54001),l=r(19962),c=r(34217),d=r(89894),u=r(40219),p=r(19751),m=r(85089),h=r(90845);var g;!function(e){let t,r;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(r=e.ActionKind||(e.ActionKind={}));e.Cell=c.UI.Grid.make((({slots:e,state:c,notify:d})=>{const u=new p.ReplaySubject,g=c.pipe(p.withLatestFrom(u),p.switchMap((([e,t])=>e.position.animationInProgress?p.mergeStatic(p.fromEvent(t,"transitionend").pipe(p.filter((e=>e.target===t&&"transform"===e.propertyName)),p.mapTo(void 0)),p.of(void 0).pipe(p.delay(200))).pipe(p.first()):p.EMPTY)),p.tap(d({kind:r.completePositionAnimation}))),f=c.pipe(p.withLatestFrom(u),p.switchMap((([e,t])=>e.height.watched?m.YC(t).pipe(p.filter((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):p.EMPTY)),p.distinctUntilChanged(),p.tap((({height:e})=>d({kind:r.changePosition,height:e})())));h.P.useSubscriptionTo(p.mergeStatic(g,f));const y=c.pipe(p.map((e=>e.position.top)),p.map((e=>l.ux.translateY(e))),p.distinctUntilChanged()),x=c.pipe(p.map((e=>e.layer===t.front?1:0)),p.distinctUntilChanged()),b=c.pipe(p.map((({position:e})=>e)),p.distinctUntilChanged(((e,t)=>e.top===t.top&&e.animationInProgress===t.animationInProgress)),p.map((({animationInProgress:e})=>e?v.animate:void 0)),p.startWith(void 0));return a.createElement(o.F.div,(0,n._)((0,i._)({},(0,s.Sh)(v.item,b)),{style:{transform:y,zIndex:x},mount:e=>{null!==e&&u.next(e)}}),e.item)}))}(g||(g={}));const f={position:"absolute",boxSizing:"border-box",width:d.ux.percent(100),contain:"layout"},y={transition:`transform ${d.ux.seconds(u.v4/1e3)} linear`},v=d.ux.stylesheet({item:[f],animate:[y]})},56305:(e,t,r)=>{r.d(t,{k:()=>x});var i,n=r(50858),a=r(55818),o=r(57050),s=r(40327),l=r(23239),c=r(73353),d=r(5114),u=r(83078),p=r(22232),m=r(34217),h=r(42040),g=r(49558);!function(e){e.unwrap=function(e){return g.Ue(d.getOrElse((()=>e)),d.some)}}(i||(i={}));var f,y=r(98403);!function(e){e.create=function(e,t,r,n){const a=i.unwrap(t.style),o=i.unwrap(t.audience),s=i.unwrap(c.R$.OutcomeContext.defaultAcademic),u=i.unwrap(t.domain),p=l.h.create(e),m=p.lens("style").lens(a),h=p.lens("domain").lens(u),g=p.lens("outcomeContext").lens(s).lens("type"),f=p.lens("outcomeContext").lens(s).lens("citation"),v=r.isStudentsOFE?h.view((e=>"academic"!==e)):l.h.create(!0),x=y.U_(v),b={audience:{items:c.R$.audiences,current:p.lens("audience").lens(o),default:d.some(t.audience),isVisible:v},formality:{items:c.R$.formalityLevels,current:m,default:d.some(t.style),isVisible:v,shouldDisable:e=>h.view((t=>!c.R$.isStyleValidWithDomain(t,e)))},domain:{items:c.R$.domains,current:h,default:d.some(t.domain),isVisible:l.h.create(!0),shouldDisable:e=>m.view((t=>r.isFree?"general"!==e:!c.R$.isStyleValidWithDomain(e,t)))},intent:{items:c.R$.goals.filter((e=>"sell"!==e)),isVisible:v,current:p.lens("goals")},type:{items:c.R$.academicTypes,default:d.some("essay"),isVisible:x,current:g},format:{items:c.R$.citation,default:d.some("apa"),isVisible:x,current:f}};return{localContext:p,blocks:b,showSetGoalsLoader:l.h.create(!r.demoMode&&n)}}}(f||(f={}));var v=r(13863);function x(e,t,r,i,g,y,x,b){const C=(0,s.pipe)(e.defaultContext.get(),d.fold((()=>(h.C8.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",g),g)),o.yR)),I=f.create(e.context.get(),C,y,b),S=l.h.combine(I.showSetGoalsLoader,I.localContext,((e,t)=>({blocks:I.blocks,context:t,showOnLoad:e,features:y,source:i})));return m.Z.fromSideEffect((i=>{switch(i.kind){case v.R.ActionsKind.open:t.goalsPopupShow(i.source);break;case v.R.ActionsKind.upgrade:t.getPremiumButtonClick(),x();break;case v.R.ActionsKind.close:r.onClose();const o=(()=>u.FX("academic")(i.context.domain)&&y.isStudentsOFE)()&&d.isNone(i.context.outcomeContext)?(0,a._)((0,n._)({},i.context),{outcomeContext:d.some(c.R$.OutcomeContext.defaultAcademic)}):i.context;e.updateContext(o)&&t.goalsFormSuccess(o,C);break;case v.R.ActionsKind.reset:I.localContext.set(c.R$.unset);break;case v.R.ActionsKind.showOnLoadChanged:I.showSetGoalsLoader.set(i.value);break;default:(0,p.vE)(i)}}),S)}},13863:(e,t,r)=>{r.d(t,{R:()=>me});var i=r(27378),n=r(34217),a=r(13351),o=r(50858),s=r(55818),l=r(40327),c=r(8543),d=r(23239),u=r(54001),p=r(5114),m=r(8125),h=r(33678),g=r(50474),f=r(64757),y=r(14330),v=r(1509),x=r(44060),b=r(4870),C=r(89894),I=r(24588),S=r(40219);const w=({upgradeAction:e,size:t,title:r,className:n,isEligibleForFreeTrial:a})=>{const l=i.useContext(g.m.Context),c=Boolean(a)?l.tryForFree:l.goPremium,d=Boolean(r)?r:c;return i.createElement(f.zx,(0,s._)((0,o._)({name:"upgrade"},(0,u.Sh)(n,"big"===t?O.baseBig:"link"===t?O.link:O.baseSmall)),{onClick:e}),"link"===t?i.createElement(b.JO.PaidLink,{width:14,className:O.linkIcon}):i.createElement(b.JO.Paid,{className:"big"===t?O.bigIcon:O.icon}),d)},A={display:"inline-flex",alignItems:"center",background:x.Il.CoreGreen60,borderRadius:C.ux.rem(S.fx),boxShadow:`0 2px 5px ${C.ux.color(I.UE).fade(.35).toRGBA().toString()}`,color:x.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:C.ux.rem(S.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.ux.color(x.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:C.ux.color(x.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`,fontSize:C.ux.rem(.8125),lineHeight:C.ux.rem(3)},_={padding:`0 ${C.ux.rem(1)} 0 ${C.ux.rem(.5)}`,fontSize:C.ux.rem(.6875),lineHeight:C.ux.rem(2)},k={background:x.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.ux.color(x.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:C.ux.color(x.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},T={padding:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`,fontSize:C.ux.rem(.8125),lineHeight:C.ux.rem(3)},M={padding:`0 ${C.ux.rem(2)} 0 ${C.ux.rem(.5)}`,fontSize:C.ux.rem(.6875),lineHeight:C.ux.rem(2)},N={fill:x.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:x.Il.CoreNeutral0}}},L={marginRight:C.ux.rem(.2)},D={display:"inline-flex",alignItems:"center",color:x.Il.CoreGreen60,fontSize:C.ux.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},F={color:x.Il.CoreGreen60},P={fill:x.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:x.Il.CoreGreen60}}},R={fill:x.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:x.Il.CoreGreen60}}},O=C.ux.stylesheet({base:[A],baseBig:[A,E],baseSmall:[A,_],baseUpHookRedesign:[A,k],baseBigUpHookRedesign:[E,k,T],baseSmallUpHookRedesign:[_,k,M],icon:[N],bigIcon:[N,L],link:[D],linkUpHookRedesign:[D,F],linkIconUpHookRedesign:[P],linkIcon:[R]});var B=r(98403),$=r(90845),U=r(19751),W=r(98410),z=r(57050),G=r(19962);const j=.8125,H={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.ux.rem(41.5),backgroundColor:x.Il.CoreNeutral0,textAlign:"left"},Y={padding:`${C.ux.rem(1.125)} ${C.ux.rem(2)} ${C.ux.rem(1)}`,paddingBottom:C.ux.rem(1)},V={paddingBottom:0,backgroundColor:x.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${C.ux.rem(4)})`,height:C.ux.px(1),background:x.Il.CoreNeutral20,content:"''"}}},Z={display:"block",margin:`${C.ux.rem(j)} 0`,color:x.Il.CoreNeutral90,fontWeight:x.xv.SmallLightWeight,lineHeight:C.ux.rem(1.5)},J={minHeight:C.ux.rem(4)},Q={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:C.ux.rem(1.25),borderBottom:`1px solid ${x.Il.CoreNeutral20}`}}},q={marginBottom:C.ux.rem(-.5),maxWidth:C.ux.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${C.ux.rem(.5)}`,marginLeft:C.ux.important(0),$nest:{"&:not(:last-child)":{marginRight:C.ux.rem(.5)}}}}},X={width:C.ux.rem(7),textTransform:"capitalize",lineHeight:C.ux.rem(2)},K={marginTop:C.ux.rem(j)},ee={margin:`0 0 ${C.ux.rem(1.5)} ${C.ux.rem(7)}`},te={margin:`0 0 ${C.ux.rem(1.5)} ${C.ux.rem(7)}`},re={position:"absolute",top:C.ux.rem(2.5)},ie={display:"flex",width:C.ux.percent(100),justifyContent:"space-between"},ne={color:x.Il.CoreNeutral90,fontWeight:300,fontSize:C.ux.rem(.8125)},ae=C.ux.stylesheet({wrapper:[H],modalBody:[Y],modalHeader:[V],itemDescription:[Z],modalFooter:[J],row:[Q],toneButtons:[q],rowHeader:[X],extraContent:[K],title:[ee],description:[te],image:[re],footerWrapper:[ie],checkboxText:[ne]}),oe=({name:e,items:t,sticky:r,theme:n={},extraContent:a,children:s,isVisible:l})=>i.createElement(c.F.Fragment,null,l.view((l=>l?i.createElement("div",{className:ae.row},i.createElement("div",null,i.createElement(v.Z,{nodeType:"h3",styleType:v.Z.Type.H4,className:ae.rowHeader},e),a),i.createElement("div",null,i.createElement(f.zx.Group,{sticky:r,className:n.buttonsGroup},t.map((t=>{var{description:r}=t,a=(0,W._)(t,["description"]);const s=G.g4(a.key);return i.createElement(i.Fragment,{key:a.key},i.createElement(f.zx.White,(0,o._)({className:n.button,name:`context-${e}-${a.key}`,"aria-describedby":s},a)),i.createElement("span",{hidden:!0,id:s},e,": ",r))}))),i.createElement(v.Z.Small,{className:ae.itemDescription},s))):null))),se=({items:e,current:t,isVisible:r,shouldDisable:i,itemDescription:n,itemTitle:a=z.yR})=>({sticky:!0,isVisible:r,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:i&&i(e),children:a(e),description:n(e)})))}),le=({blocks:e,features:t,showOnLoad:r,close:n,upgrade:o,reset:s,showOnLoadChanged:l})=>{const c=i.useContext(h.a.Context),d=B.Dx(t),u=B.Dx(e),p=B.Dx(r),m=B.Dx(n);return i.createElement(a.u_,{className:ae.wrapper,focusTrapMode:"dynamic",initialFocus:$.P.FocusTrap.InitialFocus.none},i.createElement(a.u_.Header,{className:ae.modalHeader},i.createElement(de,null)),i.createElement(a.u_.Body,{name:"goalsBody",className:ae.modalBody},i.createElement(ce,{features:d,upgradeAction:o,blocks:u})),i.createElement(a.u_.Footer,{className:ae.modalFooter},i.createElement(ue,{supportsSetGoalsLoader:d.pipe(U.map((e=>!e.demoMode&&c.has(h.a.Flag.supportsSetGoalsLoader)))),onDone:m,reset:s,showOnLoad:p,showOnLoadChanged:l})))},ce=({blocks:e,features:t,upgradeAction:r})=>{const n=i.useContext(g.m.Context).goals;return i.createElement(c.F.Fragment,null,U.combineLatestStatic(e,t).pipe(U.map((([{audience:e,formality:t,domain:a,intent:d,type:u,format:m},h])=>{const g=i.createElement(oe,(0,s._)((0,o._)({name:"domain"},se((0,s._)((0,o._)({},a),{itemTitle:e=>"mail"===e?"email":e,itemDescription:e=>n.sections.domain[e]}))),{extraContent:i.createElement(c.F.div,{className:ae.extraContent},h.isFree?i.createElement(w,{size:"link",upgradeAction:r,isEligibleForFreeTrial:h.isEligibleForFreeTrial}):null)}),a.current.view((e=>h.isFree?n.sections.domain.free:Boolean(e)?n.sections.domain[e]:""))),f=i.createElement(oe,(0,o._)({name:"intent"},(({items:e,isVisible:t,current:r},i,n)=>({isVisible:t,items:e.map((e=>({key:e,active:r.view((t=>(0,l.pipe)(t,p.exists((t=>t.has(e)))))),description:n(e),onClick:()=>r.modify((t=>{const r=(0,l.pipe)(t,p.fold((()=>new Set),(e=>new Set(e))));return r.has(e)?r.delete(e):r.add(e),p.some(r)})),children:i(e)})))}))(d,(e=>n.sections.intent.options[e]),(e=>n.sections.intent.options[e]))),n.sections.intent.experimental),y=i.createElement(oe,(0,o._)({name:"audience"},se((0,s._)((0,o._)({},e),{itemDescription:t=>n.sections.audience[t]((0,l.pipe)(e.default,p.exists((e=>e===t))))}))),e.current.view((t=>Boolean(t)&&n.sections.audience[t]((0,l.pipe)(e.default,p.exists((e=>e===t))))))),v=i.createElement(oe,(0,o._)({name:"formality"},se((0,s._)((0,o._)({},t),{itemDescription:e=>n.sections.formality[e]}))),t.current.view((e=>Boolean(e)?n.sections.formality[e]:""))),x=i.createElement(oe,(0,o._)({name:"type"},se((0,s._)((0,o._)({},u),{itemDescription:e=>n.sections.type.options[e]}))),u.current.view((e=>Boolean(e)?n.sections.type.options[e]:""))),b=i.createElement(oe,(0,o._)({name:"format"},se((0,s._)((0,o._)({},m),{itemTitle:n.sections.format.formatTitle,itemDescription:e=>n.sections.format.options[e]}))),m.current.view((e=>Boolean(e)?n.sections.format.options[e]:"")));return h.isStudentsOFE?i.createElement(i.Fragment,null,g,f,y,v,x,b):i.createElement(i.Fragment,null,y,v,g,f)}))))},de=()=>{const e=i.useContext(g.m.Context).goals,t=i.useContext(a.u_.TitleIdContext);return i.createElement(i.Fragment,null,i.createElement(v.Z,{nodeType:"h2",styleType:v.Z.Type.H1,id:t,className:ae.title},e.title),i.createElement(pe,null),i.createElement(a.u_.SpokenDescription,null,i.createElement(v.Z.Base,{className:ae.description},e.header)))},ue=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:r,reset:n,onDone:a})=>{const o=i.useContext(g.m.Context),s=d.h.create(!1);return $.P.useSubscriptionTo(t.pipe(U.tap(B.wW(s)))),$.P.useSubscriptionTo(s.pipe(U.tap(r))),i.createElement(c.F.div,(0,u.Sh)(e.pipe(U.map((0,m.RN)(ae.footerWrapper,null)))),e.pipe(U.map((0,m.RN)(i.createElement(y.Ys,{checked:s,name:"set-goals"},i.createElement(v.Z.Small,{className:ae.checkboxText},o.goals.footer.showModalOnStart)),null))),i.createElement(f.zx.Group,null,i.createElement(f.zx.Ghost,{name:"reset",onClick:n},o.goals.footer.reset),a.pipe(U.map((e=>i.createElement(f.zx.Primary,{name:"closeSetContext",onClick:e},o.done))))))},pe=()=>i.createElement("svg",{"aria-hidden":!0,className:ae.image,width:"69",height:"80",viewBox:"0 0 69 80"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),i.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),i.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),i.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),i.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),i.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var me;!function(e){e.Modal=n.UI.Node.make((({state:e,view:r,notify:n})=>{$.P.useSubscriptionTo(r("source").pipe(U.first(),U.tap((e=>n({kind:t.open,source:e})()))));const o=e.pipe(U.map((e=>n({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad}))));return i.createElement(a.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},i.createElement(le,{blocks:r("blocks"),features:r("features"),close:o,upgrade:n({kind:t.upgrade}),reset:n({kind:t.reset}),showOnLoad:r("showOnLoad"),showOnLoadChanged:e=>n({kind:t.showOnLoadChanged,value:e})()}))}));let t;!function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(me||(me={}))},87195:(e,t,r)=>{r.d(t,{q:()=>Te});var i,n,a,o=r(27378),s=r(8543),l=r(22232),c=r(34217),d=r(50474),u=r(64757),p=r(13351),m=function(){return o.createElement("svg",{"aria-hidden":!0,width:"128",height:"177"},o.createElement("defs",null,o.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),o.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),o.createElement("mask",{id:"b",fill:"#fff"},o.createElement("use",{xlinkHref:"#a"})),o.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),o.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),o.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),o.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),o.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},h=r(8965),g=r(1509),f=r(90845),y=r(19751),v=r(12768),x=r(54001),b=r(76024);n=i||(i={}),a=function(e,t){var r=t/60,i=b.nH(e/r);return i.s=i.h>0&&i.m>10?0:Math.floor(i.s),i},n.calculateReadingTime=function(e){return a(e,250)},n.calculateSpeakingTime=function(e){return a(e,130)},n.generateStats=function(e,t){var r={words:e,chars:t,sentences:Math.floor(e/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=i.calculateReadingTime(r.words),r.speakingTime=i.calculateSpeakingTime(r.words),r};var C=r(5114),I=r(18208),S=r(44060),w=r(4870),A=r(40327),E=r(23239);const _=e=>{const{score:t,documentIsEmpty:r,sidebarOpen:i=E.h.create(!0),successIcon:n,progressIcon:a,zeroIcon:l=null}=e,c=t.pipe(y.map(C.map((e=>e.rank)))),d=y.combineLatestStatic(t,r,((e,t)=>(0,A.pipe)(e,C.fold((()=>!1),(({rank:e})=>100===e&&!t))))),u=i.pipe(y.switchMap((e=>e?c.pipe(y.startWith(C.none),y.pairwise(),y.switchMap((([e,t])=>(0,A.pipe)(t,C.fold((()=>y.of(l)),(t=>d.pipe(y.startWith(!1),y.pairwise(),y.switchMap((([r,i])=>i?y.of(n):(0,A.pipe)(e,C.filter((()=>!r)),C.fold((()=>y.of(a(t)).pipe(y.delay(1),y.startWith(a(0)))),(()=>y.of(a(t)))))))))))))):y.of(null))),y.startWith(null));return o.createElement(s.F.Fragment,null,u)};var k=r(50858),T=r(55818),M=r(3656),N=r(89894),L=r(24588),D=r(40219),F=r(98403);function P({value:e,className:t,leftCustomClass:r,rightCustomClass:i}){const n=E.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>n.set(!0)))));const a=y.combineLatestStatic(F.Dx(e),n,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,r)=>F.Dx(e).pipe(y.map((e=>e<50?t:r)));return o.createElement(s.F.div,(0,x.Sh)((e=>F.Dx(e).pipe(y.map((e=>e<50?U.leftSideWrapper:U.rightSideWrapper))))(e),t),o.createElement(s.F.div,(0,T._)((0,k._)({},(0,x.Sh)(l(e,U.leftSideProgress,U.rightSideProgress),Boolean(r)&&Boolean(i)&&l(e,r,i))),{style:{width:a}})))}!function(e){e.Label=({value:e,className:t})=>{const r=o.useContext(d.m.Context).performance,i=e>66?r.aboveAverage:e>50?r.average:r.belowAverage;return o.createElement(M.x4,{className:t},i)}}(P||(P={}));const R={position:"relative",zIndex:1,display:"flex",width:N.ux.percent(100),height:N.ux.rem(.25),borderRadius:N.ux.rem(D.fx)},O={height:N.ux.percent(100),backgroundColor:L.FW,transition:"width .8s ease-in-out 0s"},B={marginRight:N.ux.percent(50),borderTopLeftRadius:N.ux.rem(.25),borderBottomLeftRadius:N.ux.rem(.25)},$={marginLeft:N.ux.percent(50),borderTopRightRadius:N.ux.rem(.25),borderBottomRightRadius:N.ux.rem(.25)},U=N.ux.stylesheet({wrapper:[R],leftSideWrapper:[R,{justifyContent:"flex-end"}],rightSideWrapper:[R,{justifyContent:"flex-start"}],progress:[O],leftSideProgress:[O,B],rightSideProgress:[O,$]});var W=r(76457);const z={display:"flex",flexDirection:"column",maxHeight:"90vh",width:N.ux.rem(32),height:N.ux.rem(41),background:S.Il.CoreNeutral0},G={padding:`${N.ux.rem(2.75)} ${N.ux.rem(1)} 0 ${N.ux.rem(2)}`,minHeight:N.ux.rem(5.1),height:N.ux.rem(5.1),backgroundColor:S.Il.CoreNeutral0},j={marginRight:N.ux.rem(1),paddingBottom:N.ux.rem(.3),borderBottom:`1px solid ${L.xO}`},H={padding:`0 ${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(2)}`},Y={padding:`0 ${N.ux.rem(1.9)}`,minHeight:N.ux.rem(4),height:N.ux.rem(4)},V={position:"absolute",top:N.ux.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},Z={display:"flex",flexDirection:"column",marginTop:N.ux.rem(7.15),marginBottom:N.ux.rem(2),paddingRight:N.ux.rem(1),alignItems:"center"},J={wordSpacing:N.ux.rem(.05),fontSize:N.ux.rem(.875),lineHeight:N.ux.rem(1.5)},Q={padding:`${N.ux.rem(1.3)} ${N.ux.rem(2.6)}`,textAlign:"center"},q=N.ux.prefixedStylesheet("statistics",{wrapper:[z],modalHeader:[G],modalHeaderUnderline:[j],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[H],modalFooter:[Y],loader:[V],zeroStateContainer:[Z],performanceText:[J],zeroStateText:[J,Q]});var X;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(X||(X={}));const K=e=>{switch(e){case X.number:case X.percentage:return _e.numberRowData;case X.time:return _e.timeRowData;default:return(0,l.vE)(e)}},ee=({type:e,value:t,info:r,children:i,dataName:n})=>o.createElement("div",{className:_e.row,"data-name":n},o.createElement("div",{className:K(e)},o.createElement("div",{className:_e.metricTitle},i),o.createElement("div",{className:_e.metric},((e,t)=>{switch(e){case X.number:return(Math.round(10*t)/10).toLocaleString();case X.time:return b.g2(t);case X.percentage:return Math.round(t)+"%";default:return(0,l.vE)(e)}})(e,t))),Boolean(r)?o.createElement(u.RZ,{title:r}):null),te=({state:e})=>{const t=o.useContext(d.m.Context).performance,{stats:r,score:n,documentIsEmpty:a}=e;return o.createElement(o.Fragment,null,o.createElement("section",{className:_e.titleSection},o.createElement("div",{className:_e.titleColumns},o.createElement(p.u_.SpokenDescription,(0,x.Sh)(q.performanceText,_e.headerDescription),100===n.rank?t.score100:t.scoreUnder100(n.rank)),o.createElement(_,{score:y.of(C.some(n)),documentIsEmpty:y.of(a),successIcon:o.createElement(w.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:_e.checkmark}),progressIcon:e=>o.createElement(W.P,{key:"modal-performance-progress",colorType:W.P.ColorType.royalBlue,fontSize:W.P.FontSize.small,percentage:e,theme:ke})}))),o.createElement("section",{className:_e.wordCountSection},o.createElement(g.Z.H3,{className:_e.sectionHeaderUnderline},t.wordCount),o.createElement("div",{className:_e.wordCountColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.number,value:Math.max(r.chars-1,0)},t.characters),o.createElement(ee,{type:X.number,value:r.words},t.words),o.createElement(ee,{type:X.number,value:r.sentences},I._6(r.sentences,t.sentence,t.sentences))),o.createElement("div",{className:_e.secondColumn},o.createElement(ee,{type:X.time,value:i.calculateReadingTime(r.words)},t.readingTime),o.createElement(ee,{type:X.time,value:i.calculateSpeakingTime(r.words)},t.speakingTime)))),o.createElement("section",{className:_e.readabilitySection},o.createElement("div",{className:_e.sectionHeaderWrapper},o.createElement(g.Z.H3,null,t.readability),o.createElement(g.Z.SmallLight,null,t.sectionTitleDescription)),o.createElement("div",{className:_e.readabilityColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.number,value:r.wordLength},t.wordLengthTitle)),o.createElement("div",{className:_e.secondColumn},o.createElement("div",{className:_e.row},o.createElement(P,{value:r.wordLengthIndex,className:_e.progressBar,leftCustomClass:_e.leftProgress,rightCustomClass:_e.rightProgress}),o.createElement(P.Label,{value:r.wordLengthIndex,className:_e.progressLabel})),o.createElement("div",{className:_e.verticalPillar}))),o.createElement("div",{className:_e.readabilityColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.number,value:r.sentenceLength},t.sentenceLengthTitle)),o.createElement("div",{className:_e.secondColumn},o.createElement("div",{className:_e.row},o.createElement(P,{value:r.sentenceLengthIndex,className:_e.progressBar,leftCustomClass:_e.leftProgress,rightCustomClass:_e.rightProgress}),o.createElement(P.Label,{value:r.sentenceLengthIndex,className:_e.progressLabel})),o.createElement("div",{className:_e.verticalPillarShort}))),o.createElement("div",{className:_e.readabilityColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.number,value:r.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore))),o.createElement(g.Z.SmallLight,{className:_e.readabilityDescr},r.readabilityDescription)),o.createElement("section",null,o.createElement("div",{className:_e.sectionHeaderWrapper},o.createElement(g.Z.H3,null,t.vocabulary),o.createElement(g.Z.SmallLight,null,t.sectionTitleDescription)),o.createElement("div",{className:_e.vocabularyColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.percentage,value:r.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle)),o.createElement("div",{className:_e.secondColumn},o.createElement("div",{className:_e.row},o.createElement(P,{value:r.uniqueWords,className:_e.progressBar,leftCustomClass:_e.leftProgress,rightCustomClass:_e.rightProgress}),o.createElement(P.Label,{value:r.uniqueWords,className:_e.progressLabel})),o.createElement("div",{className:_e.verticalPillar}))),o.createElement("div",{className:_e.vocabularyColumns},o.createElement("div",{className:_e.firstColumn},o.createElement(ee,{type:X.percentage,value:r.rareWords,info:t.rareWords},t.rareWordsTitle)),o.createElement("div",{className:_e.secondColumn},o.createElement("div",{className:_e.row},o.createElement(P,{value:r.rareWords,className:_e.progressBar,leftCustomClass:_e.leftProgress,rightCustomClass:_e.rightProgress}),o.createElement(P.Label,{value:r.rareWords,className:_e.progressLabel})),o.createElement("div",{className:_e.verticalPillarShort})))))},re={marginBottom:N.ux.rem(2.4)},ie={display:"flex",marginTop:N.ux.rem(.9),marginRight:N.ux.rem(1),justifyContent:"space-between"},ne={marginBottom:N.ux.rem(1.5)},ae={display:"flex",marginTop:N.ux.rem(.8)},oe={marginBottom:N.ux.rem(2.4)},se={display:"flex",$nest:{"&:first":{marginTop:N.ux.rem(.8)}}},le={display:"flex",$nest:{"&:first":{marginTop:N.ux.rem(.8)}}},ce={flexBasis:N.ux.percent(50)},de={position:"relative",paddingLeft:N.ux.rem(.5),flexBasis:N.ux.percent(50)},ue={display:"flex",height:N.ux.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},me={width:N.ux.rem(10),fontFeatureSettings:`${D.Q9}, ${D.g_}`},he={width:N.ux.rem(13)},ge={marginRight:N.ux.rem(1),paddingBottom:N.ux.rem(.5),borderBottom:`1px solid ${L.xO}`},fe={width:N.ux.percent(80),whiteSpace:"pre-line"},ye={display:"inline-block",color:S.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:N.ux.rem(.875),lineHeight:N.ux.rem(2)},ve={display:"inline-block",color:S.Il.CoreNeutral90,fontSize:N.ux.rem(.875),lineHeight:N.ux.rem(2)},xe={width:N.ux.rem(3.2),height:N.ux.rem(3.2),fontWeight:"bold"},be={width:N.ux.rem(6),backgroundColor:L.xO},Ce={marginLeft:N.ux.rem(1.125)},Ie={backgroundImage:L.BZ},Se={backgroundImage:L.Xd},we={display:"block",paddingTop:N.ux.rem(.5)},Ae={position:"absolute",top:N.ux.rem(.5),left:N.ux.rem(3.5),width:N.ux.rem(.0625),height:N.ux.rem(3),backgroundColor:L.jj},Ee={height:N.ux.rem(1)},_e=N.ux.stylesheet({titleSection:[re],titleColumns:[ie],wordCountSection:[ne],wordCountColumns:[ae],readabilitySection:[oe],readabilityColumns:[se],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[de],row:[ue],rowData:[pe],numberRowData:[pe,me],timeRowData:[pe,he],sectionHeaderUnderline:[ge],sectionHeaderWrapper:[ge,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[fe],metric:[ye],metricTitle:[ve],checkmark:[{alignItems:"center"}],circleProgressBar:[xe],progressBar:[be],progressLabel:[Ce],leftProgress:[Ie],rightProgress:[Se],readabilityDescr:[we],verticalPillar:[Ae],verticalPillarShort:[Ae,Ee]}),ke={radialProgressBar:_e.circleProgressBar};var Te;!function(e){e.ModalView=c.UI.Grid.make((({slots:e,state:i,notify:n})=>{const a=n({kind:t.close});return o.createElement(p.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:a},o.createElement(r,{state:i,downloadButton:e.downloadButton,onClose:a}))}));let t;!function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={}));var r=e.ModalContent=({state:e,downloadButton:t,onClose:r})=>o.createElement(p.u_,{className:q.wrapper,focusTrapMode:"dynamic",initialFocus:f.P.FocusTrap.InitialFocus.none},o.createElement(p.u_.Header,{className:q.modalHeader},o.createElement(n,{state:e})),o.createElement(p.u_.Body,{name:"performanceBody",className:q.modalBody,wrapperClassName:e.pipe(y.map((e=>e.type===v.g.State.Type.EMPTY?q.modalEmpty:q.modalReady)))},o.createElement(x,{state:e})),o.createElement(p.u_.Footer,{className:q.modalFooter},o.createElement(b,{downloadButton:t,onClose:r})));const i=()=>{const e=o.useContext(d.m.Context);return o.createElement("div",{className:q.zeroStateContainer},o.createElement(m,null),o.createElement(p.u_.SpokenDescription,{className:q.zeroStateText},e.performance.notEnoughTextToCalculateStats))};var n=e.Header=({state:e})=>{const t=o.useContext(d.m.Context),r=o.useContext(p.u_.TitleIdContext);return o.createElement(s.F.Fragment,null,e.pipe(y.map((e=>o.createElement(g.Z.H2,{key:"statisticsHeader",id:r,className:e.type===v.g.State.Type.READY?q.modalHeaderUnderline:""},t.performance.title)))))};const a=()=>o.createElement(h.$,{size:64,className:q.loader,variation:"blue"});var x=e.Body=({state:e})=>o.createElement(s.F.Fragment,null,e.pipe(y.map((e=>{switch(e.type){case v.g.State.Type.EMPTY:return null;case v.g.State.Type.LOADING:case v.g.State.Type.ERROR:return o.createElement(a,{key:"statisticsLoading"});case v.g.State.Type.SHORT_CONTENT:return o.createElement(i,{key:"statisticsEmpty"});case v.g.State.Type.READY:return o.createElement(te,{key:"statisticsContent",state:e});default:return(0,l.vE)(e)}}))));const b=({downloadButton:e,onClose:t})=>o.createElement(o.Fragment,null,e,o.createElement(u.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(Te||(Te={}))},89379:(e,t,r)=>{r.d(t,{JT:()=>g,hM:()=>f,wK:()=>h});var i=r(40327),n=r(5114),a=r(8125),o=r(22232),s=r(93756),l=r(34217),c=r(19751),d=r(27125);function u(e){return{title:e.title,firstLine:n.fromNullable(e.firstLine)}}const p=(e,t)=>{const r=t.successLens;switch(e){case d.g.SuccessType.zero:return r.emptyText;case d.g.SuccessType.small:return r.smallText;case d.g.SuccessType.large:return r.largeText;case d.g.SuccessType.applied:return{title:r.fixedText.titles[(0,a.TN)(9)]};case d.g.SuccessType.premiumOnboardingStart:return r.premiumOnboardingStartText;case d.g.SuccessType.premiumOnboardingComplete:return r.premiumOnboardingCompleteText;default:return(0,o.vE)(e)}};function m(e){switch(e){case d.g.SuccessType.applied:case d.g.SuccessType.large:return"growComplete";case d.g.SuccessType.premiumOnboardingStart:return"premiumOnboardingStart";case d.g.SuccessType.premiumOnboardingComplete:return"premiumOnboardingComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(c.map((e=>{const r=p(e,t);return{kind:m(e),caption:n.some(u(r))}})))}function g(e,t){return()=>e.pipe(c.map((e=>{const r=p(e,t);return{kind:m(e),caption:n.some(u(r))}})))}function f(e){return l.Z.animatingFlow(e,(e=>(0,i.pipe)(e,n.fold((()=>n.some(s.F2("fadein"))),(()=>n.some(s.Hk("fadeout","fadein")))))))}},43805:(e,t,r)=>{r.d(t,{q:()=>R});var i=r(27378),n=r(40327),a=r(8543),o=r(83078),s=r(34217),l=r(44060),c=r(3656),d=r(89894),u=r(19751),p=r(59179);const m=s.UI.Node.make((()=>i.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0)"},i.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),i.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),i.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),i.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),i.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),i.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0"},i.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=s.UI.Node.make((()=>i.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),i.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),i.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),g=s.UI.Node.make((()=>i.createElement("video",{className:y.premiumOnboardingStartVideo,autoPlay:!0,loop:!0,muted:!0,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI2NCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTIuODA5IDgxLjcwNDVDMTEyLjgwOSA4OS4xMDY3IDEyOS40NDEgOTcuOTcxMiAxMjkuNDQxIDk3Ljk3MTJMMTI0LjE0MSAxMDkuMzk0IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTEzLjA4MyA4Mi44OTI1QzExMy45OTcgODIuNjE4MyAxMTQuNDU0IDgyLjA3IDExNC42MzYgODEuNjEzMUMxMTQuOTExIDgxLjA2NDggMTE0LjgxOSA4MC40MjUxIDExNC40NTQgNzkuOTY4MUwxMTAuOTgxIDc1Ljk0NzFMMTEwLjM0MSA4MS4yNDc1QzExMC4yNSA4MS43OTU4IDExMC41MjQgODIuNDM1NSAxMTEuMDcyIDgyLjcwOTdDMTExLjUyOSA4Mi45ODM5IDExMi4xNjkgODMuMTY2NiAxMTMuMDgzIDgyLjg5MjVaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMTguNjU4IDcyLjIwMDRDMTE3LjEwNCA3NS43NjQ1IDExNC44MTkgNzguNTk3NCAxMTIuMDc4IDc5LjQxOTlDMTA1LjU4OSA4MS40MzA0IDk0Ljg5NzMgNzIuNjU3MyA5Mi42MTI2IDY0Ljk4MDlDOTAuNDE5NCA1Ny42NzAxIDk0LjI1NzYgNTAuMDg1IDEwMS4yMDMgNDcuMzQzNUMxMDEuNTY4IDQ3LjE2MDcgMTAxLjkzNCA0Ny4wNjkzIDEwMi4zIDQ2Ljk3NzlDMTA5Ljg4NSA0NC42OTMzIDExOC4wMTggNDguOTg4NCAxMjAuMzAzIDU2LjU3MzRDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMjY1NiAxMTguNjU4IDcyLjIwMDRaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIG9wYWNpdHk9IjAuNSIgZD0iTTEwMS41NjggNzEuMDEyM0MxMDMuODUzIDY5LjgyNDMgMTAwLjE5OCA2MS40MTY4IDk2Ljk5OSA2My4wNjE3QzkzLjE2MDggNjUuMDcyMiA5OC4wOTU2IDcyLjg0IDEwMS41NjggNzEuMDEyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIG9wYWNpdHk9IjAuMjUiIGQ9Ik0xMjAuMjExIDU2LjY2NDdDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMzU2OSAxMTguNjU3IDcyLjIwMDNDMTEwLjYxNSA2My45NzU2IDEwMS4xMTEgNTIuMjc4MiAxMDEuMTExIDQ3Ljg5MTdDMTAxLjExMSA0Ny43MDg5IDEwMS4xMTEgNDcuNTI2MiAxMDEuMjAzIDQ3LjM0MzRDMTAxLjU2OCA0Ny4xNjA2IDEwMS45MzQgNDcuMDY5MiAxMDIuMjk5IDQ2Ljk3NzhDMTA5Ljg4NCA0NC42OTMyIDExNy45MjYgNDguOTg4MyAxMjAuMjExIDU2LjY2NDdaIiBmaWxsPSIjMUYyNDNDIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUxLjAwOCA3Mi42NTczQzE0NS43MDggODQuNTM3NSAxMjkuNDQxIDk3Ljk3MTIgMTI5LjQ0MSA5Ny45NzEyTDEzNC41NTkgMTA3LjExIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUwLjkxNyA3My45MzY3QzE1MC4wMDMgNzMuNjYyNSAxNDkuNTQ2IDczLjExNDIgMTQ5LjM2MyA3Mi42NTczQzE0OS4wODkgNzIuMTA4OSAxNDkuMTggNzEuNDY5MiAxNDkuNTQ2IDcxLjAxMjNMMTUzLjAxOSA2Ni45OTEzTDE1My42NTggNzIuMjkxN0MxNTMuNzUgNzIuODQgMTUzLjQ3NiA3My40Nzk3IDE1Mi45MjcgNzMuNzUzOUMxNTIuNDcgNzQuMDI4IDE1MS44MzEgNzQuMTE5NCAxNTAuOTE3IDczLjkzNjdaIiBmaWxsPSIjODc4MEU0IiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNzEuMzg3IDU2LjAyNTFDMTY5LjEwMyA2My42MTAxIDE1OC41MDIgNzIuNDc0NiAxNTEuOTIyIDcwLjQ2NDFDMTQ1LjQzNCA2OC40NTM2IDE0MS40MTMgNTUuMjk0IDE0My42OTcgNDcuNzA5QzE0NS45ODIgNDAuMTI0IDE1NC4wMjQgMzUuNzM3NCAxNjEuNyAzOC4xMTM1QzE2OS4zNzcgNDAuMzA2NyAxNzMuNjcyIDQ4LjM0ODcgMTcxLjM4NyA1Ni4wMjUxWiIgZmlsbD0iIzg3ODBFNCIgc3Ryb2tlPSIjMUMyNTNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBvcGFjaXR5PSIwLjQiIGQ9Ik0xNjcuOTE1IDUyLjkxOEMxNjMuODk0IDU0LjE5NzQgMTYxLjA2MSA0NC42MDE5IDE2NS4zNTYgNDQuMjM2M0MxNjkuMjg1IDQzLjg3MDggMTcwLjU2NSA1Mi4wOTU1IDE2Ny45MTUgNTIuOTE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4yNSIgZD0iTTE2Mi43OTcgMzguOTM1OUMxNjIuNzk3IDQzLjMyMjUgMTUzLjM4NCA1NC45Mjg1IDE0NS4zNDIgNjMuMTUzMkMxNDMuMjQgNTguMzA5NyAxNDIuNTA5IDUyLjA5NTUgMTQzLjc4OSA0Ny43MDlDMTQ2LjA3MyA0MC4xMjQgMTU0LjExNSAzNS43Mzc0IDE2MS43OTIgMzguMTEzNUMxNjIuMDY2IDM4LjIwNDkgMTYyLjQzMSAzOC4yOTYyIDE2Mi43MDUgMzguMzg3NkMxNjIuNzA1IDM4LjU3MDQgMTYyLjc5NyAzOC43NTMyIDE2Mi43OTcgMzguOTM1OVoiIGZpbGw9IiMxRjI0M0MiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik0xMjkuNDQxIDY2LjgwODdWMTEyLjEzNiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEyOS40NDEgNzQuNTc2NUMxMjguNDM2IDc0LjU3NjUgMTI3Ljc5NiA3NC4yMTEgMTI3LjQzMSA3My43NTQxQzEyNi45NzQgNzMuMjk3MSAxMjYuODgyIDcyLjU2NjEgMTI3LjE1NiA3Mi4wMTc3TDEyOS41MzIgNjYuNjI2TDEzMS45MDggNzIuMDE3N0MxMzIuMTgzIDcyLjU2NjEgMTMyLjA5MSA3My4yOTcxIDEzMS42MzQgNzMuNzU0MUMxMzEuMDg2IDc0LjIxMSAxMzAuNDQ2IDc0LjU3NjUgMTI5LjQ0MSA3NC41NzY1WiIgZmlsbD0iI0ZGQzk0MCIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTE0My41MTQgMjQuNDA1N0MxNDEuNDEzIDIzLjU4MzIgMTE3LjU2MSAyMy41ODMyIDExNS40NTkgMjQuNDA1N0MxMTMuMzU3IDI1LjIyODEgMTAyLjU3NCAzNS4zNzIgMTAyLjU3NCAzOS4zMDE2QzEwMi41NzQgNDUuOTcyNyAxMjUuNzg2IDcwLjY0NjkgMTI5LjUzMiA3MC42NDY5QzEzMy4yNzkgNzAuNjQ2OSAxNTYuNDkxIDQ1Ljk3MjcgMTU2LjQ5MSAzOS4zMDE2QzE1Ni40IDM1LjQ2MzQgMTQ1LjYxNiAyNS4yMjgxIDE0My41MTQgMjQuNDA1N1oiIGZpbGw9IiNGRkM5NDAiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTE0MS41MDQgMjYuMzI0OEMxMzkuMjE5IDI2LjIzMzQgMTM5LjIxOSAyOC44ODM2IDE0MC41OSAzMS4wNzY5QzE0Mi45NjYgMzUuMDA2NSAxNDYuMjU2IDM2LjY1MTQgMTQ3LjYyNyAzNi4xMDMxQzE1MS42NDggMzQuNjQwOSAxNDYuMzQ3IDI2LjQxNjIgMTQxLjUwNCAyNi4zMjQ4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0xNTYuNCAzOS4yMTAyTDE0MC44NjQgNDEuNjc3NkgxMTguMDE4TDEwMi40ODIgMzkuMjEwMiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEzNS4wMTUgMjQuMDQwMkMxMzcuNTc0IDI4Ljc5MjIgMTQwLjg2NCAzOS45NDEzIDE0MC44NjQgNDEuNjc3NkMxNDAuODY0IDQzLjQxNCAxMzUuODM4IDU5LjA0MDkgMTI5LjQ0MSA3MC42NDY5IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTIzLjg2NiAyNC4wNDAyQzEyMS4zMDggMjguNzkyMiAxMTguMDE4IDM5Ljk0MTMgMTE4LjAxOCA0MS42Nzc2QzExOC4wMTggNDMuNDE0IDEyMy4wNDQgNTkuMDQwOSAxMjkuNDQxIDcwLjY0NjkiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTExNy41NjEgNTUuNzUxMUMxMTYuMTkgNTYuMDI1MyAxMTAuNjE1IDUwLjM1OTQgMTA4LjMzMSA0Ni4zMzg0QzEwNy4yMzQgNDQuNDE5MyAxMDguMjM5IDQzLjMyMjcgMTA5LjMzNiA0My4wNDg1QzExMi41MzQgNDIuMjI2IDExMy45MDUgNDQuMzI3OSAxMTYuMDA3IDQ3Ljg5MkMxMTcuOTI2IDUxLjA5MDUgMTE5LjIwNiA1NS4zODU2IDExNy41NjEgNTUuNzUxMVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuOCIvPgo8cGF0aCBkPSJNMTQxLjg2OSA5OS44OTA0QzE0My44OCA5MC4zODYzIDEyOS40NDEgOTcuNzg4NSAxMjkuNDQxIDk3Ljc4ODVDMTI5LjQ0MSA5Ny43ODg1IDE0MC4wNDIgMTA5LjAyOSAxNDEuODY5IDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTE3LjAxMyA5OS44OTA0QzExNS4wMDIgOTAuMzg2MyAxMjkuNDQxIDk3Ljc4ODUgMTI5LjQ0MSA5Ny43ODg1QzEyOS40NDEgOTcuNzg4NSAxMTguODQgMTA5LjAyOSAxMTcuMDEzIDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8L3N2Zz4K"},i.createElement("source",{src:`${p.y}premiumOnboardingStart.mp4`})))),f=s.UI.Node.make((()=>i.createElement("svg",{"aria-hidden":!0,width:"130",height:"82",viewBox:"0 0 130 82",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{opacity:"0.25",d:"M82.084 40.757L72.7367 30.3437C72.1869 29.6495 71.4996 29.3718 70.6748 29.3718H46.8943C46.0695 29.3718 45.3822 29.6495 44.8324 30.3437L35.4851 40.757C34.5229 41.8677 34.5229 43.5338 35.4851 44.6446L57.3412 68.9421C57.7536 69.3586 58.3034 69.6363 58.8533 69.6363C59.4031 69.6363 59.953 69.3586 60.3653 68.9421L82.084 44.6446C83.1837 43.5338 83.1837 41.8677 82.084 40.757Z",fill:"#494393"}),i.createElement("path",{d:"M66.1044 65.0148L87.9605 40.7173C88.6478 39.8843 88.6478 38.6347 87.9605 37.8016L78.4758 27.3884C78.0634 26.9719 77.5136 26.6942 76.8263 26.6942H53.1832C52.6333 26.6942 51.946 26.9719 51.5336 27.3884L42.1864 37.8016C41.4991 38.6347 41.4991 39.8843 42.1864 40.7173L64.0425 65.0148C64.5923 65.7091 65.5546 65.7091 66.1044 65.0148Z",fill:"#FFDF80",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M88.5103 39.3289H41.6365",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M60.4684 26.6942L55.7947 38.4958C55.6573 39.0512 55.6573 39.6066 55.7947 40.0231L65.142 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("path",{d:"M69.6783 26.6942L74.3519 38.4958C74.4894 39.0512 74.4894 39.6066 74.3519 40.0231L65.0046 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),i.createElement("rect",{x:"77.5491",y:"1",width:"8",height:"8",rx:"2",transform:"rotate(14.9627 77.5491 1)",fill:"#F8C6DA",stroke:"#0E101A"}),i.createElement("rect",{x:"13",y:"53.5762",width:"8",height:"8",rx:"2",transform:"rotate(-36.5938 13 53.5762)",fill:"#B8B4EF",stroke:"#0E101A"}),i.createElement("circle",{cx:"96",cy:"73",r:"4",fill:"#87E8D1",stroke:"#0E101A"}),i.createElement("path",{d:"M37 66V72",stroke:"#0E101A"}),i.createElement("path",{d:"M37 76V82",stroke:"#0E101A"}),i.createElement("path",{d:"M45 74L39 74",stroke:"#0E101A"}),i.createElement("path",{d:"M35 74L29 74",stroke:"#0E101A"}),i.createElement("path",{d:"M37.5 10V14.125",stroke:"#0E101A"}),i.createElement("path",{d:"M37.5 16.875V21",stroke:"#0E101A"}),i.createElement("path",{d:"M43 15.5L38.875 15.5",stroke:"#0E101A"}),i.createElement("path",{d:"M36.125 15.5L32 15.5",stroke:"#0E101A"}),i.createElement("path",{d:"M103 21V27",stroke:"#0E101A"}),i.createElement("path",{d:"M103 31V37",stroke:"#0E101A"}),i.createElement("path",{d:"M111 29L105 29",stroke:"#0E101A"}),i.createElement("path",{d:"M101 29L95 29",stroke:"#0E101A"})))),y=d.ux.stylesheet({premiumOnboardingStartVideo:[{width:264,height:120}]}),v=s.UI.Node.make((({view:e})=>i.createElement("div",{"data-name":"success-lens-text",className:F.newSuccessText},i.createElement(c.H4,{key:"title"},e("title")),i.createElement("div",{className:F.newSuccessDescription},i.createElement(a.F.div,{className:F.newSuccessDescriptionText},(0,n.pipe)(e("firstLine"),u.map(o.QP))))))),x=s.UI.Union.asOption(v),b=s.UI.Grid.make((({slots:e})=>i.createElement(a.F.div,{className:F.newSuccessContainer},e.image,e.caption))),C=s.UI.Knot.make(b,{image:m,caption:x}),I=s.UI.Knot.make(b,{image:h,caption:x}),S=s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>i.createElement(a.F.div,{className:F.premiumOnboardingStartSuccessContainer},e.animation,e.caption))),{animation:g,caption:x}),w=s.UI.Knot.make(b,{image:f,caption:x}),A=s.UI.Union.make("kind",{growStart:C,growComplete:I,premiumOnboardingStart:S,premiumOnboardingComplete:w}),E=d.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),_=d.ux.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),k={animation:`${E} 300ms linear forwards`},T={position:"absolute",top:0,width:d.ux.percent(100),animation:`${_} 200ms linear forwards`},M={textAlign:"center",background:l.Il.CoreNeutral0,padding:d.ux.rem(.5)},N={width:d.ux.percent(100),marginTop:d.ux.rem(.5)},L={marginTop:d.ux.rem(.25)},D={fontSize:d.ux.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:d.ux.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},F=d.ux.stylesheet({success_fadein:[k],success_fadeout:[T],premiumOnboardingStartSuccessContainer:[M],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[N],newSuccessDescription:[L],newSuccessDescriptionText:[D]}),P=s.UI.Transition.make({fadein:F.success_fadein},{fadeout:F.success_fadeout}),R=s.UI.Animated.make(P,A)},38819:(e,t,r)=>{r.d(t,{r:()=>f});var i=r(27378),n=r(40327),a=r(5114),o=r(34217),s=r(50474),l=r(4870),c=r(3656),d=r(89894),u=r(94785);const p=o.UI.Grid.make((({slots:e})=>i.createElement("div",{className:b.grid},i.createElement("div",{className:b.iconWrapper},e.icon),i.createElement("div",{className:b.titleWrapper},e.title),i.createElement("div",{className:b.bottomWrapper},e.bottom)))),m=o.UI.Node.make((()=>{const e=i.useContext(s.m.Context).successLens.paidView;return i.createElement(c.H4,null,e.title)})),h=o.UI.Node.make((()=>i.createElement(l.JO.GreenOk,{width:32}))),g=o.UI.Knot.make(p,{icon:h,title:m,bottom:o.UI.Union.make("kind",{[u.n.State.hidden]:o.UI.Node.empty,[u.n.State.expanded]:u.n.TogglableExpandedPanel})}),f=(0,n.pipe)(o.UI.squash(g),o.UI.contramapState((e=>(0,n.pipe)(e,a.fold((()=>({bottom:{kind:u.n.State.hidden}})),(e=>({bottom:{kind:u.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:d.ux.rem(3.5)},v={marginTop:d.ux.rem(1.375)},x={marginTop:d.ux.rem(2.675)},b=d.ux.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[v],bottomWrapper:[x]})},70023:(e,t,r)=>{r.d(t,{d:()=>c});var i=r(57050),n=r(5114),a=r(22232),o=r(19751),s=r(60797),l=r(94785);function c(e){return(0,i.ls)(o.map((e=>{switch(e.key){case l.n.State.expanded:switch(e.action.kind){case"collapse":return n.some(l.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return n.none;default:return(0,a.vE)(e.action)}case l.n.State.minimized:return"onClick"===e.action.action?n.some(l.n.State.expanded):(0,a.vE)(e.action.action);default:return(0,a.vE)(e)}})),s.oA,o.startWith(l.n.State.minimized),o.switchMap((t=>e.pipe(o.map(n.fold((()=>({kind:l.n.State.hidden})),(e=>{switch(t){case l.n.State.minimized:return{kind:l.n.State.minimized,alertsCount:e.count};case l.n.State.expanded:return{kind:l.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case l.n.State.hidden:return{kind:l.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},94785:(e,t,r)=>{r.d(t,{n:()=>V});var i=r(34217),n=r(27378),a=r(40327),o=r(8543),s=r(5114),l=r(22232),c=r(50474),d=r(64757),u=r(62295),p=r(4870),m=r(3656),h=r(19751),g=r(53514),f=r(44060),y=r(89894),v=r(40219);const x={position:"relative",borderRadius:y.ux.rem(v.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:f.Il.CoreNeutral0},b={padding:`${y.ux.rem(1)} ${y.ux.rem(2)}`},C={position:"absolute",top:y.ux.rem(.75),left:y.ux.rem(.5)},I={display:"flex",boxSizing:"border-box",padding:y.ux.rem(.5),height:y.ux.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},S={marginLeft:y.ux.rem(.8),fontSize:y.ux.rem(.85),lineHeight:y.ux.rem(1)},w={display:"flex",width:y.ux.percent(100),alignItems:"center",justifyContent:"space-between"},A={position:"absolute",top:y.ux.rem(.2),right:y.ux.rem(.3),cursor:"pointer"},E={paddingRight:y.ux.rem(1),textAlign:"left",fontSize:y.ux.rem(.75),lineHeight:y.ux.rem(1.15)},_={marginTop:y.ux.rem(.6),fontSize:y.ux.rem(.875),flexShrink:0},k={display:"flex",marginBottom:y.ux.rem(.6),justifyContent:"flex-end",flexShrink:0},T={marginRight:"auto",lineHeight:y.ux.rem(1.3125)},M={marginTop:y.ux.rem(.21),minWidth:y.ux.rem(1.5),flexShrink:0},N={marginTop:y.ux.rem(1)},L={display:"flex",justifyContent:"center",alignItems:"center",height:y.ux.rem(2),backgroundColor:f.Il.CoreGreen60,borderRadius:y.ux.rem(.25),fontSize:y.ux.rem(.875),fontWeight:700,color:f.Il.CoreNeutral0,lineHeight:y.ux.rem(2),padding:y.ux.rem(g.mh),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:y.ux.color(f.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:y.ux.color(f.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},D=y.ux.stylesheet({wrapper:[x],maximizedWrapper:[b],minimizedWrapper:[I],maximizedWrapperIcon:[C],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[S],minimizedContent:[w],maximizedCloseButtonContainer:[A],maximizedHeader:[E],alertCategoryContainer:[_],alertCategory:[k],categoryHumanContainer:[T],alertCounterContainer:[M],premiumButtonContainer:[N],premiumButton:[L]});var F=r(54001);const P=(e,t)=>i.UI.Grid.make((({slots:r})=>n.createElement(o.F.div,(0,F.Sh)(D.wrapper,e),n.createElement(p.JO.UpgradeHookPanel.TitleDiamond,{className:t}),r.body))),R=i.UI.Node.make((({notify:e})=>n.createElement(o.F.div,{className:D.maximizedCloseButtonContainer},n.createElement(m.zx,{name:"close",onClick:e("onClick")},n.createElement(p.JO.Arrow,{width:11,direction:p.n4.up})))));var O;!function(e){let t,r;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={})),function(e){e.isOnUpgrade=function(e){return"onUpgrade"===e.kind},e.isOnUpgradeButtonMount=function(e){return"onUpgradeButtonMount"===e.kind}}(r=e.Actions||(e.Actions={}))}(O||(O={}));const B=i.UI.Node.make((({state:e,notify:t})=>{const r=n.useContext(c.m.Context);return n.createElement(n.Fragment,null,n.createElement("div",{className:D.maximizedHeader},n.createElement(o.F.Fragment,null,e.pipe(h.map((({count:e})=>e>0?e>1?n.createElement(n.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1,"",e,"",r.sidebar.content.premiumIssues.foundTitlePlural.description2):n.createElement(n.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1,"",e,"",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),n.createElement(o.F.div,{className:D.alertCategoryContainer},e.pipe(h.map((({alerts:e})=>e.map((e=>n.createElement("div",{key:e.category,className:D.alertCategory},n.createElement("div",{className:D.categoryHumanContainer},e.categoryHuman),n.createElement("div",{className:D.alertCounterContainer},n.createElement(u.x.Counter,{count:e.count,type:"yellowPremium"}))))))))),n.createElement("div",{className:D.premiumButtonContainer},n.createElement("div",{ref:e=>{t({type:"upgradeHookAction",kind:O.ActionsKind.onUpgradeButtonMount,element:s.fromNullable(e)})()}},n.createElement(d.zx,{name:"upgrade",className:D.premiumButton,onClick:t({type:"upgradeHookAction",kind:O.ActionsKind.onUpgrade})},n.createElement(p.JO.UpgradeHookPanel.ButtonDiamond,null),r.goPremium))))})),$=i.UI.Composite.make(P(D.maximizedWrapper,D.maximizedWrapperIcon),i.UI.Group.make({closeButton:i.UI.Union.make("kind",{hidden:i.UI.Node.empty,visible:R}),content:B})),U=(0,a.pipe)(i.UI.squash($),i.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case O.ActionsKind.onUpgrade:return{kind:"upgrade"};case O.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,l.vE)(e.action)}case"closeButton":return"onClick"===e.action.action?{kind:"collapse"}:(0,l.vE)(e.action.action);default:return(0,l.vE)(e)}})),i.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}))));var W=r(50858),z=r(28706);const G=i.UI.Node.make((({state:e})=>{const t=n.useContext(c.m.Context);return n.createElement(o.F.div,{className:D.minimizedContent},n.createElement("div",{className:D.minimizedText},t.premiumSuggestions),e.pipe(h.map((({alertsCount:e})=>e>0&&n.createElement(u.x.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),j=i.UI.Grid.make((({slots:e,notify:t})=>n.createElement("div",(0,W._)({role:"button",className:D.shadowWrapper},z.rl(t("onClick"))),e.body))),H=i.UI.Knot.make(j,{body:i.UI.Composite.make(P(D.minimizedWrapper),G)}),Y=(0,a.pipe)(i.UI.squash(H),i.UI.contramapState((e=>({body:e}))));var V;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={}));e.TogglableExpandedPanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.expanded]:U}),e.TogglablePanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.minimized]:Y,[t.expanded]:U})}(V||(V={}))},95983:(e,t,r)=>{r.d(t,{aW:()=>i,vM:()=>m});var i,n=r(18775),a=r(71249),o=r(57050),s=r(40327),l=r(22232),c=r(83078),d=r(5114),u=r(95195),p=r(89943);function m(e,t){return t.reduce(((t,r)=>{const i="function"==typeof e?e(r):r[e];let n=t.get(i);return n||(n=[],t.set(i,n)),n.push(r),t}),new Map)}!function(e){e.URI="ImmutableSortedMap";e.create=function(e,t,r){const n=Array.isArray(e)?new Map(e.map((e=>[t(e),e]))):e,a=i.orderKeys(n,r);return n.forEach((e=>(0,l.kG)(g(e),"init value should implement IEquals",(()=>JSON.stringify(e))))),new h(n,a,r,t)},e.empty=function(e,t){return new h(new Map,[],t,e)},e.diff=function(e,t){const r=e.clear();return e.reduce((({added:e,preserved:r,removed:i,changed:n},a,o)=>{const s=e.has(o)?e.remove(o):e;if(t.has(o)){const e=a.equals(c.MH(t.get(o)).value);return{removed:i,added:s,preserved:e?r.add(a):r,changed:e?n:n.add(a)}}return{removed:i.add(a),added:s,preserved:r,changed:n}}),{removed:r,added:t,preserved:r,changed:r})},e.unsafeGet=function(e,t){return c.MH(t.get(e)).value},e.unsafeGetBy=function(e){return t=>c.MH(t.get(e)).value},e.unsafeGetAt=function(e,t){return c.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return t=>c.MH(t.getAt(e))},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){let r=-1,i=e.size;for(;r+1!==i;){const n=r+(i-r>>1);t(c.MH(e.getAt(n)))?r=n:i=n}return r+1},e.createKeySorter=function(e,t){return(r,i)=>t(e(r),e(i))},e.orderKeys=function(e,t){return Array.from(e.keys()).sort(i.createKeySorter((t=>e.get(t)),t))},e.takeByKey=function(e,t,r){const i=(0,s.pipe)(r,a.cx((t=>t===e))),n=d.fromNullable(t.get(e));return(0,l.kG)(d.isNone(i)&&d.isNone(n)||d.isSome(i)&&d.isSome(n),"unsynced hash&order"),c.vB(((e,t)=>({index:e,value:t})))(i,n)},e.getFoldableWithIndex=function(){return{URI:i.URI,_E:void 0,reduce:(e,t,r)=>e.reduce(r,t),foldMap:e=>(t,r)=>t.reduce(((t,i)=>e.concat(t,r(i))),e.empty),reduceRight:(e,t,r)=>e.reduce(((e,t)=>r(t,e)),t),reduceWithIndex:(e,t,r)=>e.reduce(((e,t,i)=>r(i,e,t)),t),reduceRightWithIndex:(e,t,r)=>e.reduce(((e,t,i)=>r(i,t,e)),t),foldMapWithIndex:e=>(t,r)=>t.reduce(((t,i,n)=>e.concat(t,r(n,i))),e.empty)}}}(i||(i={}));class h{get(e){return i.takeByKey(e,this._hash,this._order)}getIndex(e){return d.fromPredicate((e=>e>-1))(this._order.indexOf(e))}getAt(e){return d.fromNullable(this._hash.get(this._order[e]))}has(e){return this._hash.has(e)}find(e,t=0){if(t<0)return d.none;for(let r=t;r<this._order.length;r++){const t=this._order[r],i=this._hash.get(t);if(e(i))return d.some({index:r,value:i})}return d.none}findFrom(e,t){return this.find(e,t)}findRight(e,t){if(Boolean(t)&&t>=this._order.length)return d.none;for(let r=Boolean(t)?t:this._order.length-1;r>=0;r--){const t=this._order[r],i=this._hash.get(t);if(e(i))return d.some({index:r,value:i})}return d.none}findRightFrom(e,t){return this.findRight(e,t)}map(e,t=this._comp){const r=new Map;this._order.forEach(((t,i)=>{const n=this._hash.get(t),a=e(n,t,i);(0,l.kG)(g(a),"transformed value should implement IEquals",(()=>JSON.stringify(a))),r.set(t,a)}));const n=i.orderKeys(r,t);return new h(r,n,t,this._getKey)}mapTo(e){return this._order.map(((t,r)=>e(this._hash.get(t),t,r)))}filter(e){const t=new Map,r=this._order.filter((r=>{const i=this._hash.get(r),n=e(i,r);return n&&t.set(r,i),n}));return new h(t,r,this._comp,this._getKey)}reduce(e,t){return this._order.reduce(((t,r,i)=>e(t,this._hash.get(r),r,i)),t)}modifyWith(e,t){const r=new Map(this._hash),n=this._order.slice(),a=(e,a)=>{const o=i.takeByKey(a,r,n),s=t(a,e,o);(0,l.kG)(g(s),"modified value should implement IEquals",(()=>JSON.stringify(s))),r.set(a,s),d.isNone(o)&&n.push(a)};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),n.sort(i.createKeySorter((e=>r.get(e)),this._comp)),new h(r,n,this._comp,this._getKey)}patchWith(e,t){const r=new Map(this._hash),n=this._order.slice(),a=(e,a)=>{const u=i.takeByKey(a,r,n),p=t(a,e,u);(0,l.kG)(c.wo(g)(p),"patched value should implement IEquals",(()=>JSON.stringify(p))),(0,s.pipe)(p,d.fold((()=>{(0,s.pipe)(u,d.fold(o.Q1,(({index:e})=>{r.delete(a),n.splice(e,1)})))}),(e=>{r.set(a,e),d.isNone(u)&&n.push(a)})))};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),n.sort(i.createKeySorter((e=>r.get(e)),this._comp)),new h(r,n,this._comp,this._getKey)}add(e){const t=new Map(this._hash),r=this._order.slice();return(Array.isArray(e)?e:[e]).forEach((e=>{const i=this._getKey(e);(0,l.kG)(g(e),"added value should implement IEquals",(()=>JSON.stringify(e))),t.set(i,e),-1===r.indexOf(i)&&r.push(i)})),r.sort(i.createKeySorter((e=>t.get(e)),this._comp)),new h(t,r,this._comp,this._getKey)}update(e,t){return(0,s.pipe)(this.get(e),d.fold((()=>u.left(`Provided key ${e} not found in the map`)),(({value:r})=>{const n=new Map(this._hash),a=this._order.slice();return n.set(e,t(r)),a.sort(i.createKeySorter((e=>n.get(e)),this._comp)),u.right(new h(n,a,this._comp,this._getKey))})))}remove(e){(0,l.kG)(this.has(e),`can not remove unknown key: ${e}`);const t=new Map(this._hash);t.delete(e);const r=p.CE(e,this._order);return new h(t,r,this._comp,this._getKey)}clear(){return new h(new Map,[],this._comp,this._getKey)}hashCode(){let e=7;return this._hash.forEach((t=>e+=t.hashCode())),e}equals(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every(((t,r)=>t.equals(c.MH(e.getAt(r)))))}values(){return this._order.map((e=>this._hash.get(e)))}keys(){return this._order}get size(){return this._order.length}constructor(e,t,r,i){(0,n._)(this,"_hash",void 0),(0,n._)(this,"_order",void 0),(0,n._)(this,"_comp",void 0),(0,n._)(this,"_getKey",void 0),this._hash=e,this._order=t,this._comp=r,this._getKey=i,(0,l.kG)(e.size===t.length,"every hash entry should has order")}}function g(e){return!(!Boolean(e)||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},21619:(e,t,r)=>{r.d(t,{mN:()=>x});var i,n,a=r(18775),o=r(71249),s=r(57050),l=r(40327),c=r(23239),d=r(5114),u=r(45701),p=r(89943),m=r(8125),h=r(55415),g=r(83078),f=r(66896),y=r(19751),v=r(17594);!function(e){const t=e=>t=>(0,l.pipe)(t,d.map((0,s.ls)(o.DZ((t=>e.getAlertByMark(t))),o.DY(u.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(f.R.ord)))));e.fromMarksEvents=(e,r)=>({activeHighlights:(0,l.pipe)(r.activeMarks,y.map(t(e))),hoveredHighlights:(0,l.pipe)(r.hoveredMarks,y.map(t(e)))})}(i||(i={})),function(e){e.Mock=class{constructor(){(0,a._)(this,"alertHovered",new y.Subject),(0,a._)(this,"alertClicked",new y.Subject),(0,a._)(this,"highlightedAlert",c.h.create(d.none))}}}(n||(n={}));class x{constructor(e,t,r,n,o,s){(0,a._)(this,"_ded",void 0),(0,a._)(this,"_markAlertMapper",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"_impl",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._ded=e,this._markAlertMapper=t,this._alertsReader=r,this._activeAlertChanges=n,this._alertFilter=o,this._resolveClickedAlert=s,this._impl=new b(i.fromMarksEvents(this._markAlertMapper,this._ded),this._alertsReader,this._activeAlertChanges,this._alertFilter,this._resolveClickedAlert),this.alertHovered=this._impl.alertHovered,this.alertClicked=this._impl.alertClicked}}class b{constructor(e,t,r,i,n){(0,a._)(this,"_highlightEvents",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._highlightEvents=e,this._alertsReader=t,this._activeAlertChanges=r,this._alertFilter=i,this._resolveClickedAlert=n,this.alertHovered=this._highlightEvents.hoveredHighlights.pipe(y.map(d.map(o.UI((({alert:e})=>e)))),y.scan(((e,t)=>(0,l.pipe)(t,d.chain((t=>(0,l.pipe)(e,d.filter((e=>-1!==t.indexOf(e))),d.fold((()=>d.fromNullable(t[0])),d.some)))))),d.none),y.map(d.filter((e=>this._alertsReader.isInteractable(e.id)&&!v.$.isPlagiarism(e)))),y.distinctUntilChanged()),this.alertClicked=this._highlightEvents.activeHighlights.pipe(y.withLatestFrom(this._activeAlertChanges,this._alertFilter),y.scan(((e,[t,r,i])=>{const n=t=>(0,l.pipe)(e,d.exists((e=>e.alert.id===t.alert.id))),a=e=>(0,l.pipe)(r,d.exists((t=>t.alert.id===e.alert.id))),o=e=>i(e.alert);var s;return(0,l.pipe)(t,d.chain((e=>(0,l.pipe)(e,null!==(s=this._resolveClickedAlert)&&void 0!==s?s:p.N6([(0,m.W9)(n,a),a,(0,m.W9)(n,o),o,n]),d.fold((()=>d.fromNullable(e[0])),d.some),d.map((e=>h.Vx(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),g.cS()),y.shareReplay({refCount:!0,bufferSize:1}))}}},54216:(e,t,r)=>{r.d(t,{t:()=>g});var i=r(50858),n=r(55818),a=r(57050),o=r(40327),s=r(28043),l=r(77176),c=r(8125),d=r(83078),u=r(74660),p=r(66896);const m=(0,c.W9)(u.bZ.isRegistered,(0,a.ff)(u.bZ.isMuted)),h=e=>t=>(0,c.W9)(m,e(t));var g;!function(e){e.create=function(e,t){const r=h((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:e=>h((e=>t[e]))(e),alertVisibleInSidebar:r,getLensesFilter:t=>e[t],alertCanBeDisplayed:m,alertIsBulkAcceptable:e=>(0,c.W9)(r(e),u.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,r=()=>e=>(0,o.pipe)(e.freePremium,d.FX("unlocked"));e.getAlertVisibleInTextFilter=function(e,t){return t.pipe(s.x(((e,t)=>e.currentLens.id===t.currentLens.id)),l.U((t=>({filter:(0,c.Kg)(e.alertVisibleInText(t.currentLens.id),u.bZ.isBulkApplied),lensId:t.currentLens.id}))))};var f=e.defaultLensFilters={[p.R.SpecialId.Clarity]:t(p.R.SpecialId.Clarity),[p.R.SpecialId.Correctness]:t(p.R.SpecialId.Correctness),[p.R.SpecialId.Delivery]:t(p.R.SpecialId.Delivery),[p.R.SpecialId.Engagement]:t(p.R.SpecialId.Engagement),[p.R.SpecialId.Vox]:t(p.R.SpecialId.Vox),[p.R.SpecialId.KnowledgeHub]:t(p.R.SpecialId.KnowledgeHub),[p.R.SpecialId.FreePremiumAlerts]:(0,c.Kg)(r(),t(p.R.SpecialId.Premium)),[p.R.SpecialId.Plagiarism]:t(p.R.SpecialId.Plagiarism),[p.R.SpecialId.DraftAI]:a.jv,[p.R.SpecialId.Cheetah]:a.jv,[p.R.SpecialId.Premium]:t(p.R.SpecialId.Premium),[p.R.SpecialId.AllAlerts]:u.bZ.belongsToAllAlerts,[p.R.SpecialId.Closed]:a.jv,[p.R.SpecialId.PredictionTakeaways]:u.bZ.belongsToPredictionTakeaways,[p.R.SpecialId.PredictionEmogenie]:u.bZ.belongsToPredictionEmogenie,[p.R.SpecialId.RealTimeProofit]:t(p.R.SpecialId.RealTimeProofit)};e.defaultTextFilters=(0,n._)((0,i._)({},f),{[p.R.SpecialId.Closed]:u.bZ.isInline,[p.R.SpecialId.FreePremiumAlerts]:(0,c.Kg)(r(),t(p.R.SpecialId.Premium)),[p.R.SpecialId.Premium]:g.defaultLensFilters[p.R.SpecialId.Premium]})}(g||(g={}))},93398:(e,t,r)=>{r.d(t,{F:()=>i});var i,n=r(18775),a=r(57050),o=r(5114),s=r(22232),l=r(8125),c=r(42040),d=r(51374),u=r(74660),p=r(4390),m=r(17594);!function(e){e.Impl=class{constructor(e,t,r,i){(0,n._)(this,"_checkingState",void 0),(0,n._)(this,"_positionManager",void 0),(0,n._)(this,"_alertsReader",void 0),(0,n._)(this,"_alertCanBeDisplayed",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"findClosestAlertHighlight",void 0),(0,n._)(this,"findNextAlertInText",void 0),(0,n._)(this,"findPremiumAlert",void 0),this._checkingState=e,this._positionManager=t,this._alertsReader=r,this._alertCanBeDisplayed=i,this._log=c.C8.Logging.getLogger("AlertSearchService"),this.findClosestAlertHighlight=(e,t)=>(0,a.zG)(this._positionManager.findClosestToPosition(e,(e=>d.P.is(e)&&d.x.isVisible(e)&&!d.x.isApplied(e)&&(0,a.zG)(this._alertsReader.getRegistered(e.meta.alertId),o.exists((r=>this._alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),o.chain((e=>(0,a.zG)(this._alertsReader.getRegistered(e.meta.alertId),o.map((t=>{const r={alert:m.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return r.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>d.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))))),this.findNextAlertInText=({alert:e,highlightIndex:t},r)=>{const i=e.getHighlightRanges();return(0,s.kG)(t<i.length,"AHI is out of highlightRanges length",`hr length: ${i.length}, ahi: ${t}`),this.findClosestAlertHighlight(i[t].end,r)},this.findPremiumAlert=()=>(0,a.zG)(this._checkingState.get(),p.p.find((0,a.ls)(u.bZ.fromAlertModel,(0,l.W9)(u.bZ.isRegistered,u.bZ.isPremium))),o.map((e=>({alert:m.$.fromModel(e.alert),highlightIndex:0}))))}}}(i||(i={}))},59368:(e,t,r)=>{r.d(t,{Bd:()=>a,Oe:()=>i,rG:()=>n});var i,n,a,o=r(50858),s=r(55818),l=r(73975),c=r(74660);!function(e){e.eq=(0,l.Uz)((e=>e.alert))(c.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState));var t=e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState));e.canBeChanged=e=>r=>Boolean(e)&&a.applied===r.state.current.visualState?e===a.disposed:c.bZ.State.isBulkApplied(r.alert.state)||t(a.applied,a.disposed)(r),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(i||(i={})),function(e){e.updateRanges=function(e,t){return(0,s._)((0,o._)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,s._)((0,o._)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,s._)((0,o._)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(n||(n={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),(a||(a={})).isApplied=function(e){return e===a.applied}},16746:(e,t,r)=>{r.d(t,{v:()=>E});var i=r(18775),n=r(50858),a=r(55818),o=r(71249),s=r(57050),l=r(40327),c=r(49524),d=r(25656),u=r(24645),p=r(87969),m=r(22232),h=r(5114),g=r(95195),f=r(83078),y=r(89943),v=r(68983),x=r(8125),b=r(42040),C=r(51374),I=r(74660),S=r(36156),w=r(17594),A=r(59368);class E{get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,m.kG)(e!==A.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==A.Bd.initial||e!==A.Bd.disposed&&!A.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=A.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=A.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=A.rG.from(A.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=A.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=A.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!A.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,l.pipe)(this.change(),h.filter((e=>e.rawMark.length>0)),h.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return h.none}}get enclosingMark(){const e=Array.from(this._marksMap.values()).findIndex((0,s.ls)(h.chain((e=>h.fromEither(e.range()))),h.filter(C.x.isEnclosingView),h.isSome));return e>-1?this.markByIndex(e):h.none}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:r})=>{e.rawMark.forEach((e=>{"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,l.pipe)(t.created.get(e.id)||g.left(new Error("Cannot get unknown mark")),h.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),e.commit(),r._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const r=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,l.pipe)(t,h.filter((t=>0!==t.rawMark.length||(_("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:(0,a._)((0,n._)({},e.toJSON()),{alert:void 0})}),!1))),h.isSome))).map((([e,t])=>({ma:e,change:f.MH(t)})));if(0===r.length)return;const i=y.VS(r.map((e=>e.change.rawMark))),o=this._changeMarksInDEd(i);this._iterateOverMarkAlerts(r,o)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:h.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,m.kG)(A.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?h.some(this._getRawActionForApply(e)):h.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===u.v.Change.ActionType.remove)this._removeMark(e.id);else{const r=(0,l.pipe)(h.fromNullable(this._marksMap.get(e.id)),h.chain(c.y),h.alt((()=>(0,l.pipe)((e.action===u.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||g.left(new Error("Cannot get unknown mark")),h.fromEither))));this._setMark(e.id,r)}})),this._disposeIfEmpty()}_getTransition(){return(0,m.kG)(A.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=(0,a._)((0,n._)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){if(e.from.visualState===A.Bd.initial)return(0,l.pipe)(this._tryToUpdateRangesInAlert(e),h.map((e=>e.commit()))),{action:"create",commit:d.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};switch(e.to.visualState){case A.Bd.disposed:const t=A.Bd.isApplied(e.from.visualState)||I.bZ.State.isRemoved(this.alert.state)&&w.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(s.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e}))),r=(0,l.pipe)(this._tryToUpdateRangesInAlert(e),h.map((({commit:e})=>e)),h.getOrElse((()=>s.Q1)));return{action:"remove",commit:r,rawMark:t.map((e=>this._remove(e.range)(e.id)))};case A.Bd.applied:const i=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,l.pipe)(this._tryToUpdateRangesInAlert(e),h.map((({commit:e})=>e)),h.getOrElse((()=>s.Q1))),rawMark:[...i,...this._getAppliedRanges(((t,r)=>this._create(r,e)(r().meta.id)))]};default:const n=()=>I.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(c.y);return(0,l.pipe)(this._tryToUpdateRangesInAlert(e),h.map((({commit:t,ranges:r})=>this._getReplaceAction(e,n(),r.removed,t))),h.getOrElse((()=>({action:"update",commit:d.Z,rawMark:n().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}_getReplaceAction(e,t,r,i){return{action:"replace",commit:i,rawMark:[...r.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,l.pipe)(this._alertRangeService.getAppliedRanges(this.id),g.fold((e=>(_("markAlert").error("cannot get applied ranges",{error:e.message,alert:w.$.snapshot(this._alert("_getAppliedRanges"))}),[])),o.Su(e)))}_getHighlightRanges(e){return(0,l.pipe)(this._alertRangeService.getHighlightRanges(this.id),g.fold((t=>(_("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,l.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),o.UI(e)))),o.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,m.kG)(!!w.$.isApplicableAlert(t)||(!Boolean(e)||I.bZ.State.isBulkApplied(t.state)||!A.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,m.kG)(Boolean(e)&&A.Oe.isOneOf(A.Bd.applied)(this)?e===A.Bd.disposed||I.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):A.Oe.notAnyOf(A.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${Boolean(e)?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,l.pipe)(this._mark,h.map((e=>e.id)),h.toUndefined),range:(0,l.pipe)(this._mark,h.map((e=>e.range)),h.toUndefined)},alert:this._alert("toJSON")}}equals(e){return A.Oe.eq.equals(this,e)}hashCode(){return(0,S.AC)(this.id)}constructor(e,t,r,n,a,o,d,u){(0,i._)(this,"_alert",void 0),(0,i._)(this,"_alertsService",void 0),(0,i._)(this,"_alertRangeService",void 0),(0,i._)(this,"_changeMarksInDEd",void 0),(0,i._)(this,"_create",void 0),(0,i._)(this,"_update",void 0),(0,i._)(this,"_remove",void 0),(0,i._)(this,"_onTransitionEnd",void 0),(0,i._)(this,"_currentState",void 0),(0,i._)(this,"_scheduledState",void 0),(0,i._)(this,"id",void 0),(0,i._)(this,"_marksMap",void 0),(0,i._)(this,"_alertRef",void 0),(0,i._)(this,"_shouldInitMark",void 0),(0,i._)(this,"_tryToUpdateRangesInAlert",void 0),(0,i._)(this,"_dispose",void 0),(0,i._)(this,"_disposeIfEmpty",void 0),this._alert=e,this._alertsService=t,this._alertRangeService=r,this._changeMarksInDEd=n,this._create=a,this._update=o,this._remove=d,this._onTransitionEnd=u,this._currentState=A.rG.from(A.Bd.initial),this._scheduledState=A.rG.from(A.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,l.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),g.fold(s.jv,c.y)))return h.none;const t=(0,l.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),g.mapLeft((e=>_("markAlert").error("cannot apply pending ranges",e))),h.fromEither,h.chain(c.y),h.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,l.pipe)(t,h.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),g.either.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},g.either.mapLeft(this._alertRef,(e=>_("markAlert").warn("can not take alertRef",e)))}}!function(e){e.compareTo=e=>{const t=(0,v.W)(p.SV.distanceFrom)(e);return(e,r)=>(0,x.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...r.alert.getHighlightRanges().map(t)))}}(E||(E={}));const _=(0,x.HP)(b.C8.Logging.getLogger)},25980:(e,t,r)=>{r.d(t,{v:()=>i});var i,n=r(57050),a=r(59443),o=r(5114),s=r(95195),l=r(22232),c=r(42040),d=r(60797),u=r(19751),p=r(98403),m=r(74238),h=r(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={}));const r=c.C8.Logging.root.getLogger("AlignmentViewModel");function g(e,t){return(0,n.zG)(e,s.fold((({kind:e,reason:t})=>{switch(e){case"error":r.error("Cannot align card to mark",{reason:t});break;case"notFound":r.info("Item does not exist, alignment is canceled",{reason:t});break;default:(0,l.vE)(e)}return u.EMPTY}),(e=>u.of({mark:t,card:e}))))}e.alignMarkToItem=function(e,i){return({animation:s,suggestedPosition:l})=>({id:c,renderOptions:{features:f},activeHighlightIndex:y,activeAlert:v})=>(0,n.zG)(e.getMarkAlertPosition({alert:v,highlightIndex:y}),d.oA,u.map((e=>({mark:e,cardPosition:i.getCardSuggestedPositionInViewport(c,f.has(h.j.Features.showLabel),o.none,"cardContentTop")}))),u.switchMap((({cardPosition:e,mark:t})=>g(e,t))),u.switchMap((({card:e,mark:t})=>i.setCardPosition(c,f.has(h.j.Features.showLabel),!1,m.r.FromWindowTop.ISO.modify(m.L.concatC(-e.contentOffset))(t)).pipe(u.distinctUntilChanged(),u.mapTo((0,n.zG)(l,o.filter((t=>i.willFitViewport(c,m.r.FromWindowTop.ISO.modify(m.L.concatC(-e.contentOffset))(t)))),o.getOrElse((()=>m.r.FromWindowTop.ISO.modify(m.L.concatC(e.contentOffset))(e.top)))))))),u.switchMap((r=>e.moveAlertHighlightInViewport({alert:v,highlightIndex:y},r,s===t.ANIMATE_ALL?a.uq.fake:a.uq.none))),u.mapTo(p.PU),u.catchError((e=>(r.error("Cannot align mark to card",e),u.EMPTY))),u.share())},e.alignItemToMark=function(e,t){return({animation:s,fitCardIntoViewport:l})=>({id:c,renderOptions:{features:d},activeAlert:f,activeHighlightIndex:y})=>(0,n.zG)(e.getMarkAlertPosition({alert:f,highlightIndex:y}),u.switchMap(o.fold((()=>u.EMPTY),(e=>u.of(e)))),u.map((e=>({mark:e,cardPosition:t.getCardSuggestedPositionInViewport(c,d.has(h.j.Features.showLabel),o.some(e),"cardContentTop")}))),u.switchMap((({cardPosition:e,mark:t})=>g(e,t))),u.switchMap((({card:r,mark:n})=>u.mergeStatic(t.setCardPosition(c,d.has(h.j.Features.showLabel),s===i.Animation.ANIMATE_ALL,m.r.FromWindowTop.ISO.modify(m.L.concatC(-r.contentOffset))(n)),p.Ft(e.moveAlertHighlightInViewport({alert:f,highlightIndex:y},m.r.FromWindowTop.ISO.modify(m.L.concatC(r.contentOffset))(r.top),s===i.Animation.ANIMATE_ALL?a.uq.initial:a.uq.none))(l)))),u.mapTo(p.PU),u.catchError((e=>(r.error("Cannot align card to mark",e),u.EMPTY))),u.share())}}(i||(i={}))},52658:(e,t,r)=>{r.d(t,{eZ:()=>L,UC:()=>D});var i=r(18775),n=r(50858),a=r(55818),o=r(57050),s=r(40327),l=r(49524),c=r(12447),d=r(22232),u=r(5114),p=r(95195),m=r(95574),h=r(83078),g=r(8125),f=r(55415),y=r(74660),v=r(66896),x=r(19751),b=r(60797),C=r(98403),I=r(85089),S=r(25980),w=r(66268),A=r(74238),E=r(35416),_=r(14990),k=r(99116);var T,M,N;!function(e){var t=e.CARD_CONTENT_OFFSET_REM=3.4,r=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=t+1;e.contentOffsetGetter=(e=t,i=r)=>(t,r)=>Math.round((t?i:e)*r)}(T||(T={})),function(e){e.cardPositionGetter=(e,t)=>(r,i)=>{const n=new _.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,s.pipe)(e.view(E.nL.getLens).get(),p.fromOption((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),p.chain((({items:e,id:t})=>(0,s.pipe)(e.get(r),p.fromOption((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),p.map((({value:e})=>(0,s.pipe)(i,u.fold((()=>(0,o.ls)(A.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop)),o.yR))))))))},e.cardPositionInViewportGetter=(e,t)=>(r,i)=>{const n=new _.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,s.pipe)(e.view(E.nL.getLens).get(),p.fromOption((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),p.chain((({items:e,id:t})=>(0,s.pipe)(e.get(r),p.fromOption((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),p.chain((({value:t})=>{return(0,s.pipe)(i,u.map(n.converters.windowToViewport),u.alt((()=>u.some((0,o.ls)(A.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop)(t.positionState.absTop)))),u.map((a=t,l=((e,t)=>(0,s.pipe)(t.get(e),u.map((({index:e})=>({before:(0,s.pipe)(t.getAt(e-1),u.map((e=>e.positionState.height)),u.getOrElse((()=>0))),after:(0,s.pipe)(t.getAt(e+1),u.map((e=>e.positionState.height)),u.getOrElse((()=>0)))}))),u.getOrElse((()=>({before:0,after:0})))))(r,e),c=n.viewport,e=>{const t=(0,k.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:c.height,padding:l});return A.L.FromViewportTop.ISO.modify(A.L.concatC(-t))(e)})),u.map(n.converters.viewportToWindow),p.fromOption((()=>({kind:"error",reason:"Cannot get card position in viewport"}))));var a,l,c}))))))}}(M||(M={})),function(e){const t=(e,t,r,i)=>{const n=i.viewport.get(),a=i.scrollTop.get(),o=A.L.converters(a,A.r.FromWindowTop.ISO.unwrap(n.top),i.paddingTop.get());return m.vM((()=>(0,s.pipe)(E.nL.getLens(r),u.chain((t=>t.items.get(e))),u.map((e=>A.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),u.map((e=>o.absTopToViewportTop(e))),u.fold((()=>{throw new d.ej("Cannot get offset for unknown card")}),(e=>{const r=o.windowToViewport(t);return A.L.FromViewportTop.ISO.unwrap(e)-A.L.FromViewportTop.ISO.unwrap(r)})))))};e.moveCardToPositionSyncGetter=(e,r)=>i=>(0,s.pipe)(t(i.id,i.position,e.get(),r),p.chain((e=>r.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,r)=>i=>(0,s.pipe)(t(i.id,i.position,e.get(),r),p.fold((e=>x.throwError(e)),(e=>r.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(N||(N={}));var L,D,F,P,R=r(71841);class O extends d.sH{}!function(e){var t=e.cardSuggestedPositionGetter=(e,t)=>(r,i,n,a)=>{const o="cardTop"===a?0:t(i);return(0,s.pipe)(e(r,(0,s.pipe)(n,u.map(A.r.FromWindowTop.ISO.modify(A.L.concatC(-o))))),p.map((e=>({top:e,contentOffset:o}))))};e.getSuperScrollMapper=(e,r,i)=>{const n=N.moveCardToPositionAnimatedGetter(e,r),a=N.moveCardToPositionSyncGetter(e,r),o=T.contentOffsetGetter();return{setCardPosition:(e,t,r,s)=>{const l={top:s,contentOffset:o(t,i.get())};return(r?n({id:e,position:s}):x.of(a({id:e,position:s})).pipe(x.map(m.MH))).pipe(x.mapTo(l),x.startWith(l),x.distinctUntilChanged())},getCardSuggestedPosition:t(M.cardPositionGetter(e,r),(e=>o(e,i.get()))),getCardSuggestedPositionInViewport:t(M.cardPositionInViewportGetter(e,r),(e=>o(e,i.get()))),willFitViewport:(t,i)=>(0,s.pipe)(e.get(),(e=>!!E.nL.hasItems(e)&&((e,t)=>(r,i)=>{const n=new _.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,s.pipe)(e.currentLens.items,(e=>(0,s.pipe)(e.get(r),u.map((({value:e})=>0===(0,k.v_)({cardTop:n.converters.windowToViewport(i),cardHeight:e.positionState.height,viewportHeight:n.viewport.height,padding:{before:0,after:0}}))))),h.MH)})(e,r)(t,i))),isAboveViewportTop:(l=r,e=>A.r.FromWindowTop.ISO.modify(A.L.concatC(l.scrollTop.get()+l.paddingTop.get()))(e)<l.viewport.get().top)};var l}}(L||(L={})),function(e){e.getMapper=(e,t,r)=>({moveAlertHighlightInViewport:(t,r,i)=>e.ensureAlertHighlightInViewport(t,A.r.FromWindowTop.ISO.unwrap(r),i),getMarkAlertPosition:i=>(0,s.pipe)(e.getMarkByAlert(i),p.fromOption((()=>new O("getMarkByAlert returned O.none"))),p.chain((n=>(0,s.pipe)(n.getRect(),p.map(c.n.relativeToViewport),p.map((e=>e.top)),p.orElse((()=>(r.debug("Cached alert is missing, falling back to flush"),(r=>(t.flushChanges(),(0,s.pipe)(e.getMarkByAlert(r),p.fromOption((()=>new Error("getMarkByAlert returned O.none"))),p.chain((e=>(0,s.pipe)(e.getRect(),p.map(c.n.relativeToViewport),p.map((e=>e.top))))))))(i)))),p.map(A.r.FromWindowTop.ISO.wrap)))),p.mapLeft((e=>(e instanceof O||r.warn("Cannot getMarkAlertPosition",e),e))),u.fromEither,(e=>x.of(e)))})}(D||(D={}));!function(e){e.Mock=class{constructor(){(0,i._)(this,"alignCardToMark",(()=>x.EMPTY)),(0,i._)(this,"alignCardTo",(()=>x.EMPTY)),(0,i._)(this,"alignMarkTo",(()=>x.EMPTY)),(0,i._)(this,"alignMarkToCard",(()=>x.EMPTY))}}}(F||(F={})),function(e){let t;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={}));e.getRelativePosition=(e,r,i)=>r.top+i>e.bottom?t.below:e.top>r.bottom?t.above:t.intersects}(t||(t={}));e.createAlignmentOnTypingEffect=(e,t,r,i,n,a=k.Bk)=>{const o=e.view(E.nL.mapper((({currentLens:e})=>(0,s.pipe)(u.some(e),u.filter(a(n)))))).pipe(x.map(u.chain(i),u.filter(n.isValidToAlign)),b.cp((e=>r.pipe(x.switchMap(C.b2.rafScheduler),x.switchMap((()=>t.alignCardToMark(e,S.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:v.R.isWithAlertsId,what:E.nL.Effect.Applicator.create(o.pipe(x.switchMapTo(x.NEVER)))}},e.createAlignOnDisjointedAreasEffect=(e,r,i,n)=>{const a=e.view((0,o.ls)(E.nL.getLens,u.filter((e=>u.isNone(E.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),c=a.pipe(x.map(u.isSome),x.distinctUntilChanged(),x.switchMap(C.Ft(i.changes.pipe(x.startWith(C.PU),x.switchMap(C.b2.rafScheduler),x.map((()=>u.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(i)))),x.map(u.filter((e=>e.top-e.bottom!=0)))))),x.withLatestFrom(a.pipe(x.map(u.map((({items:e})=>e)))),h.vB(((i,a)=>(0,s.pipe)(R.YA(e,n),u.map((e=>({top:A.r.FromWindowTop.ISO.unwrap(e.top),bottom:A.r.FromWindowTop.ISO.unwrap(e.bottom)}))),u.chain((e=>(0,s.pipe)(((e,r,i)=>{const n=(0,s.pipe)(e.getAt(0),u.map((e=>e.positionState.height)),u.getOrElse((()=>0))),a=t.getRelativePosition(r,i,n);switch(a){case t.RelativePosition.above:return(0,s.pipe)(e.getAt(0),u.map((e=>({card:e,top:r.top}))));case t.RelativePosition.below:return(0,s.pipe)(e.getAt(0),u.map((e=>({card:e,top:r.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return u.none;default:return(0,d.vE)(a)}})(a,i,e),u.map((({card:e,top:t})=>r.alignCardTo(e,A.r.FromWindowTop.ISO.wrap(t),S.v.Animation.NO_ANIMATION)))))),u.getOrElse((()=>x.EMPTY)))))),x.switchMap(u.fold((()=>x.EMPTY),l.y)));return{id:"alignOnDisjointedAreas",when:v.R.isWithAlertsId,what:E.nL.Effect.Applicator.create(c.pipe(x.switchMapTo(x.NEVER)))}},e.createAlignOnResizeSideEffect=(e,t,r,i,n,a=C.b2.rafScheduler,o=k.Bk)=>{const l=e.view(E.nL.mapper((({currentLens:e,alertSource:t})=>u.some({currentLens:e,alertSource:t})))).view(u.filter((({currentLens:e})=>o(n)(e)))).view(u.chain((({currentLens:e,alertSource:t})=>(0,s.pipe)(i(e),u.filter(n.isValidToAlign),u.map((r=>({item:r,source:t,lensId:e.id}))))))),c=I.Qr.pipe(x.throttleTime(100),x.merge(r),x.withLatestFrom(l,((e,t)=>t)),x.switchMap(a),x.switchMap(u.fold((()=>x.EMPTY),(({item:e})=>t.alignCardToMark(e,S.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:v.R.isWithAlertsId,what:E.nL.Effect.Applicator.create(c.pipe(x.switchMapTo(x.NEVER)))}};let r;!function(e){e.skip="skip"}(r=e.SkipAlertActionSource||(e.SkipAlertActionSource={}));e.createAlignmentSideEffect=(e,t,r=((e,t)=>t),n,a,o,s,l=C.b2.rafScheduler)=>{const c=i(e,t,r,n,a,o,s,l);return{id:"alignmentSideEffect",when:v.R.isWithAlertsId,what:E.nL.Effect.Applicator.create(c.pipe(x.switchMapTo(x.EMPTY)))}};var i=e._createAlignmentSource=(e,t,i=((e,t)=>t),c,d,p,m,v=C.b2.rafScheduler,b=k.Bk)=>{const I=(0,g.Kg)(w.lY.isAlertMinicardButtonClick,w.lY.isSwitchToClosestByViewport,w.lY.isAlertCardShow,w.eI.isCardExpand,w.lY.isBulkAcceptItemShow,w.lY.isBulkHighlight),_=x.mergeStatic(e.pipe(x.map(E.nL.mapper((({currentLens:e,alertSource:t})=>u.some({currentLens:e,alertSource:t})))),x.startWith(u.none),x.map(u.map((e=>e.currentLens.id))),x.pairwise(),x.filter((([e,t])=>(0,s.pipe)(h.vB(((e,t)=>e!==t))(e,t),u.exists(l.y)))),x.mapTo(u.none)),e.pipe(x.map(E.nL.mapper((({currentLens:e,alertSource:t})=>u.some({currentLens:e,alertSource:t})))),x.filter(u.exists((({currentLens:e})=>b(d)(e)))),x.map(u.chain((({currentLens:e,alertSource:t})=>(0,s.pipe)(c(e),u.filter(d.isValidToAlign),u.map((r=>({item:r,source:t,lensId:e.id}))))))))).pipe(x.distinctUntilChanged((0,o.ls)(h.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),u.exists(l.y)))),T=t.pipe(x.filter(I),x.map(u.some),x.startWith(u.none),x.pairwise(),x.filter((0,o.ls)((0,o.og)(h.vB(((e,t)=>!w.lY.isAlertCardShow(t)||!w.lY.isAlertMinicardButtonClick(e)))),u.getOrElse(o.jv))),x.map((([,e])=>(0,s.pipe)(e,u.filter(w.lY.hasClickPoint)))),x.startWith(u.none)).pipe(x.switchMap((e=>_.pipe(x.filter(u.exists((e=>e.source===y.l$.sidebar))),x.map(u.chain((t=>u.some((0,a._)((0,n._)({},t),{clickPoint:(0,s.pipe)(e,u.map(f.ei("clickPoint")))}))))))))),M=_.pipe(x.filter(u.exists((e=>e.source!==y.l$.sidebar))),x.map((e=>(0,s.pipe)(e,u.chain((e=>u.some((0,a._)((0,n._)({},e),{clickPoint:u.none}))))))));return x.mergeStatic(T,M).pipe(x.startWith(u.none),x.pairwise(),x.map((([e,t])=>(0,s.pipe)(t,u.map((r=>({lensId:r.lensId,card:r.item,source:r.source,animate:(0,s.pipe)(e,h.wo((({lensId:e})=>e===r.lensId))),clickPoint:(0,s.pipe)(t,u.chain(f.ei("clickPoint")),u.map((0,o.ls)(f.ei("y"),A.r.FromWindowTop.ISO.wrap)))})))))),x.switchMap(u.fold((()=>x.EMPTY),v)),x.withLatestFrom(e),x.switchMap((([{card:e,source:t,animate:n,clickPoint:a,lensId:o},l])=>(0,s.pipe)(i(e,t),(t=>E.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&o===l.currentLens.id&&t!==r.skip?((e,t,r,i)=>{if(r===y.l$.text)return(0,s.pipe)(e,m({animation:t?S.v.Animation.ANIMATE_ALL:S.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(r===E.h8.forceText)return(0,s.pipe)(e,m({animation:S.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const n=r===y.l$.sidebar?t?S.v.Animation.ANIMATE_ALL:S.v.Animation.ANIMATE_MARK:S.v.Animation.NO_ANIMATION;return(0,s.pipe)(e,p({animation:n,suggestedPosition:i}))}})(e,n,t,a):x.NEVER)))))}}(P||(P={}))},69:(e,t,r)=>{r.d(t,{sU:()=>ie,dv:()=>re,Xx:()=>ue});var i={};r.r(i),r.d(i,{handleGbPrompt:()=>$,sendToIdeasGallery:()=>B,sendToSignIn:()=>O});var n,a=r(18775),o=r(50858),s=r(55818),l=r(11064),c=r(57050),d=r(40327),u=r(32952),p=r(23239),m=r(84966),h=r(5114),g=r(22232),f=r(83078),y=r(73975),v=r(55415),x=r(95195),b=r(8125),C=r(31668),I=r(71249);function S(e,t){return{map:function(r,i){return e.map(r,(function(e){return t.map(e,i)}))}}}function w(e){var t,r,i=(t=e,r=h.Applicative,{map:S(t,r).map,of:function(e){return t.of(r.of(e))},ap:function(e,i){return t.ap(t.map(e,(function(e){return function(t){return r.ap(e,t)}})),i)}}),n=e.of(h.none);return{map:i.map,ap:i.ap,of:i.of,chain:function(t,r){return e.chain(t,(0,h.fold)((function(){return n}),r))},alt:function(t,r){return e.chain(t,(0,h.fold)(r,(function(t){return e.of((0,h.some)(t))})))},fold:function(t,r,i){return e.chain(t,(0,h.fold)(r,i))},getOrElse:function(t,r){return e.chain(t,(0,h.fold)(r,e.of))},fromM:function(t){return e.map(t,h.some)},none:function(){return n}}}!function(e){var t,r=e.URI="IOOption",i=e.ioOption=(0,o._)({URI:r},w(l.io));t=(0,d.pipeable)(i),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond;e.of=i.of,e.fold=function(e,t){return function(r){return i.fold(r,e,t)}},e.fromM=i.fromM}(n||(n={}));var A,E=r(42040),_=r(46680),k=r(33678),T=r(74660),M=r(66896),N=r(19751),L=r(60797),D=r(9922),F=r(95983);!function(e){e.update=function(e,t,r){return e.update(t,r)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,r){return(0,d.pipe)(e.get(t),h.filter((e=>r(e.value))))},e.find=function(e,t){return e.find(t)}}(A||(A={}));var P=r(66268),R=r(25980);const O=(e,t)=>(0,c.ls)(N.filter((e=>e.type===P.lY.Type.toSignIn)),N.map((()=>r=>(e.actions.openUrl(new C.Z(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),r)))),B=(e,t)=>(0,c.ls)(N.filter(P.lY.isOpenIdeasGallery),N.tap((()=>e.actions.openPopup(new C.Z(t.ideas.galleryURL)))),N.switchMapTo(N.EMPTY)),$=(e,t,r)=>i=>N.mergeStatic((0,d.pipe)(i,N.filter(P.lY.isGbPromptShow),N.tap((e=>U(e,r))),N.switchMapTo(N.EMPTY)),(0,d.pipe)(i,N.filter(P.lY.isGbPromptApply),N.tap((i=>W(e,t,i,r))),N.switchMapTo(N.EMPTY)),(0,d.pipe)(i,N.filter(P.lY.isGbPromptCreateRule),N.tap((e=>z(e,r))),N.switchMapTo(N.EMPTY)),(0,d.pipe)(i,N.filter(P.lY.isGbPromptDismiss),N.tap((e=>G(e,r))),N.switchMapTo(N.EMPTY))),U=({patternName:e},t)=>t.onShow(e),W=(e,t,r,i)=>T.BY.isVox(r.gbPrompt)?j(e,t,r,i):V(e,t,r,i),z=(e,t)=>T.BY.isVox(e.gbPrompt)?Q(e,t):K(),G=(e,t)=>T.BY.isVox(e.gbPrompt)?ee(e,t):te(e,t),j=(e,t,r,i)=>"redirect"===r.gbPrompt.promptType?H(e,t,r,i):Y(),H=(e,t,{gbPrompt:{styleGuideId:r},source:i,target:n,patternName:a},o)=>{e.actions.openPopup(new C.Z(t.account.styleGuide).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",action:"createRule",source:i,target:n,styleGuideId:r})),o.onAccept(a)},Y=()=>{},V=(e,t,r,i)=>"redirect"===r.gbPrompt.promptType?Z(e,t,r,i):J(r,i),Z=(e,t,{gbPrompt:r,patternName:i},n)=>{e.actions.openPopup(new C.Z(t.account.writingStyle).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",categoryTitle:r.categoryTitle})),n.onAccept(i)},J=({patternName:e},t)=>t.onAccept(e),Q=(e,t)=>"redirect"===e.gbPrompt.promptType?q():X(e,t),q=()=>{},X=({patternName:e},t)=>t.onAccept(e),K=()=>{},ee=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e),te=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e);var re,ie,ne=r(17594),ae=r(26027),oe=r(20594),se=r(48521),le=r(16892),ce=r(35416),de=r(76201);!function(e){const t=(e,t,r,i)=>(0,d.pipe)(i((t=>(t.lensId===e.id||M.R.isMainLens(e.id))&&!T.bZ.isPremium(t)),"middleOfTheViewport"),h.fold((()=>N.EMPTY),(i=>(0,d.pipe)(r(e),h.filter((e=>e.activeAlert.id===i.alert.id)),h.fold((()=>N.of(i)),(e=>((e,r)=>(0,d.pipe)(t,h.map((t=>t.alignMarkToCard(e,R.v.Animation.ANIMATE_ALL,h.none).pipe(N.switchMapTo(N.EMPTY)))),h.getOrElse((()=>N.of(r)))))((0,c.MZ)(e),i)))))));e.changeAlertEffect=(e,r,i,n,a,o,s,l)=>({id:"changeAlertEffect",when:M.R.isWithAlertsId,what:ce.nL.Effect.SwitchAlert.create(r.actionEvents.pipe(N.switchMap((r=>{const c=e.get();if(!ce.nL.hasCards(c))return N.throwError(new g.ej("Cannot update state without cards"));switch(r.type){case P.lY.Type.alertMinicardButtonClick:return(0,d.pipe)(a.getRegistered(r.alertHighlight.alert.id),h.fold((()=>(l.error("somehow we got click on non registered alert",{alert:ne.$.snapshot(r.alertHighlight.alert),alertInRepo:(0,d.pipe)(a.getById(r.alertHighlight.alert.id),h.map(ne.$.fromModel),h.map(ne.$.snapshot)),state:ce.nL.snapshot(oe.Mq.snapshot,n)(c)}),N.EMPTY)),(()=>N.of(r.alertHighlight))));case P.lY.Type.cardMatchesNavigationButtonClick:const e=r.transitionTo;switch(e.kind){case"anotherAlert":return(0,d.pipe)("right"===r.direction?i.nextAlert(e.card):(0,d.pipe)(i.prevAlert(e.card),f.vx(i.anyRegisteredAlert(e.card))),h.fold((()=>N.EMPTY),(e=>N.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,d.pipe)(a.getRegistered(e.card.activeAlert.id),h.fold((()=>N.EMPTY),(()=>N.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,g.vE)(e)}case P.lY.Type.switchToClosestByViewport:return t(c.currentLens,o,n,s);default:return N.EMPTY}})),N.map((e=>({alertHighlight:e,alertSource:T.l$.sidebar,options:{order:"lensOrder"}})))))});e.createSendActiveAlertFeedbacksEffect=function(e,t,r,i,n){const a=e.pipe(N.map(ce.nL.getActiveAlert(t)),N.distinctUntilChanged(h.getEq(y.f7(((e,t)=>ne.$.eq.equals(e,t)&&e.patternName===t.patternName))).equals),N.map((0,c.ls)(h.map(v.ei("id")),h.chain(i.getValidForFeedback))),L.cp((e=>N.Observable.create((()=>((0,d.pipe)(i.getValidForFeedback(e.id),f.bw((()=>(0,d.pipe)(r.applyFeedback(e.id,{kind:m.PZ.LOOKED,subtype:m.e3.Sidebar},T.l$.sidebar),x.fold((e=>n.error("Failed to send LOOKED feedback",e)),b.Q1))))),()=>(0,d.pipe)(i.getValidForFeedback(e.id),f.bw((()=>(0,d.pipe)(r.applyFeedback(e.id,{kind:m.PZ.CLOSED,subtype:m.e3.Sidebar},T.l$.sidebar),x.fold((e=>n.error("Failed to send CLOSED feedback: ",e)),b.Q1)))))))))));return{id:"sendActiveAlertFeedbacksEffect",when:c.W8,what:ce.nL.Effect.Applicator.create(a.pipe(N.switchMapTo(N.NEVER)))}}}(re||(re={}));class ue{_applyStartVSChange(e,t){return t.reduce(((e,[t,r])=>(0,d.pipe)(A.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(r)(e))),x.fold((()=>e),c.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,r])=>(0,d.pipe)(e.items.get(t),h.map((({value:e})=>e)),h.fold((()=>e),(i=>se.o.isAnimatable(i)&&"removed"===i.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,d.pipe)(A.update(e.items,t,(e=>se.o.isAnimatable(e)&&e.visualState.transitionId===r?this._checksFeedCapabilities.completeTransition(r)(e):e)),x.fold((()=>e),(t=>de.v.Prism.items.set(t,e)))))))),e)}_handleSnippetsOpenExternalLink(){return this.actionEvents.pipe(N.filter(P.lY.isSnippetsOpenExternalLink)).subscribe((({externalLink:e})=>this._platformEnvironment.actions.openPopup(new C.Z(e))))}_updateToneAICard(e){return t=>(0,d.pipe)(e,x.chainW((({newAlert:e,itemId:r})=>A.update(t.currentLens.items,r,this._checksFeedCapabilities.updateWithAlerts([e])))),x.fold((e=>(this._log.error("Error updating card with ToneAI alert.",e),t)),(e=>ce.nL.Prism.getLens().compose(de.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(N.filter(P.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(N.filter(P.lY.isTakeawayDetectionFeedbackAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===P.lY.Type.takeawayCorrectlyDetected?T.TO.correctlyDetected:t===P.lY.Type.takeawayIncorrectlyDetected?T.TO.incorrectlyDetected:(0,g.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(N.filter(P.lY.isTakeawayAction)).subscribe((e=>{switch(e.type){case P.lY.Type.takeawayCorrectlyDetected:return e.isLikelyToBeRead?this._sendFeedback(e.alertId,{kind:m.PZ.ACKNOWLEDGED,text:e.takeawayText}):this._sendFeedback(e.alertId,{kind:m.PZ.ACCEPTED,replacementText:e.takeawayText});case P.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:m.PZ.IGNORE});case P.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:m.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?m.N_.likelyToBeReadTakeaway:m.N_.unlikelyToBeReadTakeaway});case P.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:m.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?m.N_.likelyToBeReadTakeaway:m.N_.unlikelyToBeReadTakeaway});default:(0,g.vE)(e)}}))}_handleEssayDetectionSetAcademicDomainAndCitationStyle(){return this.actionEvents.pipe(N.filter(P.Wh.isSetAcademicDomainAndCitationStyleAction)).subscribe((({citationStyle:e})=>{this._setDocumentCitationStyle(e)}))}_handleAlertResolve(){return this.actionEvents.pipe(N.filter(P.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:m.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(N.filter(P.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>{this._sendFeedback(e,{kind:m.PZ.IGNORE,reason:t})}))}_handleApplyFormSubmit(){return this.actionEvents.pipe(N.filter(P.lY.isAlertApplyFeedbackFormSubmit)).subscribe((e=>{this._applyAlert((0,s._)((0,o._)({},e.alertApplyActionProps),{reason:e.reason})),e.alertApplyActionProps.actionsToDispatchAfterSurvey&&e.alertApplyActionProps.actionsToDispatchAfterSurvey.forEach((e=>this.actionEvents.next(e)))}))}_handleGbPromptDismiss(){return this.actionEvents.pipe(N.filter(P.lY.isGbPromptDismiss)).subscribe((e=>this._applyAlert((0,s._)((0,o._)({},e.alertApplyActionProps),{gbPrompt:{feedback:m.Kd.DISMISSED,source:e.source,target:e.target,description:e.description}}))))}_handleGbPromptApply(){return this.actionEvents.pipe(N.filter(P.lY.isGbPromptApply)).subscribe((e=>this._applyAlert((0,s._)((0,o._)({},e.alertApplyActionProps),{gbPrompt:{feedback:m.Kd.ACCEPTED,source:e.source,target:e.target,description:e.description}}))))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(N.filter(P.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,d.pipe)(e.muteCategories([t.categoryId]),x.fold((e=>this._log.error("error calling categories model to commit muted category",e)),b.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(N.filter(P.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlert(e){return(0,d.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:T.l$.sidebar,feedbackSubtype:m.e3.Sidebar,drilldownSuggestionIds:e.drilldownSuggestionIds,reason:e.reason,gbPrompt:e.gbPrompt}),x.fold((e=>this._log.error("error calling alert service to apply an alert",e)),b.Q1))}_handleDrilldown(){return this.actionEvents.pipe(N.filter(P.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:m.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(N.filter(P.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,d.pipe)(this._alertsService.dismissBatch(e.alerts,m.e3.Sidebar),x.fold((e=>this._log.error("error calling alert service to dismiss alerts batch",e)),b.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(N.filter(P.lY.isOnboardingClose)).subscribe((e=>(0,d.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,d.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._toneAIChangeToneAlternative,"toneAIChangeToneAlternative"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this._shortenItDismissEdit,"shortenItDismissEdit"],[this.actionEvents.pipe(N.filter(P.lY.isNavigation),N.tap(this._navigationEvents),N.switchMapTo(N.EMPTY)),"navigationEvents"],...(0,d.pipe)(this._sendToUrl,h.getOrElse((0,c.a9)([]))),[this._showSurveyFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],I.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:M.R.isWithAlertsId,what:ce.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}constructor(e,t,r,i,n,l,p,y,v,C,I,S,w=new k.A,M={bufferTransitions:!0,showGbPrompt:!1},L=b.Q1){(0,a._)(this,"_ops",void 0),(0,a._)(this,"_navigationEvents",void 0),(0,a._)(this,"_cardFactory",void 0),(0,a._)(this,"_alertsService",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_markOnboardingAsSeen",void 0),(0,a._)(this,"_markMuteQuotedAdviceAsDismissed",void 0),(0,a._)(this,"_sendToUrlExperiment",void 0),(0,a._)(this,"_getActiveItemWithAlert",void 0),(0,a._)(this,"_checksFeedCapabilities",void 0),(0,a._)(this,"_platformEnvironment",void 0),(0,a._)(this,"_settings",void 0),(0,a._)(this,"_setDocumentCitationStyle",void 0),(0,a._)(this,"_log",void 0),(0,a._)(this,"_subs",void 0),(0,a._)(this,"_flushCompleteTransition",void 0),(0,a._)(this,"_flushPositionAnimation",void 0),(0,a._)(this,"actionEvents",void 0),(0,a._)(this,"completePositionAnimation",void 0),(0,a._)(this,"changePosition",void 0),(0,a._)(this,"_transitionBuffer",void 0),(0,a._)(this,"_positionAnimationBuffer",void 0),(0,a._)(this,"_startTransitionStateChanges",void 0),(0,a._)(this,"_completeTransitionStateChanges",void 0),(0,a._)(this,"_changePositionEffect",void 0),(0,a._)(this,"_transitionEndStateChanges",void 0),(0,a._)(this,"_switchToNextChanges",void 0),(0,a._)(this,"_dismissMuteQuotedAdvice",void 0),(0,a._)(this,"_changeUserInput",void 0),(0,a._)(this,"_shortenItDismissEdit",void 0),(0,a._)(this,"_focusChecksFeedItem",void 0),(0,a._)(this,"_collapseChecklistItem",void 0),(0,a._)(this,"_toneAIChangeToneAlternative",void 0),(0,a._)(this,"_synfonyDrilldown",void 0),(0,a._)(this,"_synfonyBack",void 0),(0,a._)(this,"_sendToUrl",void 0),(0,a._)(this,"_sendFeedback",void 0),(0,a._)(this,"_showSurveyForm",void 0),(0,a._)(this,"_showSurveyFormEffect",void 0),(0,a._)(this,"_showMutedAlertSuccessEffect",void 0),(0,a._)(this,"_undoMutedAlertEffect",void 0),(0,a._)(this,"_handleAlertIgnore",void 0),(0,a._)(this,"_handleApplyAlerts",void 0),(0,a._)(this,"hovered",void 0),(0,a._)(this,"flushTransitionTo",void 0),(0,a._)(this,"flushPositionAnimation",void 0),this._ops=e,this._navigationEvents=t,this._cardFactory=r,this._alertsService=i,this._alertsReader=n,this._markOnboardingAsSeen=l,this._markMuteQuotedAdviceAsDismissed=p,this._sendToUrlExperiment=v,this._getActiveItemWithAlert=I,this._checksFeedCapabilities=S,this._platformEnvironment=w,this._settings=M,this._setDocumentCitationStyle=L,this._log=E.C8.Logging.getLogger("CardsViewModelImpl",_.i.DEBUG),this._subs=new D.w.Keeper,this._flushCompleteTransition=new N.Subject,this._flushPositionAnimation=new N.Subject,this.actionEvents=new N.Subject,this.completePositionAnimation=new N.Subject,this.changePosition=new N.Subject,this._transitionBuffer=N.interval(100).pipe(N.startWith(0),N.merge(this._flushCompleteTransition)),this._positionAnimationBuffer=N.interval(100).pipe(N.startWith(0),N.merge(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(N.filter(P.eI.isStartTransitionTo),N.map((e=>t=>ie.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(N.filter(P.eI.isCompleteTransitionTo),this._settings.bufferTransitions?N.buffer(this._transitionBuffer):N.map((e=>[e])),N.filter(b.Dw),N.map((e=>t=>{const r=t.currentLens,i=this._applyCompleteVSChange(r,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(_.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:F.aW.diff(r.items,i.items)}),ce.nL.Prism.getLens().set(i,t)}))),this._changePositionEffect=this.changePosition.pipe(N.map((({id:e,height:t})=>r=>{const i=(0,d.pipe)(A.update(r.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(le.s.PositionState.changeHeight(e.positionState,t))(e))),x.fold((()=>r.currentLens.items),c.yR));return ie.itemsLens.set(i,r)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(N.buffer(this._positionAnimationBuffer),N.filter(b.Dw),N.map((e=>t=>{const r=t.currentLens.items,i=e.map((e=>[e,!1])).reduce(((e,[t,r])=>(0,d.pipe)(A.update(e,t,(e=>this._checksFeedCapabilities.changePosition(le.s.PositionState.changeAnimationInProgress(e.positionState,r))(e))),x.fold((()=>e),c.yR))),r);return ie.itemsLens.set(i,t)}))),this._switchToNextChanges=this.actionEvents.pipe(N.filter((e=>e.type===P.lY.Type.switchToNext)),N.map((()=>e=>e.patch({currentLens:(0,d.pipe)(ce.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):h.none,h.fold((()=>(0,d.pipe)(ce.nL.getActiveAlert(this._getActiveItemWithAlert)(e),h.fold((()=>{throw new g.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>ce.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:T.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(N.filter(P.lY.isDismissMuteQuotedAdvice),N.tap(this._markMuteQuotedAdviceAsDismissed),N.map((()=>e=>{const t=e.currentLens.items.filter((0,c.ls)(this._checksFeedCapabilities.hasActiveAlert,h.map((e=>e.alert)),h.exists(ne.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,d.pipe)(A.update(e,t,this._cardFactory.hideMuteQuotedAdvice),x.fold((()=>e),c.yR))),e.currentLens.items);return ie.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(N.filter(P.lY.isChangeUserInput),N.tap((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),N.map((({cardId:e,userInput:t})=>r=>{const i=(0,d.pipe)(r.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(Boolean(t)?h.some(t):h.none)),x.fold((()=>r.currentLens.items),c.yR));return ie.itemsLens.set(i,r)}))),this._shortenItDismissEdit=this.actionEvents.pipe(N.filter(P.ut.isDismissEdit),N.map((({alertId:e,group:t,itemId:r})=>i=>(0,d.pipe)(this._alertsService.dismissShortenItTransformGroup(e,t),x.map((e=>({newAlert:e,itemId:r}))),x.chainW((({newAlert:e,itemId:t})=>A.update(i.currentLens.items,t,this._checksFeedCapabilities.updateWithAlerts([e])))),x.fold((e=>(this._log.error("Error updating card/alert with dismissed transform groups.",e),i)),(e=>ie.itemsLens.set(e,i))))))),this._focusChecksFeedItem=this.actionEvents.pipe(N.filter(P.lY.isMiniItemClick),N.map((e=>t=>t.patch({currentLens:(0,d.pipe)(t.currentLens.items.find((t=>t.id===e.id)),h.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,c.MZ)((0,d.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:T.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(N.filter(P.lY.isChecklistItemCollapseButtonClick),N.map((()=>e=>e.patch({currentLens:ce.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:T.l$.sidebar})))),this._toneAIChangeToneAlternative=this.actionEvents.pipe(N.filter(P.lY.isToneAIChangeToneAlternativeAction),N.map((({itemId:e,alertId:t,selectedToneAlternativeIdx:r})=>(0,d.pipe)(this._alertsService.changeToneAIToneAlternative(t,r),x.map((t=>({newAlert:t,itemId:e})))))),N.map((e=>this._updateToneAICard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(N.filter(P.GM.isDrilldown),N.map((({cardId:e,wordIndex:t})=>r=>(0,d.pipe)(A.update(r.currentLens.items,e,(e=>{const r=e;return ae.X.changeSynfonySelection((0,d.pipe)(r.synfonySelection,h.getOrElse((()=>[])),(e=>h.some(e.concat([t])))))(r)})),x.fold((()=>r),(e=>ce.nL.Prism.getLens().compose(de.v.Prism.items).set(e,r))))))),this._synfonyBack=this.actionEvents.pipe(N.filter(P.GM.isBack),N.map((({cardId:e})=>t=>(0,d.pipe)(A.update(t.currentLens.items,e,(e=>{const t=e;return ae.X.changeSynfonySelection((0,d.pipe)(t.synfonySelection,h.map((e=>e.slice(0,-1)))))(t)})),x.fold((()=>t),(e=>ce.nL.Prism.getLens().compose(de.v.Prism.items).set(e,t))))))),this._sendToUrl=(0,d.pipe)(this._sendToUrlExperiment,h.map((e=>Object.entries(e).filter((([e])=>"handleGbPrompt"!==e||this._settings.showGbPrompt)).map((([e,t])=>[t(this.actionEvents),e]))))),this._sendFeedback=(e,t)=>(0,d.pipe)(e,h.fromPredicate(this._alertsReader.isValidForFeedback),f.bw((()=>(0,d.pipe)(this._alertsService.applyFeedback(e,(0,s._)((0,o._)({},t),{subtype:m.e3.Sidebar}),T.l$.sidebar),x.fold((e=>this._log.error("error calling alert service to send a feedback",e)),b.Q1))))),this._showSurveyForm=new u.xQ,this._showSurveyFormEffect=(0,d.pipe)(this._showSurveyForm,N.map((e=>t=>ie.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,"survey"===e.formType?(0,o._)({type:"feedback_form",formType:"survey",clockwise:!0,survey:e.survey},e.submitActionType===P.lY.Type.alertApplyFormSubmit?{submitActionType:P.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e.alertApplyActionProps}:{submitActionType:P.lY.Type.alertIgnoreFormSubmit}):{type:"feedback_form",formType:"gbPrompt",clockwise:!0,gbPrompt:e.gbPrompt,alertApplyActionProps:e.alertApplyActionProps}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(N.filter(P.lY.isMuteCategoryAction),N.map((e=>t=>ie.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(N.filter(P.lY.isUndoMuteCategoryAction),N.map((e=>t=>ie.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,c.ls)(pe((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:m.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(N.filter(P.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this._handleApplyAlerts=(0,c.ls)(pe((e=>()=>this._applyAlert(e)),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(N.filter(P.lY.isAlertApplyAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(N.filter(P.lY.isHoverAction),N.tap((()=>this._ops.flush())),N.scan(((e,t)=>"hover"===t.kind?h.some(t.id):(0,d.pipe)(e,h.filter((e=>e!==t.id)))),h.none),N.share()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleApplyFormSubmit(),this._handleGbPromptDismiss(),this._handleGbPromptApply(),this._handleAlertIgnore(C),this._handleAlertResolve(),this._handleApplyAlerts(C),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleDrilldown(),this._handleSnippetsOpenExternalLink(),this._handleEssayDetectionSetAcademicDomainAndCitationStyle()),(0,d.pipe)(y,f.bw((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}}!function(e){e.itemsLens=ce.nL.Prism.getLens().compose(de.v.Prism.items);e.Mock=class{constructor(){(0,a._)(this,"animate",p.h.create(!0)),(0,a._)(this,"clockwise",p.h.create(!0)),(0,a._)(this,"toggleAnimations",(()=>this.animate.modify((e=>!e)))),(0,a._)(this,"completePositionAnimation",new N.Subject),(0,a._)(this,"actionEvents",new N.Subject),(0,a._)(this,"flushTransitionTo",b.Q1),(0,a._)(this,"sideEffect",{id:"cardsViewModelMock",when:M.R.isWithAlertsId,what:ce.nL.Effect.Applicator.create(N.EMPTY)}),(0,a._)(this,"changePosition",new N.Subject),(0,a._)(this,"dispose",b.Q1)}};e.Experiments=i}(ie||(ie={}));const pe=(e,t,r)=>i=>a=>(0,d.pipe)(me(a,r),l.of,n.chain((e=>(0,d.pipe)(i,l.UI((t=>t?h.none:h.some(e)))))),n.fold((()=>e(a)),(e=>t(e)))),me=(e,t)=>P.lY.isAlertApplyAction(e)?he(e,t):ge(e),he=(e,t)=>(0,d.pipe)(e.eligibleForGbPrompt,h.filter((0,c.a9)(t)),h.map((t=>({id:e.id,formType:"gbPrompt",alertApplyActionProps:e,gbPrompt:t}))),f.vx((0,d.pipe)(e.eligibleForSurvey,h.map((t=>({id:e.id,formType:"survey",submitActionType:P.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e,survey:t})))))),ge=e=>(0,d.pipe)(e.eligibleForSurvey,h.map((t=>({id:e.id,formType:"survey",submitActionType:P.lY.Type.alertIgnoreFormSubmit,survey:t}))))},92485:(e,t,r)=>{r.d(t,{$y:()=>j});var i,n=r(50858),a=r(55818),o=r(71249),s=r(57050),l=r(40327),c=r(36991),d=r(67394),u=r(95195),p=r(5114),m=r(26328),h=r(74660),g=r(22232),f=r(18775),y=r(84966),v=r(95574),x=r(98637);function b(e,{text:t,ops:r}){r.reduce(((t,r,i)=>d.JU.isInsertString(r)?(e.insertString(r.insert,r,i),t):d.JU.isInsertGap(r)?(e.insertGap("",r,i),t):d.JU.isInsert(r)?t:d.JU.isDelete(r)?(e.remove(t.slice(0,r.delete),r,i),t.slice(r.delete)):d.JU.isRetain(r)?(e.retain(t.slice(0,r.retain),r,i),t.slice(r.retain)):(0,g.vE)(r)),t)}function C(e){return 0===e.replace(/ /g,"").length}function I(e,t){(0,l.pipe)(e,o.Z$,p.fold((()=>{C(t.text)||e.push(t)}),(r=>{r.type===t.type?r.text+=t.text:e.push(t)})))}function S(e){return!0===e.italic?!0===e.bold?"boldItalic":"italic":!0===e.bold?"bold":void 0}function w(e){const{substitutions:t,longestSubstitution:r,inserts:n}=e.reduce(((e,[t,r])=>{const i=t.map((e=>e.text)).join("");return e.substitutions.push(i),e.inserts.push(r),i.length>e.longestSubstitution.length&&(e.longestSubstitution=i),e}),{substitutions:[],inserts:[],longestSubstitution:""}),a=(0,l.pipe)(t,m.UI((e=>r.split(e).join(""))));return(0,l.pipe)(o.yL(n,a,((e,t)=>(t&&e.push({type:x.GP.Text,text:t,shouldBeCollapsed:!1}),e))),m.nI,u.fromOption((()=>new Error("Substitution processing error"))),u.map((e=>({type:i.Type.Substitution,remove:[{type:x.GP.Delete,text:r,shouldBeCollapsed:!1}],inserts:e}))))}function A(e){return(0,l.pipe)(v.vM((()=>(0,l.pipe)(e,m.UI((t=>{const r=[[],[]];return b({insertString(e){I(r[1],{type:x.GP.Insert,text:"\n"===e?" ":e,shouldBeCollapsed:!1})},insertGap(){throw new N("Substitution transform contains gap insert",e)},remove(e){I(r[0],{type:x.GP.Delete,text:e,shouldBeCollapsed:!1})},retain(e,{type:t,attributes:i}){if(!d.JU.isOptionalType(t)||0!==r[0].length){const t={type:x.GP.Text,text:e,style:S(i),shouldBeCollapsed:!1};r[0].push(t),r[1].push(t)}}},t),(0,g.kG)(r[0].length>0,"Substituted part is empty"),(0,g.kG)(r[1].length>0,"Inserts are empty"),r}))))),u.chain(w),u.mapLeft(N.fromError(e)))}function E(e){if(!("list"in e))return p.none;switch(e.list){case"bullet":case"dashed":case"ordered":return p.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return p.none}}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.ShortenIt=7]="ShortenIt",e[e.ToneAI=8]="ToneAI",e[e.Citation=9]="Citation",e[e.WritingExpert=10]="WritingExpert"}(t=e.Type||(e.Type={})),(t=e.Type||(e.Type={})).parse=function(e,r){const i=e[0];if(i.isFullSentence)return t.FullSentence;if(p.isSome(r.drilldown))return t.Drilldown;if(i.isCitation)return t.Citation;if(i.isShortenIt)return t.ShortenIt;if(i.isToneAI)return t.ToneAI;if(i.isWritingExpert)return t.WritingExpert;switch(i.type){case d.r3.Type.Insert:return t.Insert;case d.r3.Type.Remove:return e.length>1?t.RemoveOr:t.Remove;case d.r3.Type.Substitution:return i.ops.find(d.JU.isInsertGap)?t.OneGap:t.Substitution;default:return(0,g.vE)(i.type)}},e.create=function(e){return t=>{const r=i.Type.parse(t,e);switch(r){case i.Type.Remove:return function(e,t){return(0,l.pipe)(v.vM((()=>(0,l.pipe)(e,m.UI((r=>{const i=[];return b({insertString(t,{type:r}){if(r===d.JU.Type.Main)throw new N("Remove transform contains main insert",e)},insertGap(){throw new N("Remove transform contains gap insert",e)},retain(e,{type:t,attributes:r}){d.JU.isOptionalType(t)||I(i,{type:x.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1})},remove(e,{type:r}){I(i,{type:r!==d.JU.Type.Main||C(e)&&t?x.GP.Text:x.GP.Delete,text:e,shouldBeCollapsed:!1})}},r),i})),o.xH))),u.chain((0,s.ls)(u.fromPredicate((e=>e.length>0),(()=>new N("Remove transform contains no data",e))),u.map((e=>({type:i.Type.Remove,remove:e}))))))}(t,e.ignoreWhitespaceRemoves);case i.Type.RemoveOr:return function(e,t){return(0,l.pipe)(v.vM((()=>(0,l.pipe)(e,m.UI((r=>{const i=[];return b({insertString(t,{type:r}){if(r===d.JU.Type.Main)throw new N("Multi-remove transform contains main insert",e)},insertGap(){throw new N("Multi-remove transform contains gap insert",e)},retain(e,{type:t,attributes:r}){d.JU.isOptionalType(t)||I(i,{type:x.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1})},remove(e,{type:r}){I(i,{type:r!==d.JU.Type.Main||C(e)&&t?x.GP.Text:x.GP.Delete,text:e,shouldBeCollapsed:!1})}},r),i}))))),u.chain((0,s.ls)(u.fromPredicate((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new N("Incomplete multi-remove",e))),u.map((e=>({type:i.Type.RemoveOr,removes:e}))))))}(t,e.ignoreWhitespaceRemoves);case i.Type.Insert:return function(e){return(0,l.pipe)(v.vM((()=>(0,l.pipe)(e,m.UI((t=>{const r=[];return b({insertString(e,{type:t}){I(r,{type:d.JU.isOptionalType(t)?x.GP.Text:x.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new N("Insert transform contains gap insert",e)},retain(e,{type:t,attributes:i}){(!d.JU.isOptionalType(t)||r.length>0)&&I(r,{type:x.GP.Text,text:e,style:S(i),shouldBeCollapsed:!1})},remove(t,{type:r}){if(r===d.JU.Type.Main)throw new N("Insert transform contains main delete",e)}},t),r}))))),u.chain((0,s.ls)(m.nI,u.fromOption((()=>new N("Incomplete insert",e))),u.map((e=>({type:i.Type.Insert,inserts:e}))))))}(t);case i.Type.Substitution:return A(t);case i.Type.Drilldown:return function(e,t){return(0,l.pipe)(A(e),u.chain((r=>(0,l.pipe)(v.vM((()=>{(0,g.kG)(t.length>0,"Drilldown transform - empty drilldown tree");return{inserts:(0,l.pipe)(t,m.UI(e)),remove:r.remove,type:i.Type.Drilldown};function e([t,i]){return(0,g.kG)(void 0!==r.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:r.inserts[t],subLabels:i.map(e)}}})),u.mapLeft(N.fromError(e))))))}(t,(0,l.pipe)(e.drilldown,p.getOrElse((()=>y.H5.empty))));case i.Type.FullSentence:return function(e){return(0,l.pipe)(e,u.fromPredicate((e=>1===e.length),(()=>new N("Expected full-sentence transform to have 1 alternative",e))),u.map((0,s.ls)(m.YM,(t=>{let r={blockStart:0,ops:[],kind:x._k.PlainText};return b({insertString(e,t){const i=e.split("\n");if(1===i.length)r.ops.push({type:x.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,l.pipe)(t.attributes,E,p.fold((()=>s.Q1),(({kind:e,indent:t})=>()=>{r.ops.splice(r.blockStart,1,{type:x.GP.List,kind:e,indent:t}),r={kind:x._k.WithFormatting,ops:r.ops,blockStart:r.blockStart}})));for(let t=0,n=i.length-1;t<=n;t++){const a=i[t];a&&r.ops.push({type:x.GP.Insert,text:a,shouldBeCollapsed:!1}),t<n&&(e(),r.blockStart=r.ops.length,r.ops.push({type:x.GP.Insert,text:"\n",shouldBeCollapsed:!1}))}}},insertGap(){throw new N("Full sentence transform contains gap insert",e)},retain(e,t){r.ops.push({type:x.GP.Text,text:e,shouldBeCollapsed:_(t.type,e)})},remove(e,t){r.ops.push({type:x.GP.Delete,text:e,shouldBeCollapsed:_(t.type,e)})}},t),r}))),u.chain((0,s.ls)(p.fromPredicate((e=>e.ops.length>0)),u.fromOption((()=>new N("Got empty full sentence transform",e))),u.map((({ops:e,kind:t})=>({type:i.Type.FullSentence,ops:e,kind:t}))))))}(t);case i.Type.OneGap:return function(e){return(0,l.pipe)(v.vM((()=>((0,g.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,l.pipe)(e,m.YM,(e=>{const t=[],r=[];let i=!1;return b({insertString(e,{type:n}){I(i?r:t,{type:d.JU.isOptionalType(n)?x.GP.Text:x.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){(0,g.kG)(!i,"One gap transform does not contain exactly one gap insert"),i=!0},retain(e,{type:n}){const a=i?r:t;(!d.JU.isOptionalType(n)||a.length>0)&&I(a,{type:x.GP.Text,text:e,shouldBeCollapsed:!1})},remove:s.Q1},e),(0,g.kG)(i,"One gap transform does not contain exactly one gap insert"),(0,g.kG)(t.length>0||r.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:r}}))))),u.bimap(N.fromError(e),(({left:e,right:t})=>({type:i.Type.OneGap,left:e,right:t}))))}(t);case i.Type.ShortenIt:return function(e){return(0,l.pipe)(e,u.fromPredicate((e=>1===e.length),(()=>new N("Expected shorten-it transform to have 1 alternative",e))),u.chain(m.fw(u.either)(k)),u.map(m.YM),u.map((e=>({type:i.Type.ShortenIt,ops:e}))))}(t);case i.Type.ToneAI:return function(e){return(0,l.pipe)(v.vM((()=>(0,l.pipe)(e,m.UI((t=>{const r=[];return b({insertString(e){I(r,{type:x.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new N("ToneAI transform should not include gap insert",e)},retain(e){I(r,{type:x.GP.Text,text:e,shouldBeCollapsed:!1})},remove(e){I(r,{type:x.GP.Delete,text:e,shouldBeCollapsed:!1})}},t),r}))))),u.chain((0,s.ls)(m.nI,u.fromOption((()=>new N("Incomplete ToneAI transform",e))),u.map((e=>({type:i.Type.ToneAI,transformParts:e}))))))}(t);case i.Type.Citation:return function(e){return(0,l.pipe)(e,u.fromPredicate((e=>1===e.length),(()=>new N("Expected citation transform to have 1 alternative",e))),u.map(m.YM),u.chain(u.fromPredicate((e=>e.isCitation),(()=>new N("Expected citation to have isCitation set to true",e)))),u.chain(T),u.map((e=>({ops:e,type:i.Type.Citation}))))}(t);case i.Type.WritingExpert:return function(e){return(0,l.pipe)(e,u.fromPredicate((e=>1===e.length),(()=>new N("Expected citation transform to have 1 alternative",e))),u.map(m.YM),u.chain(u.fromPredicate((e=>e.isWritingExpert),(()=>new N("Expected citation to have isWritingExpert set to true",e)))),u.chain(M),u.map((e=>({ops:e,type:i.Type.WritingExpert}))))}(t);default:return(0,g.vE)(r)}}}}(i||(i={}));const _=(e,t)=>e===d.JU.Type.Optional&&t.length>3;function k(e){const t=[];return b({insertString(e,{group:r}){t.push({type:x.GP.Insert,text:e,group:r,shouldBeCollapsed:!1})},insertGap(){throw new N("ShortenIt transform contains gap insert",[e])},retain(e,{group:r}){t.push({type:x.GP.Text,text:e,group:r,shouldBeCollapsed:!1})},remove(e,{group:r}){t.push({type:x.GP.Delete,text:e,shouldBeCollapsed:!0,group:r})}},e),(0,l.pipe)(t,u.fromPredicate((e=>e.length>0),(()=>new N("Got empty ShortenIt transform",[e]))))}function T(e){const t=[];return b({insertString(e){t.push({type:x.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new N("Citation transform contains gap insert",[e])},retain(e,{attributes:r}){t.push({type:x.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1})},remove(e){t.push({type:x.GP.Delete,text:e,shouldBeCollapsed:!1})}},e),(0,l.pipe)(t,u.fromPredicate((e=>e.length>0),(()=>new N("Got empty Citation transform",[e]))))}function M(e){const t=[];return b({insertString:e=>{t.push({type:x.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap:()=>{throw new N("Citation transform contains gap insert",[e])},retain:(e,{attributes:r})=>{t.push({type:x.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1})},remove:s.Q1},e),(0,l.pipe)(t,u.fromPredicate((e=>e.length>0),(()=>new N("Got empty Citation transform",[e]))))}class N extends g.sH{static fromError(e){return t=>{const r=new N(t.message,e);return r.stack=t.stack,r}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(d.JU.anonymize)))}`}constructor(e,t){super(e),(0,f._)(this,"alternatives",void 0),this.alternatives=t}}var L=r(8125),D=r(42040);const F=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,g.kG)((0,L.Dw)(e),"transforms should have at least one element");const[r]=e;return P(r)>-1?x.nV.create(R(r),e.map(O),t,!0):x.zE.create(e,t)}(e.content.map((e=>[{type:x.GP.Insert,text:e,shouldBeCollapsed:!1}])),t);case"transform":return function(e,t){(0,g.kG)((0,L.Dw)(e),"transforms should have at least one element");const[r]=e;return P(r)>-1?x.nV.create(R(r),e.map(O),t):function(e){return 2===e.length&&$(e)}(e)?x.fi.create(e[0],e[1],t):$(e)?x.zE.create(e,t):x.n6.create(e,t)}(e.content.map(z),t);default:return(0,g.vE)(e.kind)}};function P(e){return e.findIndex((e=>"arrow"===e.type))}function R(e){return e.slice(0,P(e))}function O(e){return e.slice(P(e)+1)}function B(e){return e.every((e=>"delete"!==e.type))}function $(e){return e.every(B)}function U(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const W=[U("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:x.GP.Delete,text:e[2],shouldBeCollapsed:!1}))),U("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:x.GP.Insert,text:e[2],shouldBeCollapsed:!1}))),U("()",(e=>({type:x.GP.Arrow}))),U("([^<>]+)",(e=>({type:x.GP.Text,text:e[1],shouldBeCollapsed:!1})))];function z(e){function t(e){for(const t of W){const r=e.match(t.re);if(null!==r)return[t.createResult(r),r[r.length-1]]}}function r(t){let r=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>",""].map((e=>t.indexOf(e)));if(r.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(r=r.filter((e=>e>0)),(0,L.Dw)(r)){const e=Math.min(...r);return[{type:x.GP.Text,text:t.substring(0,e),shouldBeCollapsed:!1},t.substring(e)]}return[{type:x.GP.Text,text:t,shouldBeCollapsed:!1},""]}const i=[];let n,a=e,o=!1,s=0;for(;(0,L.Dw)(a);){const e=t(a);void 0===e&&(o=!0);const[l,c]=e||r(a);n&&n.type===x.GP.Text&&l.type===x.GP.Text?n.text+=l.text:(n&&n.type===x.GP.Delete&&l.type===x.GP.Insert&&(i.push({type:x.GP.Arrow}),s++),i.push(l)),l.type===x.GP.Arrow&&s++,n=i[i.length-1],a=c}return(o||!(0,L.Dw)(i)||s>1)&&D.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:i.length,arrowCount:s}),i}const G={ignoreWhitespaceRemoves:!0},j=(0,s.ls)((function(e,t=G){return r=>(0,l.pipe)(r.alternatives,H(e,{isFullSentence:h.eT.isFullSentence(r.cardType),isShortenIt:h.eT.isShortenIt(r.cardType),isToneAI:h.eT.isToneAI(r.cardType),isCitation:h.eT.isCitation(r.cardType),isWritingExpert:h.eT.isWritingExpert(r.cardType)}),u.chain(i.create((0,a._)((0,n._)({},t),{drilldown:r.drilldown}))))}),(e=>t=>(0,l.pipe)(t.content,u.fold((e=>u.right(F(e,t.todo))),(0,s.ls)(e,u.bimap((e=>({kind:"default",error:e})),(e=>function(e,t){switch(e.type){case i.Type.Drilldown:return x.ey.create(e.remove,e.inserts,t);case i.Type.Substitution:return x.nV.create(e.remove,e.inserts,t);case i.Type.Insert:return 2===e.inserts.length?x.fi.create(e.inserts[0],e.inserts[1],t):x.zE.create(e.inserts,t);case i.Type.Remove:return x.n6.create([e.remove],t);case i.Type.RemoveOr:return x.fz.create(e.removes,t);case i.Type.FullSentence:return function(e,t){switch(e.kind){case x._k.WithFormatting:return x.i3.createWithFormatting(e.ops,t);case x._k.PlainText:return x.i3.createPlainText(e.ops,t);default:return(0,g.vE)(e)}}(e,t);case i.Type.Citation:return function(e,t){return{type:x.b$.Type.Citation,tooltipText:t,labels:e.ops}}(e,t);case i.Type.OneGap:return x.G7.create(e,t);case i.Type.ShortenIt:return function(e,t){return{type:x.b$.Type.ShortenIt,tooltipText:t,labels:e.ops}}(e,t);case i.Type.ToneAI:return function(e,t){return{type:x.b$.Type.ToneAI,tooltipText:t,labels:e.transformParts}}(e,t);case i.Type.WritingExpert:return function(e,t){return{type:x.b$.Type.WritingExpert,tooltipText:t,labels:e.ops}}(e,t);default:return(0,g.vE)(e)}}(e,t.todo))))))));function H(e,t){const r=(e=>(0,s.ls)(e,(e=>e.delta.reduce(((e,t)=>c.s.isInsertString(t)?e+t.insert:e),""))))(e);return(0,s.ls)(function(e,{isFullSentence:t,isShortenIt:r,isToneAI:i,isCitation:n,isWritingExpert:a}){return s=>(0,l.pipe)(s,o.DZ((o=>(0,l.pipe)(o.type,p.map((s=>{if(d.r3.hasOptionalContext(o.ops)){const[l,...c]=o.ops,u=d.JU.length(l);return{text:e(u,o.lengthAffected-u),ops:c,type:s,isFullSentence:t,isShortenIt:r,isToneAI:i,isCitation:n,isWritingExpert:a}}return{text:e(0,o.lengthAffected),ops:o.ops,type:s,isFullSentence:t,isShortenIt:r,isToneAI:i,isCitation:n,isWritingExpert:a}}))))),m.nI)}(r,t),u.fromOption((()=>new Error("Alternative array is empty"))))}},98637:(e,t,r)=>{r.d(t,{G7:()=>m,GP:()=>i,_k:()=>u,b$:()=>n,ey:()=>c,fi:()=>l,fz:()=>s,i3:()=>p,n6:()=>o,nV:()=>d,zE:()=>a});var i,n,a,o,s,l,c,d,u,p,m,h=r(50858),g=r(55818),f=r(57050),y=r(73975),v=r(8125);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(i||(i={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt",e[e.ToneAI=9]="ToneAI",e[e.Citation=10]="Citation",e[e.WritingExpert=11]="WritingExpert"}(t=e.Type||(e.Type={}));e.eq=y.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels)));let r;!function(e){e.eq=y.Uz((e=>JSON.stringify(e.labels)))(y.yv)}(r=e.ShortenIt||(e.ShortenIt={}));e.isFullSentence=e=>e.type===n.Type.FullSentence,e.isOneGap=e=>e.type===n.Type.OneGap,e.isShortenIt=e=>e.type===n.Type.ShortenIt,e.isToneAI=e=>e.type===n.Type.ToneAI,e.isRegular=e=>(0,f.ff)((0,v.Kg)(n.isFullSentence,n.isOneGap,n.isShortenIt,n.isToneAI))(e)}(n||(n={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:n.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:n.Type.DeleteList})}(o||(o={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:n.Type.DeleteOr})}(s||(s={})),function(e){e.create=(e,t,r)=>({type:n.Type.InsertOr,labels:[e,t],tooltipText:r})}(l||(l={})),function(e){e.create=function(e,t,r){return{type:n.Type.Drilldown,original:e,labels:t,tooltipText:r}};e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const r=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:r.subLabels,original:r.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(v.Sm,0)>30}e.create=function(e,r,i,a){return{type:n.Type.Arrow,original:e,labels:r,tooltipText:i,onlyReplacements:!0===a||t(e,r[0])}}}(d||(d={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(u||(u={})),function(e){e.createPlainText=function(e,t){return{type:n.Type.FullSentence,labels:e,tooltipText:t,kind:u.PlainText}},e.createWithFormatting=function(e,t){return{type:n.Type.FullSentence,labels:e,tooltipText:t,kind:u.WithFormatting}}}(p||(p={})),function(e){e.create=function(e,t){return{type:n.Type.OneGap,labels:{left:e.left.map((e=>(0,g._)((0,h._)({},e),{type:i.Text}))),right:e.right.map((e=>(0,g._)((0,h._)({},e),{type:i.Text})))},tooltipText:t}}}(m||(m={}))},26027:(e,t,r)=>{r.d(t,{X:()=>w});var i=r(18775),n=r(50858),a=r(55818),o=r(35214),s=r(57050),l=r(40327),c=r(5114),d=r(22232),u=r(95195),p=r(45701),m=r(73975),h=r(8125),g=r(42040),f=r(74660),y=r(19751),v=r(36156),x=r(98637),b=r(17594),C=r(55567),I=r(77610),S=r(4890);class w{get activeAlertRemoved(){return I.i.activeAlertRemoved(this)}get scheduledToDispose(){return I.i.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return w.hashCode(this)}equals(e){return w.eq.equals(this,e)}toJSON(){return(0,a._)((0,n._)({},this),{renderOptions:S.j.toJSON(this.renderOptions)})}constructor(e,t,r,n,a,o,s,d,u,p,m,h,g,f,y,v){(0,i._)(this,"id",void 0),(0,i._)(this,"alerts",void 0),(0,i._)(this,"activeAlertIndex",void 0),(0,i._)(this,"activeHighlightIndex",void 0),(0,i._)(this,"positionState",void 0),(0,i._)(this,"visualState",void 0),(0,i._)(this,"meta",void 0),(0,i._)(this,"lensId",void 0),(0,i._)(this,"renderOptions",void 0),(0,i._)(this,"muteCategory",void 0),(0,i._)(this,"order",void 0),(0,i._)(this,"initialAlertId",void 0),(0,i._)(this,"removedAlertsIds",void 0),(0,i._)(this,"cachedTransform",void 0),(0,i._)(this,"userInput",void 0),(0,i._)(this,"synfonySelection",void 0),(0,i._)(this,"kind",void 0),(0,i._)(this,"activeAlert",void 0),(0,i._)(this,"transform",void 0),this.id=e,this.alerts=t,this.activeAlertIndex=r,this.activeHighlightIndex=n,this.positionState=a,this.visualState=o,this.meta=s,this.lensId=d,this.renderOptions=u,this.muteCategory=p,this.order=m,this.initialAlertId=h,this.removedAlertsIds=g,this.cachedTransform=f,this.userInput=y,this.synfonySelection=v,this.kind=w.Kind,this.activeAlert=I.i.getActiveAlert(this),this.transform=(0,l.pipe)(this.cachedTransform,c.map((e=>e.labels)))}}!function(e){e.Kind="AlertCard",e.isPriority=e=>b.$.isPriority(e.activeAlert),e.updateAlerts=(e,t,r,i)=>n=>new w(n.id,e,r,i,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,t,n.cachedTransform,n.userInput,n.synfonySelection),e.updateUserInput=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,e,t.synfonySelection),e.changeVisualState=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,e,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changePosition=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,e,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeMeta=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,e,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeTransform=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,e,t.userInput,t.synfonySelection),e.changeSynfonySelection=e=>t=>new w(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,e),e.canHydrate=e=>!(e.meta.checking!==C.n.CheckingState.Idle||I.i.activeAlertRemoved(e));let t,r;function i(e){return e.activeAlert.alertType===f.bZ.Type.Synfony}function n(e){return e.activeAlert.type===b.$.Type.default||a(e)}function a(e){return e.activeAlert.type===b.$.Type.writingExpertVbar||e.activeAlert.type===b.$.Type.writingExpertWithTeaser}e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(r,i)=>n=>{const a=new Set(r.map((e=>e.id)));return I.i.hasAnyOfAlerts(a)(n)?e.remove(n,[n.activeAlert],(0,l.pipe)(i,c.map((e=>t.compare(n,e)>0)),c.getOrElse(s.W8))):n};e.getChangePosition=function(e){return{changePosition:t=>r=>e.changePosition(r,t)}},e.getAnimatable=function(e){return{completeTransition:t=>r=>e.completeTransition(r,t),transitionTo:t=>r=>e.transitionTo(r,t),changeVisualState:t=>r=>e.changeVisualState(r,t)}},e.getRemove=function(e){return{remove:(t,r)=>i=>t(i)?e.remove(i,[i.activeAlert],r(i)):i}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>r=>e.updateWith(r,t)}},e.getSelect=function(e){return{select:(t,r)=>i=>e.selectFirstAlert(i,t,r),selectByAlert:(t,r,i)=>n=>e.select(n,r,t,i),unselect:(t,r)=>i=>e.unselect(i,t,r)}},e.getCloneable=function(){return{clone:e=>new w(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(r=e.Type||(e.Type={})),(0,d.L0)(null),e.isSynfonyView=i,e.isDefaultView=n,e.isWritingExpertView=a,e.match=function(e){return t=>{if(function(e){return e.activeAlert.type===b.$.Type.super}(t))return u.right(e.super(t));if(function(e){return e.activeAlert.type===b.$.Type.takeaway}(t))return u.right(e.takeaway(t));if(i(t))return u.right(e.synfony(t));if(function(e){return e.activeAlert.type===b.$.Type.shortenIt}(t))return u.right(e.shortenIt(t));if(function(e){return e.activeAlert.type===b.$.Type.toneAI}(t))return u.right(e.toneAI(t));if(function(e){return e.activeAlert.type===b.$.Type.ethicalAI}(t))return u.right(e.ethicalAI(t));if(function(e){return e.activeAlert.type===b.$.Type.suggestedSnippet}(t))return u.right(e.suggestedSnippet(t));if(function(e){return e.activeAlert.type===b.$.Type.knowledgeHubSuggestedTerm}(t))return u.right(e.knowledgeHubSuggestedTerm(t));if(n(t))return u.right(e.default(t));const r={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return u.left(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(r,null,2)}]`))}};e.eq=I.i.eq,e.hashCode=e=>(0,v.NO)({itemHashCode:I.i.hashCode(e),synfonySelection:(0,l.pipe)(e.synfonySelection,c.getOrElse((()=>[])),(e=>e.join(",")))});const S=p.getMonoid();e.ord=(0,o.fold)(S)([(0,l.pipe)(p.ordNumber,p.contramap((e=>e.order))),(0,l.pipe)(p.ordString,p.contramap((e=>e.initialAlertId)))]);let A;function E(e){return e.activeAlert.gbPrompt}e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,l.pipe)(e.from,c.exists((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=m.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(A=e.Transition||(e.Transition={})),e.hasTransform=function(e){return c.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return(f.eT.isFullSentence(e.activeAlert.extraProperties.cardType)||f.eT.isWritingExpert(e.activeAlert.extraProperties.cardType))&&(0,l.pipe)(e.transform,c.exists(x.b$.isFullSentence))},e.hasWritingExpertTransform=function(e){return f.eT.isWritingExpert(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,l.pipe)(e.transform,c.exists(x.b$.isOneGap))},e.hasSynfonyTransform=function(e){return f.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.hasCitationTransform=function(e){return f.eT.isCitation(e.activeAlert.extraProperties.cardType)},e.isCitationDetectionCard=function(e){return f.eT.isCitationDetection(e.activeAlert.extraProperties.cardType)},e.isTakeaway=function(e){return b.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return f.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.isEligibleForAcceptSurvey=function(e){return e.activeAlert.acceptSurvey},e.isEligibleForGbPrompt=E,e.hasGbPrompt=function(e){return(0,l.pipe)(E(e),c.exists(Boolean))},e.hasBackgroundGbPrompt=function(e){return(0,l.pipe)(E(e),c.exists((({promptType:e})=>"background"===e)))},e.hasRedirectGbPrompt=function(e){return(0,l.pipe)(E(e),c.exists((({promptType:e})=>"redirect"===e)))},e.miniTitle=function(e,t){return b.$.isTakeaway(e.activeAlert)&&c.isNone(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle};e.useCardStates=e=>({isChecking:e.pipe(y.map((e=>e.meta.checking===C.n.CheckingState.Checking)),y.distinctUntilChanged(),y.shareReplay({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(y.map((e=>e.meta.checking===C.n.CheckingState.Full)),y.distinctUntilChanged(),y.shareReplay({bufferSize:1,refCount:!0})),transform:e.pipe(y.map((({transform:e})=>e)),y.filter(c.isSome),y.skipBy(c.getEq(x.b$.eq)))}),e.foldCard=u.getOrElse((e=>(_("CardComponent").error("Got an unexpected card type",e),null)));const _=(0,h.HP)(g.C8.Logging.getLogger)}(w||(w={}))},55567:(e,t,r)=>{r.d(t,{n:()=>i});var i,n=r(18775),a=r(37539),o=r(36156);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class r{equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,o.NO)({percentile:a.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}constructor(e,t,r,i,a){(0,n._)(this,"percentile",void 0),(0,n._)(this,"explanation",void 0),(0,n._)(this,"checking",void 0),(0,n._)(this,"ranges",void 0),(0,n._)(this,"showMuteQuotedAdvice",void 0),this.percentile=e,this.explanation=t,this.checking=r,this.ranges=i,this.showMuteQuotedAdvice=a}}e.Impl=r;e.empty=(e="",i=a.g.MIN,n=t.Idle,o=[])=>new r(i,e,n,o,!1),e.create=({explanation:e="",percentile:i=a.g.MIN,checking:n=t.Idle,ranges:o=[]})=>new r(i,e,n,o,!1)}(i||(i={}))},91549:(e,t,r)=>{r.d(t,{R:()=>i});var i,n=r(50858),a=r(55818),o=r(57050),s=r(40327),l=r(45701),c=r(5114),d=r(22232),u=r(73975),p=r(74660),m=r(17594),h=r(26027),g=r(55567),f=r(20594),y=r(77610),v=r(48521);!function(e){e.Kind="AlertsBundle";e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title};e.ord=(0,s.pipe)(l.ordNumber,l.contramap((0,o.ls)((e=>e.activeAlert.bundleInfo),c.fold((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank)))));var t=e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,d.vE)(e.visualState.transition.type)}},r=(e.getAlertOutcomeBundle=e=>(0,s.pipe)(e.bundleInfo,c.fold((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>y.i.eq.equals(e,t)&&c.getEq(u.yv).equals(e.lensId,t.lensId)});let x;!function(e){const t=e=>(t,a)=>(0,n._)({id:t,kind:i.Kind,bundleInfo:e,activeAlert:y.i.getAlertByIndex(a.activeAlertIndex,a.alerts),transform:(0,s.pipe)(a.cachedTransform,c.map((e=>e.labels))),equals(e){return r.equals(this,e)},hashCode(){return y.i.hashCode(this)}},a);e.create=function(e,r,n,a){const o=k.getAnimatable(e).changeVisualState,l=e=>f.Mq.getCreate(t(e),r,o,a,n),u=b(n);return{create:e=>(t,r,i,a,o,s,d)=>l(o)(t,r,i,a,f.Mq.getApplicableCardMeta(r[i],s,n),e,c.some(s),d),createAdded:e=>(t,r,i,a)=>{const o=v.o.VisualState.initial({type:"added",clockwise:!0},!0);return l(r)(t,i,0,0,f.Mq.getApplicableCardMeta(i[0],o,n),e,c.some(o),a)},createFocused:e=>(t,r,i,a,o)=>{const s=v.o.VisualState.initial({type:"focused",clockwise:!0},!0);return l(r)(t,i,a,0,f.Mq.getApplicableCardMeta(i[a],s,n),e,c.some(s),o)},createRendered:e=>(t,r,i,a)=>{const o=v.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return l(r)(t,i,0,0,f.Mq.getApplicableCardMeta(i[0],o,n),e,c.some(o),a)},updateWith:(t,r)=>n=>{(0,d.kG)(t.every((e=>p.bZ.isRegistered(e))),"cannot add non registered alerts");const a=new Set(t.map((e=>e.id))),o=new Set(n.removedAlertsIds);a.forEach((e=>{o.delete(e)}));const l=n.alerts.filter((e=>!a.has(e.id))).concat(t.map(m.$.fromModel)).sort(r.compare);return(0,s.pipe)(n,u(l,o,y.i.getIndexByAlert(n.activeAlert.id,l)),i.getCardHydrator(e))}}}}(x=e.ItemFactory||(e.ItemFactory={}));const b=e=>(t,r,i)=>o=>{const s=y.i.getAlertByIndex(i,t),l=m.$.isApplicableAlert(s)?f.Mq.getApplicableCardMeta(s,o.visualState,e):g.n.empty(void 0);return(0,a._)((0,n._)({},o),{alerts:t,activeAlert:s,meta:l,removedAlertsIds:r,activeAlertIndex:i})};var C=e.changePosition=e=>t=>(0,a._)((0,n._)({},t),{positionState:e}),I=e.updateVisualState=e=>t=>(0,a._)((0,n._)({},t),{visualState:e}),S=e.getCardHydrator=e=>f.Mq.getCardHydrator((e=>e.cachedTransform),h.X.canHydrate,A,e),w=e.changeUserInput=e=>t=>(0,a._)((0,n._)({},t),{userInput:e});const A=e=>t=>(0,a._)((0,n._)({},t),{cachedTransform:e,transform:(0,s.pipe)(e,c.map((e=>e.labels)))}),E=e=>t=>(0,a._)((0,n._)({},t),{meta:e});e.unselect=f.Mq.getUnselectItem(I,C);var _=e.getSelectByAlert=(e,t,r)=>f.Mq.getSelectByAlert(b(t),w,I,C,E,r,e,t);e.getSelect=(e,t,r)=>f.Mq.getSelectFirstAlert(_(e,t,r));let k;!function(e){function r(e){const t=f.Mq.getChangeVisualState(I,S(e));return{completeTransition:e=>r=>t(v.o.VisualState.complete(r.visualState,e))(r),transitionTo:f.Mq.getTransitionTo(t,C),changeVisualState:t}}e.getAnimatable=r;var i=e.getRemove=(e,t)=>f.Mq.getRemove(b(e),r(t).transitionTo);e.getUpdatableWithAlertsCapability=(e,i)=>n=>(0,o.ls)(e.updateWith(n,p.h$.ord),(e=>t(e)?e:r(i).transitionTo({type:"added",clockwise:!0})(e))),e.getRemoveAlertsCapability=(e,t,r,n)=>(a,l)=>{const d=_(e,t,S(r)),u=f.Mq.getSelectNextAlert(f.Mq.getCardSelections(e),d);return e=>{const d=new Set(a.map((e=>e.id)));if(!y.i.hasAnyOfAlerts(d)(e))return e;const p=i(t,r)(a,(0,s.pipe)(l,c.map((t=>n.compare(e,t)>0)),c.getOrElse(o.W8)))(e);return(0,s.pipe)(l,c.exists((t=>t.id===e.id)))?u(n)(p):p}}}(k=e.Capabilities||(e.Capabilities={}))}(i||(i={}))},83167:(e,t,r)=>{r.d(t,{Dv:()=>_,Py:()=>F,VC:()=>k,sR:()=>P,u0:()=>T,vM:()=>D});var i=r(18775),n=r(50858),a=r(55818),o=r(35214),s=r(57050),l=r(40327),c=r(23239),d=r(5114),u=r(22232),p=r(8125),m=r(83078),h=r(95195),g=r(55415),f=r(89943),y=r(42040),v=r(46680),x=r(74660),b=r(66896),C=r(19751),I=r(9922),S=r(98403),w=r(35416),A=r(76201),E=r(73841);const _=(e,t,r,i=(()=>d.none))=>n=>{if(!e(n))return t(n);const{currentLens:a}=n;return a.kind===w._L.abstract?d.none:(0,l.pipe)(d.fromPredicate(w.nL.hasItems)(n),d.chain((e=>r.findNextAlert(e.currentLens))),d.alt((()=>i(n))),d.map(E.l.toLensAlert))},k=(e,t,r,i,n=A.v.WithSuccess.State.isInGlobalSuccess(i),a=(()=>!0))=>o=>{const{currentLens:c}=o;return c.kind===w._L.abstract?d.none:c.kind===w._L.persistent?(0,l.pipe)(d.fromPredicate(w.nL.hasItems)(o),d.chain((e=>i.getActiveAlert(e.currentLens))),d.fold((()=>w.nL.hasItems(o)?i.findNextAlert(o.currentLens):d.none),(t=>e.findNextAlertInTextByLens(t,(0,s.MZ)(o.currentLens)))),d.alt((()=>a()&&(n(o)||b.R.isOutcomeId(o.currentLens.id)&&e.hasZeroFreeAlerts(r))?e.findPremiumAlert():d.none)),d.map(E.l.toLensAlert)):(0,l.pipe)((n=>{const a=d.fromPredicate(w.nL.hasItems)(n);return(0,l.pipe)(a,d.chain((e=>i.findNextAlert(e.currentLens))),d.map(E.l.toLensAlert),d.alt((()=>(0,l.pipe)(a,d.chain((e=>i.getActiveAlert(e.currentLens))),d.fold((()=>t(x.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,x.bZ.isApplicableAlert))),d.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:r.get()})))))))})(o),d.alt((()=>(0,l.pipe)(e.findPremiumAlert(),d.map(E.l.toLensAlert)))))};function T(e,t){return(r,i)=>t.findClosestAlertHighlight(e(i),r)}const M=e=>e.pipe(C.pairwise(),C.first((([e,t])=>"idle"!==e&&"idle"===t)),C.map((()=>{}))),N=e=>e.pipe(C.startWith("idle"),C.pairwise(),C.first((([e,t])=>"idle"===t)),C.filter((([e])=>"full"===e)),C.map((()=>{}))),L=(e,t)=>{const r=M(e);return t.bigPaste.pipe(C.switchMap((()=>r)),C.map((()=>{})),C.shareReplay({bufferSize:1,refCount:!0}))};class D{dispose(){this._subs.dispose()}constructor(e,t){(0,i._)(this,"_subs",new I.w.Keeper),(0,i._)(this,"firstOpeningOfDocumentWithAlerts",c.h.create(!1));const r=M(e),n=(e=>(0,l.pipe)(e,C.filter((e=>w.nL.hasCards(e)&&d.isSome(w.In.getActiveItem(e.currentLens)))),C.map((()=>{}))))(t);this._subs.push((0,l.pipe)(t,C.first((e=>w.nL.hasCards(e))),C.switchMap((()=>(0,l.pipe)(C.mergeStatic(n,r),C.map(s.jv),C.startWith(!0)))),C.tap(S.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}}var F,P;!function(e){const t=(0,p.HP)(y.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,r,i,n,a)=>{const o=M(r),s=N(r),c=L(r,n);return(0,l.pipe)(C.mergeStatic(o,s,c),C.withLatestFrom(e,a,i),C.filter((([e,t,r,i])=>i&&!r&&w.nL.hasCards(t)&&d.isNone(w.In.getActiveItem(t.currentLens)))),C.map((()=>w.nL.Effect.FocusBehavior.focusFirst)),C.tap((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const r=(0,l.pipe)(e,C.map((e=>t=>r=>{switch(t.kind){case w.nL.Effect.FocusBehaviorType.noFocus:return r;case w.nL.Effect.FocusBehaviorType.unFocus:return w.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case w.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.pipe)(e.findFirstAlert(r.currentLens),d.fold((()=>r),(t=>w.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case w.nL.Effect.FocusBehaviorType.focusNext:return(0,l.pipe)(e.findNextAlert(r.currentLens),d.fold((()=>r),(t=>w.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case w.nL.Effect.FocusBehaviorType.focusAlert:return w.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,u.vE)(t)}})(t)));return{id:"autoFocusEffect",when:b.R.isWithAlertsId,what:w.nL.Effect.ItemsApplicator.create(r)}};var r=e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),i=e.whenShouldVerifyCurrentLens=(e,r)=>i=>{const n="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!w.nL.hasItems(i)||!r.shouldVerify(i.currentLens))&&((0,l.pipe)(w.nL.getActiveAlert(e)(i),d.filter(x.bZ.isInDuplicatedState),d.fold((()=>t(n).debug("Current alert removed, should verify current lens...")),(e=>t(n).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},g=e.whenNoActiveCard=e=>e.currentLens.items.size>0&&d.isNone(w.In.getActiveItem(e.currentLens)),f=e.behaviorToEffect=e=>r=>i=>(0,l.pipe)(r(i)?e(i):d.none,m.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`))));e.getDefaultBehavior=(e,t)=>(0,l.pipe)([(0,l.pipe)(i(e,t),f((()=>d.some(w.nL.Effect.FocusBehavior.focusNext))))],(0,o.fold)((0,o.getFunctionMonoid)(d.getFirstMonoid())())),e.getAlwaysFocusBehavior=(e,t)=>(0,l.pipe)([(0,l.pipe)((0,p.Kg)(g,i(e,t)),f((()=>d.some(w.nL.Effect.FocusBehavior.focusNext))))],(0,o.fold)((0,o.getFunctionMonoid)(d.getFirstMonoid())())),e.getFocusFromCacheBehavior=(e,t,n,a,c,u)=>(0,l.pipe)([(0,l.pipe)(i(a,c),f((()=>d.some(w.nL.Effect.FocusBehavior.focusNext)))),(0,l.pipe)((0,p.W9)((()=>t.get()),(0,p.W9)((0,p.W9)((0,p.W9)(r(n),(()=>e)),g),(0,l.pipe)(u,d.map((e=>(0,s.ff)(e.willShowBulkAccept))),d.getOrElse((()=>s.W8))))),f((()=>d.some(w.nL.Effect.FocusBehavior.focusFirst))))],(0,o.fold)((0,o.getFunctionMonoid)(d.getFirstMonoid())()));e.getFirstApiAlignmentOverride=function(){const e=c.h.create(!0);return(t,r)=>{let i=r;return e.get()&&r===x.l$.api&&(i=x.l$.text),e.set(!1),i}};e.getShouldAutoFocus=(e,t,r)=>i=>e.get()&&(0,l.pipe)(i,w.nL.getActiveAlert(r),d.chain((({id:e})=>t.getById(e))),d.filter((0,p.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),x.bZ.isDuplicated,x.bZ.isCapiDone)),d.isSome),e.getStateTransformer=(e,r,i,o,s,c,p)=>({state:m,metadata:g})=>{const f=t("AutoFocus.stateTransformer");if(!w.nL.hasCards(m)||!w.nL.hasItems(m))return f.trace("state has no items, returning original state"),h.left({state:m,metadata:g});const y=e(m);if(f.trace("effect: ",{state:m,metadata:g,effect:y}),d.isNone(y))return f.trace("no effect selected, returning original state"),h.left({state:m,metadata:g});if(c(y.value),y.value.kind===w.nL.Effect.FocusBehaviorType.unFocus||y.value.kind===w.nL.Effect.FocusBehaviorType.noFocus)return h.left({state:w.nL.Prism.getLensWithItems().modify(o.unselectItem(),m),metadata:g});const v=s(m);return f.trace("shouldAutoFocus",{alertSource:m.alertSource,shouldAutoFocus:v}),(0,l.pipe)(y,d.chain((e=>{switch(e.kind){case w.nL.Effect.FocusBehaviorType.noFocus:case w.nL.Effect.FocusBehaviorType.unFocus:return d.none;case w.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.pipe)(o.findFirstAlert(m.currentLens),d.map((e=>(0,a._)((0,n._)({},e),{lensId:m.currentLens.id}))));case w.nL.Effect.FocusBehaviorType.focusNext:return r(m);case w.nL.Effect.FocusBehaviorType.focusAlert:return d.some((0,a._)((0,n._)({},e.alertHighlight),{lensId:m.currentLens.id}));default:(0,u.vE)(e)}})),d.map((e=>((0,u.kG)(d.isSome(i.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),d.fold((()=>(f.trace("no alert selected, returning original state"),m.currentLens.kind===w._L.active?h.right(h.right({lensId:p.get(),alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:w.nL.Effect.FocusBehavior.noFocus}})):h.left({state:m,metadata:g}))),(({alert:e,highlightIndex:t,lensId:r})=>{if(f.trace("selected alert to focus",e),m.currentLens.meta.filter(e)){if(v){const r={alert:e,highlightIndex:t};return(0,l.pipe)(m.currentLens.items.find(o.hasAlert(e.id)),d.fold((()=>(f.trace("shouldAutoFocus: true, no such item in a lens for given alert",e.id),h.left({state:m,metadata:g}))),(()=>(f.trace("shouldAutoFocus: true, selecting alert"),h.left({state:w.nL.Prism.getLensWithItems().modify(o.selectItemByAlert(r),m),metadata:{sourceId:"LSM.updateActiveState"}})))))}return f.trace("shouldAutoFocus: false"),h.left({state:m,metadata:g})}return f.trace("alert is not from current lens, recreating lens view"),h.right(v?h.left({alertHighlight:{alert:e,highlightIndex:t},alertSource:m.alertSource,options:{lensId:r,order:m.switchOrder,toFocus:w.nL.Effect.FocusBehavior.focusFirst}}):h.right({lensId:r,alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:w.nL.Effect.FocusBehavior.noFocus}}))})))}}(F||(F={})),function(e){const t=e=>t=>r=>{switch(t.kind){case w.nL.Effect.FocusBehaviorType.noFocus:return r;case w.nL.Effect.FocusBehaviorType.unFocus:return w.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case w.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.pipe)(r.currentLens.items.find((0,s.ff)(e.isScheduledToDispose)),d.map(g.ei("value")),d.fold((0,s.a9)(r),(t=>w.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),r))));case w.nL.Effect.FocusBehaviorType.focusNext:return(0,l.pipe)(r.currentLens.cardIndex,d.chain((t=>(0,l.pipe)(f.uU(r.currentLens.items.values(),t,d.fromPredicate((0,s.ff)(e.isScheduledToDispose))),d.map(g.ei("value"))))),d.fold((0,s.a9)(r),(t=>w.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),r))));case w.nL.Effect.FocusBehaviorType.focusAlert:return w.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,u.vE)(t)}},r=(0,p.HP)(y.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,t,i,n)=>{const a=M(t),o=N(t),s=L(t,n);return(0,l.pipe)(C.mergeStatic(a,o,s),C.switchMap(S.b2.rafScheduler),C.switchMap(S.b2.rafScheduler),C.withLatestFrom(e,i),C.filter((([e,t,r])=>r&&w.nL.hasCards(t)&&d.isNone(w.In.getActiveItem(t.currentLens)))),C.map((()=>w.nL.Effect.FocusBehavior.focusFirst)),C.tap((e=>r("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,r)=>{const i=(0,l.pipe)(e,C.map(t(r)));return{id:"sduiAutoFocusEffect",when:b.R.isWithAlertsId,what:w.nL.Effect.ItemsApplicator.create(i)}},e.getShouldAutoFocus=(e,t,r)=>i=>e.get()&&(0,l.pipe)(i,w.nL.getActiveAlert(r),d.chain((({id:e})=>t.getById(e))),d.filter((0,p.Kg)((e=>!("REMOVED"===e.state.type&&"textChange"===e.state.reason)),x.bZ.isDuplicated,x.bZ.isCapiDone)),d.isSome),e.getStateTransformer=(e,i,o,s,c,u)=>({state:p,metadata:m})=>{const g=r("AutoFocus.stateTransformer",v.i.TRACE);if(!w.nL.hasCards(p)||!w.nL.hasItems(p))return g.trace("state has no items, returning original state"),h.left({state:p,metadata:m});const f=e(p);if(d.isNone(f))return g.trace("no effect selected, returning original state"),h.left({state:p,metadata:m});if(g.trace("effect: ",{state:p,metadata:m,effect:f}),c(f.value),f.value.kind===w.nL.Effect.FocusBehaviorType.unFocus||f.value.kind===w.nL.Effect.FocusBehaviorType.noFocus)return h.left({state:w.nL.Prism.getLensWithItems().modify(o.unselectItem(),p),metadata:m});const y=s(p);return g.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:y}),(0,l.pipe)(f,d.map((e=>({effect:e,applicator:t(o)}))),d.fold((()=>(g.trace("no effect selected, returning original state"),p.currentLens.kind===w._L.active?h.right(h.right({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:w.nL.Effect.FocusBehavior.noFocus}})):h.left({state:p,metadata:m}))),(({effect:e,applicator:t})=>{g.trace(`effect selected: ${e.kind}`);const r=t(e)(p);return y?(g.trace("shouldAutoFocus: true, selecting an item in the lens"),h.left({state:r,metadata:{sourceId:"LSM.updateActiveState"}})):(g.trace("current lens is empty"),e.kind===w.nL.Effect.FocusBehaviorType.focusNext?(g.trace("no items to select in the current lens, trying to switch"),(0,l.pipe)(p,i,d.fold((()=>(g.trace("next alert not found in other lenses, reset cardIndex"),h.left({state:p.patch({currentLens:(0,a._)((0,n._)({},p.currentLens),{cardIndex:d.none})}),metadata:{sourceId:"LSM.updateActiveState"}}))),(({lensId:e})=>(g.trace(`found next alert in lens: ${e}. Switching the lens`),h.right(h.right({lensId:e,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:w.nL.Effect.FocusBehavior.noFocus}}))))))):(g.trace("shouldAutoFocus: false"),h.left({state:p,metadata:m})))})))}}(P||(P={}))},20594:(e,t,r)=>{r.d(t,{IG:()=>i,Ls:()=>E,Mq:()=>T});var i,n=r(50858),a=r(55818),o=r(57050),s=r(40327),l=r(23239),c=r(87969),d=r(5114),u=r(22232),p=r(83078),m=r(95195),h=r(89943),g=r(42040),f=r(74660),y=r(66896),v=r(37539),x=r(17594),b=r(26027),C=r(55567),I=r(48521),S=r(77610),w=r(16892),A=r(4890);function E(e,t,r,i,o,s=b.X.canHydrate){const l=T.getCardSelections(t),c=T.getCardHydrator((e=>e.cachedTransform),s,b.X.changeTransform,e),p=T.getChangeVisualState(b.X.changeVisualState,c),m=T.getSelectByAlert(b.X.updateAlerts,b.X.updateUserInput,p,b.X.changePosition,b.X.changeMeta,c,t,r),h=T.getUnselectItem(p,b.X.changePosition),g=T.getTransitionTo(p,b.X.changePosition),y=T.getRemove(b.X.updateAlerts,g);const v=T.getCreate(k,o,p,i,r);const S=T.getSelectFirstAlert(m);return(0,a._)((0,n._)({shouldAnimateAlertApply:r.shouldAnimateAlertApply,create:v,createFromAlert:e=>t=>v(t.id,[t],0,0,C.n.empty(f.bZ.isApplicableAlert(t)?t.explanation:void 0),e,d.none),createFocused:function(e){const t=I.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(i,n,a)=>v(i,[n],0,a,T.getApplicableCardMeta(n,t,r),e,d.some(t))},createRendered:function(e){const t=I.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(i,n)=>v(i,[n],0,0,T.getApplicableCardMeta(n,t,r),e,d.some(t))},createAdded:function(e){const t=I.o.VisualState.initial({type:"added",clockwise:!0},!0);return(i,n)=>v(i,[n],0,0,T.getApplicableCardMeta(n,t,r),e,d.some(t))}},l),{select:(e,t,r,i)=>m(t,r,i)(e),selectFirstAlert:(e,t,r)=>S(t,r)(e),selectNextAlert:(e,t)=>T.getSelectNextAlert(l,m)(t)(e),unselect:(e,t,r)=>h(t,r)(e),remove:(e,t,r)=>y(t,r)(e),updateWith(e,t){(0,u.kG)(1===t.length,"AlertCard can only handle update with a single alert");const i=t[0];(0,u.kG)(void 0!==e.alerts.find((e=>e.id===i.id)),"can not receive updates for unknown alert",(()=>i.toString()));const n=function(e,t){const i=T.getApplicableCardMeta(t,e.visualState,r);return new b.X(e.id,e.alerts.map((e=>e.id===t.id?x.$.fromModel(t):e)),e.activeAlertIndex,T.getAHI(e,i),e.positionState,e.visualState,i,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,i);switch(i.state.type){case f.bZ.State.Type.REGISTERED:{const e="focused"===n.visualState.transition.type||"expanded"===n.visualState.transition.type?c(n):n;return"success"===n.visualState.transition.type||"presuccess"===n.visualState.transition.type?g({type:"focused",clockwise:n.visualState.transition.clockwise})(e):e}case f.bZ.State.Type.REMOVED:return"focused"!==n.visualState.transition.type&&"expanded"!==n.visualState.transition.type||!n.alerts.every((e=>f.bZ.isCapiDone(e)&&e.allowUpdate&&f.bZ.isRated(n.activeAlert)))?y(t,!0)(n):g({type:"presuccess",clockwise:n.visualState.transition.clockwise})(n);case f.bZ.State.Type.APPLIED:case f.bZ.State.Type.BEING_APPLIED:return y(t,!0)(n);default:return(0,u.vE)(i.state)}},changePosition:(e,t)=>b.X.changePosition(t)(e),changeVisualState:(e,t)=>p(t)(e),transitionTo:(e,t)=>g(t)(e),completeTransition:(e,t)=>p(I.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new b.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new C.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>b.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>b.X.changeSynfonySelection(t)(e)})}function _(e){return f.bZ.isOneGap(e)&&""!==e.gapValue?d.some(e.gapValue):d.none}!function(e){let t;e.toCardRenderOptions=function(e,r,i){const n=new Set;return(y.R.isMainLens(r)||e.features.has(t.showCardLabelInOutcomes)&&r!==y.R.SpecialId.Plagiarism)&&n.add(A.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&n.add(A.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&n.add(A.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&n.add(A.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&n.add(A.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&n.add(A.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&n.add(A.j.Features.showPersistentPremiumCardLabels),e.features.has(t.showPremiumOnboarding)&&n.add(A.j.Features.showPremiumOnboarding),e.features.has(t.a11yContrast)&&n.add(A.j.Features.a11yContrast),e.features.has(t.showYellowFooterForTrialUsers)&&n.add(A.j.Features.showYellowFooterForTrialUsers),e.features.has(t.sduiContainerStyle)&&n.add(A.j.Features.sduiContainerStyle),e.features.has(t.showOnboardingTourA11yUpdates)&&n.add(A.j.Features.showOnboardingTourA11yUpdates),{features:n,layoutDensity:e.cardLayoutDensityMode,isNew:i,cardVisualMode:e.cardVisualMode,isPremiumOnboarding:e.isPremiumOnboarding}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.showOnboardingTourA11yUpdates="showOnboardingTourA11yUpdates"}(t=e.Features||(e.Features={}));e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:A.j.Density.cozy,shouldAnimateAlertApply:f.bZ.isAccepted,cardVisualMode:l.h.create(A.j.CardVisualMode.RegularLightMode)}}(i||(i={}));const k=(e,t)=>new b.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var T;!function(e){function t(e,t,r){let n;n=f.bZ.getCheckingState(e)===f.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?C.n.CheckingState.Checking:C.n.CheckingState.Full:C.n.CheckingState.Idle;const a=r.features.has(i.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new C.n.Impl(v.g.fromRatio(e.progress),e.explanation,n,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t;e.getRemove=(e,t)=>(r,i=!0)=>n=>{const a=new Set(r.map((e=>e.id))),o=new Set(n.removedAlertsIds);a.has(n.activeAlert.id)&&o.add(n.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=n.alerts.reduce(((e,t,r)=>!a.has(t.id)||I.o.isFocused(n)&&t.id===n.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(r<n.activeAlertIndex||r===n.activeAlertIndex&&r===n.alerts.length-1&&r>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:n.activeAlertIndex}),d=(0,s.pipe)(n,S.i.willBeDisposed(n,a)?e(n.alerts,a,n.activeAlertIndex,n.activeHighlightIndex):e(l,o,c,0));return S.i.willBeDisposed(d,d.removedAlertsIds)?t({type:"removed",clockwise:i})(d):d},e.getTransitionTo=(e,t)=>r=>i=>{const n=I.o.VisualState.to(i.visualState,r);return(0,s.pipe)(i,e(n),(e=>r.type===i.visualState.transition.type||"expanded"!==r.type&&"focused"!==r.type?e:t(w.s.PositionState.invalidateHeight(i.positionState))(e)))};const r=e=>t=>{const r=t.alerts;return d.fromNullable(r.slice(t.activeAlertIndex+1).find(e))};var n=e.getPrevAlert=e=>t=>{const r=t.alerts;return d.fromNullable(r.slice(0,t.activeAlertIndex).reverse().find(e))},a=e.getAnyRegisteredAlert=e=>t=>{const r=t.alerts;return(0,s.pipe)(r.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),d.fromNullable)},l=(e.getCardSelections=e=>{const t=(e=>t=>e.isRegistered(t.id))(e);return{nextAlert:r(t),prevAlert:n(t),anyRegisteredAlert:a(e)}},e.getSelectByAlert=(e,r,i,n,a,o,c,m)=>({alert:h,highlightIndex:g},y,v)=>x=>{(0,u.kG)(!x.removedAlertsIds.has(h.id),"Cannot select removed alert");const b=c.getById(h.id);(0,u.kG)(d.isSome(b),"Cannot select not registered alert");const I=p.MH(b),w=x.alerts.filter((e=>!x.removedAlertsIds.has(e.id))),A=_(I),E=S.i.getIndexByAlert(h.id,w),k=l(i,n)(y,v);return(0,s.pipe)(x,k,e(w,x.removedAlertsIds,E,g),r(A),(e=>{return a((r=e.visualState,f.bZ.isApplicableAlert(I)?t(I,r,m):C.n.empty(void 0)))(e);var r}),o)},e.getSelectItem=(e,t)=>(r,i)=>n=>{const a=(0,s.pipe)(r,d.map((e=>i.compare(n,e)>0)),d.getOrElse(o.W8)),l=(0,s.pipe)(r,d.exists((e=>e.id===n.id))),c=l?n.positionState:w.s.PositionState.invalidateHeight(n.positionState),u=l&&b.X.isCardOpen(n.visualState)?"expanded":"focused",p=(0,s.pipe)(r,d.fold((()=>I.o.VisualState.initial({type:u,clockwise:a})),(e=>I.o.VisualState.to(n.visualState,{type:u,clockwise:a}))));return(0,s.pipe)(n,t(c),e(p))});e.getSelectNextAlert=(e,t)=>r=>i=>S.i.activeAlertRemoved(i)&&!S.i.willBeDisposed(i,i.removedAlertsIds)?(0,s.pipe)(e.nextAlert(i),p.vx(e.prevAlert(i)),d.map((e=>t({alert:e,highlightIndex:0},d.none,r)(i))),d.getOrElse((()=>i))):i,e.getSelectFirstAlert=e=>(t,r)=>i=>{const n=i.alerts.filter((e=>!i.removedAlertsIds.has(e.id)));(0,u.kG)(n.length>0,"Selectable card must have at least one not removed alert");const a=n[0];return e({alert:a,highlightIndex:0},t,r)(i)},e.getUnselectItem=(e,t)=>(r,i)=>n=>{const a=(0,s.pipe)(r,d.map((e=>i.compare(n,e)>0)),d.getOrElse(o.W8)),l=(0,s.pipe)(r,d.exists((e=>e.id===n.id))),c=l?n.positionState:w.s.PositionState.invalidateHeight(n.positionState);return(0,s.pipe)(n,t(c),S.i.willBeDisposed(n,n.removedAlertsIds)||I.o.isHidden(n)?o.yR:e(I.o.VisualState.to(n.visualState,{type:"rendered",clockwise:a})))},e.getCardHydrator=(e,t,r,i)=>n=>{const a=n.activeAlert.type===x.$.Type.super||n.activeAlert.type===x.$.Type.plagiarism||n.activeAlert.type===x.$.Type.premium||n.activeAlert.type===x.$.Type.takeaway||f.eT.isSimple(n.activeAlert.extraProperties.cardType)?d.none:function(e,t,r){const n=g.C8.Logging.getLogger("CardFactory");return(0,s.pipe)(t,d.filter((t=>!r||(0,s.pipe)(e,d.exists((e=>t.id===e.id&&t.rev===e.revision))))),d.alt((()=>(0,s.pipe)(e,d.chain((e=>(0,s.pipe)(i(e),m.fold((r=>{switch(r.kind){case"default":n.error("Could not hydrate transform",r.error,{alertId:e.id});break;case"mpteError":n.warn("Could not hydrate transform",r.error,{alertId:e.id});break;default:(0,u.vE)(r)}return t}),(t=>d.some({id:e.id,rev:e.revision,labels:t}))))))))))}(n.activeAlert.getTransform(),e(n),t(n));return r(a)(n)},e.getChangeVisualState=(e,t)=>r=>i=>{const n=e(r)(i);return"focused"===r.transition.type||"expanded"===r.transition.type?t(n):n},e.getCreate=(e,t,r,n,a)=>(o,l,c,p,m,h,g,y=f.h$.ord)=>{const v=S.i.getAlertByIndex(c,l),b=_(v),A=[...l].sort(y.compare),E=A.map(x.$.fromModel),k=E[0];(0,u.kG)(Boolean(k),"The card must contain at least 1 alert");const T=(0,s.pipe)(t,d.chain((e=>e.getAlertMuteCategory(l[0].id)))),M=e(o,{alerts:E,alertModels:A,activeAlertIndex:S.i.getIndexByAlert(v.id,E),activeHighlightIndex:p,positionState:w.s.PositionState.empty,visualState:I.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new C.n.Impl(m.percentile,m.explanation,m.checking,m.ranges,a.features.has(i.Features.enableMuteQuotedAdvice)&&x.$.isInQuotes(k)),lensId:d.some(h),renderOptions:i.toCardRenderOptions(a,h,n(k)),muteCategory:T,order:k.getHighlightRanges()[0].end,initialAlertId:k.id,removedAlertsIds:new Set,cachedTransform:d.none,userInput:b,synfonySelection:d.none});return(0,s.pipe)(g,d.fold((()=>M),(e=>r(e)(M))))};e.getAHI=function(e,t){if((0,u.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const r=e.meta.ranges[e.activeHighlightIndex];return(0,u.kG)(void 0!==r,"AHI not found in rangeIds"),(0,s.pipe)(d.some(t.ranges.findIndex((e=>e.meta.id===r.meta.id))),d.filter((e=>-1!==e)),d.alt((()=>h.OI(t.ranges,r,c.SV.ordEnd))),d.getOrElse((()=>t.ranges.length-1)))}};e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,s.pipe)(Boolean(e.alerts)?e.alerts.map((e=>e.id)):e.alerts),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(T||(T={}))},20291:(e,t,r)=>{r.d(t,{R7:()=>m,XU:()=>h});var i=r(40327),n=r(5114),a=r(66896),o=r(98403),s=r(19751),l=r(66268),c=r(48521),d=r(35416),u=r(99116);const p={cardsBeyondViewport:5,cardsAroundActive:100},m=(e,t,r,i,m=p,h=o.b2.rafScheduler)=>{const g=e=>!e.positionState.visible&&c.o.isAnimatable(e)&&e.visualState.incomplete?(i.next({type:l.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),r.completeTransition(e.visualState.transitionId)(e)):e,f=e.pipe(s.map(d.nL.mapper((({currentLens:e,alertSource:t})=>n.some({currentLens:e,alertSource:t}))))),y=(0,u.nM)(r)(f,t.viewport,t.scrollTop,t.paddingTop,h).pipe(s.map((({viewport:e,scrollTop:t,paddingTop:r})=>({viewport:e,scrollTop:t,paddingTop:r,completeTransition:g}))),s.map((0,u.GC)({cardsBeyondViewport:m.cardsBeyondViewport,cardsAroundActive:m.cardsAroundActive,changePosition:r})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:d.nL.Effect.Applicator.create(y)}},h=(e,t,r)=>{const l=(0,i.pipe)(e,s.map(d.nL.mapper((({currentLens:e,alertSource:t})=>n.some({currentLens:e,alertSource:t})))),(0,u.SW)(r),s.switchMap(o.b2.rafScheduler),s.filter((e=>0!==e)),s.tap((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:d.nL.Effect.Applicator.create(s.mergeStatic(s.mergeStatic(l).pipe(s.switchMapTo(s.NEVER))))}}},71841:(e,t,r)=>{r.d(t,{YA:()=>p,i$:()=>u});var i=r(57050),n=r(40327),a=r(5114),o=r(98403),s=r(19751),l=r(35416),c=r(74238),d=r(14990);const u=e=>o.Hl(e.scrollTop.pipe(s.skip(1)),100,!0).pipe(s.startWith(!1),s.shareReplay({bufferSize:1,refCount:!0})),p=(e,t)=>{const r=new d.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,n.pipe)(e.view(l.nL.getLens).get(),a.chain((({items:e,cardsHeight:t})=>(0,n.pipe)(e.getAt(0),a.map((e=>{const n=(0,i.ls)(c.L.AbsTop.ISO.wrap,r.converters.absTopToViewportTop,r.converters.viewportToWindow)(e.positionState.absTop);return{top:n,bottom:c.r.FromWindowTop.ISO.modify(c.L.concatC(t))(n)}}))))))}},35607:(e,t,r)=>{r.d(t,{o:()=>p});var i=r(18775),n=r(40327),a=r(23239),o=r(95195),s=r(8125),l=r(42040),c=r(19751),d=r(61722),u=r(74238);class p{constructor(e){(0,i._)(this,"_validateOffset",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"scrollTop",void 0),(0,i._)(this,"paddingTop",void 0),(0,i._)(this,"viewport",void 0),(0,i._)(this,"scrollOffset",void 0),(0,i._)(this,"moveCardsBy",void 0),(0,i._)(this,"moveCardsByAnimated",void 0),this._validateOffset=e,this._log=l.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=a.h.create(0),this.paddingTop=a.h.create(0),this.viewport=a.h.create({top:u.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new c.Subject,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),o.right(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.Observable.create((t=>(0,n.pipe)(this._validateOffset(e,this),o.fold((e=>(t.thrownError(e),s.Q1)),(()=>{const r=2*this.viewport.get().height,i=Math.abs(e)>r?(e>0?1:-1)*r:e,n=e-i,a=d.f.createAnimationObservable(0,i,200).pipe(c.pairwise(),c.map((([e,t])=>t-e)),c.startWith(n),c.tap((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},74238:(e,t,r)=>{r.d(t,{L:()=>n,r:()=>i});var i,n,a=r(73975),o=r(99930),s=r(64681);!function(e){let t;!function(e){e.ISO=(0,s.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(i||(i={})),function(e){let t,r,i;!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(r=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(i=e.CardTop||(e.CardTop={}));var n=e.concatC=e=>t=>e+t;const l=e=>new o.aD(e);e.converters=function(e,t,r){const i=l(n(r)).get,a=l(n(-e)).get;return{windowToViewport:l(n(-t)).get,viewportToWindow:l(n(t)).get,cardTopToViewport:a,viewportToCardTop:l(n(e)).get,absTopToViewportTop:e=>a(i(e)),absTopToCardTop:i}}}(n||(n={}))},14990:(e,t,r)=>{r.d(t,{Db:()=>n});var i,n,a,o=r(18775),s=r(73975),l=r(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(i||(i={})),function(e){e.Impl=class{constructor(e,t,r){(0,o._)(this,"scrollTop",void 0),(0,o._)(this,"viewport",void 0),(0,o._)(this,"converters",void 0),this.scrollTop=e,this.viewport=t,this.converters=l.L.converters(e,l.r.FromWindowTop.ISO.unwrap(t.top),r)}}}(n||(n={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},99116:(e,t,r)=>{r.d(t,{Bk:()=>v,GC:()=>A,SW:()=>I,Sd:()=>S,nM:()=>w,v_:()=>b});var i=r(17771),n=r(12271),a=r(57050),o=r(40327),s=r(83078),l=r(5114),c=r(73975),d=r(89943),u=r(95983),p=r(19751),m=r(98403),h=r(16892),g=r(35416),f=r(76201),y=r(74238);const v=e=>t=>t.isCardsHeightValid&&(0,o.pipe)(g.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t)))),x=e=>t=>t.isCardsHeightValid&&(0,o.pipe)(g.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t))));function b({cardTop:e,cardHeight:t,viewportHeight:r,padding:i}){const n=y.L.FromViewportTop.ISO.unwrap(e),a=n+t;return t>r?n:n<0?t+i.before<r?n-i.before:n:a>r?t+i.after<r?a-r+i.after:a-r:n<i.before?t+i.after+i.before<r?n-i.before:t+i.after<r?n-i.after:i.before:r-a<i.after&&t+i.after<r?i.after-(r-a):0}const C=(e,t,r,i)=>({from:Math.max(0,u.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<r))-i),to:Math.min(e.size,u.aW.lowerBound(e,(e=>e.positionState.absTop<r+t.height))+i)}),I=e=>t=>t.pipe(S(e),p.map(l.map((e=>e.currentLens))),p.pairwise(),p.filter((([e,t])=>(0,o.pipe)((0,a.bc)(e,t),(0,a.og)(s.vB(((e,t)=>e.id===t.id&&(0,o.pipe)((0,a.bc)(g.In.getActiveItem(e),e.cardIndex,g.In.getActiveItem(t),t.cardIndex),(0,a.og)(i.g(l.option)),l.map((([e,t,r,i])=>e.id===r.id&&t!==i)),l.getOrElse((()=>!1)))))),l.getOrElse((()=>!1))))),p.map((0,a.ls)(n.Pd(l.chain(g.In.getActiveItem),l.chain(g.In.getActiveItem)),(0,a.og)(s.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),S=e=>t=>t.pipe(p.map(l.filter((({currentLens:t})=>x(e)(t))))),w=e=>(t,r,i,n,a)=>{const s=(e=>l.getEq(c.f7(((t,r)=>{const i=g.In.getActiveItem(t),n=g.In.getActiveItem(r);return l.getEq(e.visualStateEq).equals(i,n)&&t.items.size===r.items.size&&d.Hx(t.items.keys(),r.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.map(l.map((e=>e.currentLens.id))),p.distinctUntilChanged(c.w4.equals),p.map(l.isSome),p.switchMap(m.Ft(p.combineLatestStatic(r,i,n,S(e)(t).pipe(p.map(l.map((e=>e.currentLens))),p.distinctUntilChanged(s.equals),p.switchMap(a))))),p.filter((([t,r,i,n])=>(0,o.pipe)(n,l.exists(x(e))))),p.map((([e,t,r])=>({viewport:e,scrollTop:t,paddingTop:r}))))},A=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:r})=>({viewport:i,scrollTop:n,paddingTop:c,completeTransition:d})=>u=>{const p=u.currentLens,m=((e,t,r,i)=>e.size<2||Math.floor(t.height/Math.min(s.MH(e.getAt(0)).positionState.height,s.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:C(e,t,r,i))(p.items,i,n-c,e);let y=!1;const v=p.items.map(((e,i,n)=>{const s=(0,a.ls)((c=r,u=e.positionState.watched||(e=>m.from<=e&&m.to>e||(0,o.pipe)(p.cardIndex,l.exists((r=>e>=r-t&&e<=r+t))))(n),e=>e.positionState.visible!==u?c.changePosition(h.s.PositionState.changeVisible(e.positionState,u))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(h.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(r),d)(e);var c,u;return s!==e?(y=!0,s):e}));return y?g.nL.Prism.getLens().compose(f.v.Prism.items).set(v,u):u}},48521:(e,t,r)=>{r.d(t,{o:()=>i});var i,n=r(50858),a=r(55818),o=r(16892),s=r(40966);!function(e){var t=s.u;e.Transition=t;var r=s.t;e.VisualState=r;e.eq={equals:(e,t)=>!i(e)||i(t)&&r.eq.equals(e.visualState,t.visualState)};function i(e){return"visualState"in e}e.isAnimatable=i;e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}};var l=e.isInTransition=e=>e.visualState.incomplete;e.isRemoved=e=>"removed"===e.visualState.transition.type,e.isAnimatingAdded=e=>"added"===e.visualState.transition.type&&l(e),e.isAnimatingRemoval=e=>"removed"===e.visualState.transition.type&&l(e),e.isHidden=e=>"hidden"===e.visualState.transition.type;let c;!function(e){e.getPojoUpdates=()=>(0,a._)((0,n._)({},o.s.Capabilities.getPojoUpdates()),{setVisualState:e=>t=>(0,a._)((0,n._)({},t),{visualState:e})})}(c=e.Capabilities||(e.Capabilities={}))}(i||(i={}))},16892:(e,t,r)=>{r.d(t,{s:()=>i});var i,n=r(50858),a=r(55818),o=r(73975),s=r(69345);!function(e){var t=s.Z;e.PositionState=t;e.eqById=o.f7(((e,t)=>e.id===t.id)),e.getEqById=()=>o.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(e,r)=>t.eq.equals(e.positionState,r.positionState)},e.verticalPositionEq={equals:(e,r)=>t.verticalEq.equals(e.positionState,r.positionState)};let r;!function(e){e.getPojoCloneable=()=>({clone:e=>(0,n._)({},e)}),e.getPojoUpdates=()=>({setPosition:e=>t=>(0,a._)((0,n._)({},t),{positionState:e})})}(r=e.Capabilities||(e.Capabilities={}))}(i||(i={}))},4557:(e,t,r)=>{r.d(t,{B:()=>i});var i,n=r(5114),a=r(95195);!function(e){var t=e.NAME_LENGTH_LIMIT=30,r=e.CONTENT_LENGTH_LIMIT=1e3;e.validate=(e,i,o)=>{const s=((e,r)=>0===e.trim().length?n.some(r.nameEmpty):e.length>t?n.some(r.nameTooLong):n.none)(e,o),l=((e,t)=>0===e.trim().length?n.some(t.textEmpty):e.length>r?n.some(t.textTooLong):n.none)(i,o);return n.isNone(s)&&n.isNone(l)?a.right(void 0):a.left({nameError:s,contentError:l})}}(i||(i={}))},30013:(e,t,r)=>{r.d(t,{v:()=>i});var i,n=r(50858),a=r(55818),o=r(17771),s=r(35214),l=r(64015),c=r(57050),d=r(40327),u=r(49558),p=r(71249),m=r(5114),h=r(95195),g=r(83078),f=r(8125),y=r(55415),v=r(92843),x=r(73975),b=r(45701),C=r(22232),I=r(89943),S=r(74660),w=r(66896),A=r(4390),E=r(36156),_=r(48521),k=r(16892),T=r(35416);!function(e){e.filterAlertInLens=(e,t)=>p.hX((r=>S.bZ.isNotRemoved(r)||m.isSome(e.items.find((e=>t.hasAlert(r.id)(e)))))),e.findItemWithAlertInLens=(e,t)=>(0,c.ls)(m.fromPredicate(S.bZ.isNotRemoved),m.chain((r=>e.items.find((e=>t.hasAlert(r.id)(e)&&!t.isScheduledToDispose(e))))),m.map((e=>e.value))),e.createWithInitialAlerts=(e,t,r,i,o)=>(s,l,u,p)=>{const h=(0,d.pipe)(p,m.fold((()=>c.yR),(e=>o.selectItemByAlert(e)))),g=e.create(s,l),f=u.filter(r.alertVisibleInSidebar(s)),y=t(s);if(T.vj.hasItems(g)){const e=A.p.empty,t=A.p.from(f),r=A.p.diff(e,t);return(0,d.pipe)(g,y(r,i),o.changeItemsVisualState(_.o.VisualState.initial({type:"rendered",clockwise:!0},!1)),h,(e=>(0,a._)((0,n._)({},e),{animation:T.wj.skip})))}return g},e.createWithExternalItems=(e,t)=>(r,i,o,s,l)=>{const u=e.create(r,i);return(0,d.pipe)(l,m.filter((e=>T.vj.hasItems(e)&&T.vj.hasItems(u))),m.map((e=>t.changeItemsVisualState(_.o.VisualState.initial({type:"rendered",clockwise:!0},!1))((0,a._)((0,n._)({},u),{items:e.items.filter((0,c.ff)(t.isScheduledToDispose))})))),m.getOrElse((()=>u)))};let t,r,i;!function(e){e.setVisibleItems=e=>t=>(0,a._)((0,n._)({},t),{cardIndex:(0,d.pipe)(T.In.getActiveItem(t),m.chain((t=>(0,d.pipe)(e.get(t.id),m.map((e=>e.index)))))),items:e});e.hideItem=function(e,t){return _.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e};var t=e.calculateCardsHeight=e=>(0,d.pipe)(e.getAt(e.size-1),m.map((e=>e.positionState.absTop+e.positionState.height)),m.getOrElse((()=>0)));e.getItemsPositionsUpdateTransformer=e=>({state:t,metadata:r})=>{if(!T.nL.hasCards(t))return h.left({state:t,metadata:r});const n=T.nL.Prism.getLens();return h.left({state:n.modify(i(e),t),metadata:r})},e.getSingleItemFeedPositionsUpdateTransformer=e=>({state:t,metadata:r})=>{if(!T.nL.hasCards(t))return h.left({state:t,metadata:r});const i=T.nL.Prism.getLens();return h.left({state:i.modify((t=>{const r=t.items.map(((r,i,o)=>{const s=g.FX(o)(t.cardIndex)?{absTop:r.positionState.absTop,height:r.positionState.height,animationInProgress:t.animation(r,o),visible:!0,isHeightValid:!0,watched:!0,inert:r.positionState.inert}:(0,a._)((0,n._)({},r.positionState),{visible:!1,isHeightValid:!0});return k.s.PositionState.eq.equals(r.positionState,s)?r:e.changePosition(s)(r)}));return(0,a._)((0,n._)({},t),{items:r,isCardsHeightValid:!0})}),t),metadata:r})},e.getRemoveDisposedItemsTransformer=e=>({state:t,metadata:r})=>{if(!T.nL.hasCards(t))return h.left({state:t,metadata:r});const i=T.nL.Prism.getLens();return h.left({state:i.modify((t=>{const r=T.In.getActiveItem(t),i=t.items.filter((t=>!e.isScheduledToDispose(t)||(0,f.Kg)((0,c.ff)(_.o.isAnimatable),_.o.isAnimatingRemoval)(t)||(0,d.pipe)(r,m.exists((e=>e.id===t.id))))),o=(0,d.pipe)(t,T.In.getActiveItemIndex(i));return(0,a._)((0,n._)({},t),{items:i,cardIndex:o})}),t),metadata:r})};const r=e=>t=>(0,d.pipe)(t.items.find((e=>t=>r=>r.positionState.watched&&!e.isHidden(r)&&(0,d.pipe)(t,g.wo((e=>e.id!==r.id))))(e)(T.In.getActiveItem(t))),m.map((({value:t,index:r})=>({index:r,value:(0,d.pipe)(t,m.fromPredicate((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));var i=e.updateItemsPositions=e=>i=>{const o=T.In.getActiveItem(i),s=r(e)(i),l=(0,d.pipe)(s,m.chain(y.ei("value")),m.map((e=>e.positionState.height)));let c=0;const u=(0,d.pipe)(o,g.wo((e=>e.positionState.isHeightValid))),p=(0,d.pipe)(s,m.map(y.ei("index")),m.getOrElse((()=>{return e=i.cardIndex,(0,d.pipe)(e,m.map((e=>0===e?1:0)),m.getOrElse((()=>0)));var e}))),h=i.items.map(((t,r,n)=>{const a=g.FX(n)(i.cardIndex),o=a||n===p,s=e.isScheduledToDispose(t)||(a?t.positionState.isHeightValid:m.isSome(l)),h=e.isScheduledToDispose(t)?e.useReferenceHeightOnRemove(t)?(0,d.pipe)(l,m.getOrElse((()=>t.positionState.height))):0:a?t.positionState.height:(0,d.pipe)(l,m.getOrElse((()=>t.positionState.height))),f={absTop:a||u?c:t.positionState.absTop,height:h,animationInProgress:i.animation(t,n),visible:t.positionState.visible,isHeightValid:s,watched:o,inert:t.positionState.inert};return e.shouldAnimatePositionChange(f,a)(t)||(f.animationInProgress=!1),c+=h,k.s.PositionState.eq.equals(t.positionState,f)?t:e.changePosition(f)(t)})),f=t(h),v=(0,d.pipe)(o,g.wo((e=>e.positionState.isHeightValid)))&&(0,d.pipe)(h.getAt(p),g.wo((e=>e.positionState.isHeightValid)));return(0,a._)((0,n._)({},i),{items:h,cardsHeight:f,isCardsHeightValid:v})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,r,i)=>n=>(0,d.pipe)(e,v.v.reduce(n,((e,{alert:t})=>i([t])(e)),((e,t,{alert:i})=>r([i])(e)),((e,{alert:r})=>t([r])(e)))),e.applyWithFilter=(e,t)=>(r,i,n,a)=>{const o=(0,c.ls)(p.uK(e),(e=>(0,c.ls)(a(e.left),n(e.right))));return t(r,(t=>i(t.filter(e))),o,a)}}(r=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=u.Ue((e=>e.items),((e,r)=>t.setVisibleItems(e)(r))),e.getFeedItems=()=>u.Ue((e=>e.items),((e,r)=>t.setVisibleItems(e)(r)))}(i=e.Prism||(e.Prism={}));e.getEq=e=>x.f7(((t,r)=>{if(t.kind===T._L.abstract||r.kind===T._L.abstract)return t.id===r.id;{const i=t,n=r;return t.id===r.id&&m.getEq(e).equals(T.In.getActiveItem(i),T.In.getActiveItem(n))&&i.meta.equals(r.meta)&&i.items.equals(n.items)}})),e.lensHash={hashCode:e=>{if(e.kind===T._L.abstract)return(0,E.AC)(e.id);{const r=e;let i=7;return i=31*i+(0,E.AC)(e.id),i=31*i+(t=T.In.getActiveItem(r),(0,d.pipe)(t,m.fold((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*i+e.meta.count}var t}};let M;!function(e){e.getAlertReleaser=e=>({release:t=>r=>{const i=r.items.map(e.removeAlertFromItem([t],r)),o=(0,d.pipe)(r.cardIndex,m.chain((t=>(0,d.pipe)(i.findRightFrom(e.isScheduledToDispose,t),m.map((e=>e.index))))),m.isSome)?T.wj.skip:T.wj.force;return(0,a._)((0,n._)({},r),{animation:o,items:i})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>r=>{const i=(0,d.pipe)(r,e,m.filter((0,c.ff)(t.isScheduledToDispose)),m.map((e=>r.items.add((0,d.pipe)(e,t.unselect(m.none,r.itemsOrd))))),m.getOrElse((()=>r.items)));return(0,a._)((0,n._)({},r),{items:i,animation:T.wj.force,cardIndex:m.none})}}),e.getHasChecksFeed=()=>({willShowChecksFeed:e=>e.type!==T.Nm.advanced});const t=e=>(0,d.pipe)(b.ordNumber,b.contramap((t=>(0,d.pipe)(e.items.get(t.id),m.map(y.ei("index")),m.getOrElse((()=>-1))))));e.getSelectableByAlert=(e,r)=>({selectItemByAlert:i=>o=>{if(!r.willShowChecksFeed(o))return o;const l=e(o),u=o.items.find(r.isSelectableByAlert(i));(0,C.kG)(m.isSome(u),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>i.alert.toString()));const{value:p,index:h}=g.MH(u),f=(0,s.fold)(b.getMonoid())([o.itemsOrd,t(o)]),y=(0,d.pipe)(l,m.filter((0,c.ff)(r.isScheduledToDispose)),m.map((e=>o.items.add((0,d.pipe)(e,r.unselect(m.some(p),o.itemsOrd))))),m.getOrElse((()=>o.items))).add((0,d.pipe)(p,r.selectByAlert(l,i,f)));return(0,a._)((0,n._)({},o),{items:y,animation:T.wj.force,cardIndex:m.some(h)})}}),e.getSelectableById=(e,r)=>({selectItemById:i=>o=>{const l=e(o),u=o.items.get(i),{value:p,index:h}=g.MH(u),f=(0,s.fold)(b.getMonoid())([o.itemsOrd,t(o)]),y=(0,d.pipe)(l,m.filter((0,c.ff)(r.isScheduledToDispose)),m.map((e=>o.items.add((0,d.pipe)(e,r.unselect(m.some(p),f))))),m.getOrElse((()=>o.items))).add((0,d.pipe)(p,r.select(l,f)));return(0,a._)((0,n._)({},o),{items:y,animation:T.wj.force,cardIndex:m.some(h)})}}),e.getItemReleaser=()=>({removeItemById:e=>t=>i(t.items.remove(e))(t)});function r(e,t,r){return i=>(0,d.pipe)(m.of(i),m.filter((e=>!r.isScheduledToDispose(e)&&t(e))),m.chain(r.hasActiveAlert),m.filter((t=>e.isRegistered(t.alert.id))))}e.getMetaUpdatable=function(){return{updateMeta:e=>t=>(0,a._)((0,n._)({},t),{meta:w.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{changeItemsVisualState:e=>r=>t.willShowChecksFeed(r)?(0,a._)((0,n._)({},r),{items:r.items.map(t.changeVisualState(e))}):r,finishApplyAnimation:r=>i=>{(0,C.kG)(r.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const o=i.id,s=e=>{const i=e.items.map(t.removeAlertFromItem(r,e));return(0,a._)((0,n._)({},e),{items:i})};if(w.R.isOutcomeId(o))return s(i);switch(o){case w.R.SpecialId.AllAlerts:case w.R.SpecialId.PredictionTakeaways:case w.R.SpecialId.PredictionEmogenie:case w.R.SpecialId.RealTimeProofit:case w.R.SpecialId.FreePremiumAlerts:return s(i);case w.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case w.R.SpecialId.Plagiarism:return(0,C.kG)(r.every(S.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),s(i);default:return(0,C.vE)(o)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,d.pipe)(T.In.getActiveItem(t),m.exists((t=>e.isScheduledToDispose(t))))||m.isNone(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasSelectableAlert=r,e.getHasAlerts=function(e,t,i,n){const a=e=>r(t,i(e),n),s=e=>e.id===w.R.SpecialId.Premium||e.id===w.R.SpecialId.Plagiarism?e.meta.count:(0,d.pipe)(T.In.getActiveItem(e),m.chain(n.hasActiveAlert),m.map((e=>e.alert)),m.exists(S.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:s,getActiveAlertsCount:s,getActiveAlert:e=>(0,d.pipe)(T.In.getActiveItem(e),m.chain(n.hasActiveAlert)),findFirstAlert:e=>(0,d.pipe)(e.items.values(),l.f2(a(e))),findNextAlert:t=>((0,C.kG)(m.isSome(T.In.getActiveItem(t))===m.isSome(t.cardIndex),"Lens is in wrong state: cardIndex must reference existing card"),(0,d.pipe)((0,o.g)(m.option)(T.In.getActiveItem(t),t.cardIndex),m.chain((([r,i])=>(0,d.pipe)(e.nextAlert(r),m.alt((()=>e.prevAlert(r))),m.map((e=>({alert:e,highlightIndex:0}))),m.alt((()=>(0,d.pipe)(I.uU(t.items.values(),i,a(t)),m.map((e=>e.value)))))))),g.vx((0,d.pipe)(t.items.values(),l.f2(a(t))))))}};var i=e.setVisibleItems=e=>t=>(0,a._)((0,n._)({},t),{cardIndex:(0,d.pipe)(T.In.getActiveItem(t),m.chain((t=>(0,d.pipe)(e.get(t.id),m.map((e=>e.index)))))),items:e})}(M=e.Capabilities||(e.Capabilities={}))}(i||(i={}))},76201:(e,t,r)=>{r.d(t,{v:()=>D});var i,n,a=r(30013),o=r(57050),s=r(66896),l=r(36156),c=r(35416);(i||(i={})).create=()=>({id:s.R.SpecialId.Cheetah,type:c.Nm.cheetah,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.Cheetah,title:"Grammarly Ideate"},s.R.Meta.group.empty,o.jv),hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),function(e){let t;e.create=function(e,r){return Boolean(t)||(t={id:s.R.SpecialId.Closed,kind:c._L.abstract,type:c.Nm.closed,meta:s.R.createStaticLens({id:s.R.SpecialId.Closed,title:"Closed"},s.R.Meta.group.empty,e),hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}),t}}(n||(n={}));var d,u,p,m=r(50858),h=r(55818),g=r(5114);u=d||(d={}),p=u.create=()=>({id:s.R.SpecialId.DraftAI,type:c.Nm.draftAI,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.DraftAI,title:"Draft AI"},s.R.Meta.group.empty,o.jv),transitionSource:g.none,hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),u.createFromTransitionSource=e=>(0,h._)((0,m._)({},p()),{transitionSource:g.some(e)});var f,y,v=r(73975),x=r(40327),b=r(22232),C=r(95195),I=r(83078),S=r(89943),w=r(74660),A=r(95983),E=r(17594);!function(e){function t(e){return A.vM("cardId",e)}e.create=function(e,t,r){(0,b.kG)(e.id===s.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const i=A.aW.empty((e=>e.id),r.compare),n=g.none;return{id:s.R.SpecialId.Plagiarism,kind:c._L.persistent,type:c.Nm.plagiarism,meta:e,cardIndex:n,items:i,itemsOrd:r,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===s.R.SpecialId.Plagiarism?(0,h._)((0,m._)({},t),{items:t.items.map((t=>E.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism)):t))}):t};var r=e.add=e=>r=>i=>{const n=t(r),a=Array.from(n.entries()).reduce(((t,[r,i])=>(0,x.pipe)(t.update(r,(t=>e.addPlagiarismAlerts(t,i))),C.fold((()=>t.add(e.createAdded(r,i))),o.yR))),i.items),s=(0,x.pipe)(c.In.getActiveItem(i),g.map((({id:e})=>I.MH(a.get(e)).index))),l=g.getEq(v.lr).equals(s,i.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},i),{cardIndex:s,items:a,animation:l})},i=e.remove=e=>r=>i=>{const n=t(r),a=c.In.getActiveItem(i),s=Array.from(n.entries()).reduce(((t,[r,n])=>(0,x.pipe)(t.update(r,(t=>{const r=(0,x.pipe)(e.remove(t,n,(0,x.pipe)(a,g.map((e=>i.itemsOrd.compare(t,e)>0)),g.getOrElse(o.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism))));return(0,x.pipe)(a,g.exists((e=>e.id===r.id)))?e.selectNextAlert(r,i.itemsOrd):r})),C.fold((()=>t),o.yR))),i.items);return(0,h._)((0,m._)({},i),{items:s,animation:c.wj.force})},n=e.update=e=>t=>r=>l(e)(t.filter((0,o.ff)(e.shouldAnimateAlertApply)))(r),l=e.updateWithAlerts=e=>r=>n=>{const[a,s]=S.uK(r,w.bZ.isRegistered),l=t(a),d=Array.from(l.entries()).reduce(((t,[r,i])=>(0,x.pipe)(t.update(r,(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism)))),C.fold((()=>t.add(e.createAdded(r,i))),o.yR))),i(e)(s)(n).items),u=(0,x.pipe)(c.In.getActiveItem(n),g.map((({id:e})=>(0,x.pipe)(d.get(e),g.map((({index:e})=>e)),g.getOrElse((()=>0))))));return(0,h._)((0,m._)({},n),{cardIndex:u,items:d,animation:c.wj.proceed})};e.getAlertsHandler=function(e){return t=>a.v.ApplyDiff.apply(t,r(e),n(e),i(e))}}(f||(f={})),function(e){e.create=function(e,t,r){const i=A.aW.empty((e=>e.id),r.compare);return{id:s.R.SpecialId.Premium,kind:c._L.active,type:c.Nm.advanced,meta:e,items:i,itemsOrd:r,cardIndex:g.none,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.getAlertsHandler=function(e,n){return o=>a.v.ApplyDiff.apply(o,t(e),i(e,n),r(n))};var t=e.add=e=>t=>r=>{const i=t.map(e.createFromAlert(r.id)),n=r.items.add(i),a=c.In.getActiveItemIndex(n)(r);return(0,h._)((0,m._)({},r),{cardIndex:a,items:n,animation:c.wj.proceed})},r=e.remove=e=>t=>r=>{const i=new Set(t.map((e=>e.id))),n=r.items.filter((0,o.ls)(e.hasActiveAlert,g.map((e=>e.alert)),g.exists((e=>i.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),r.items),a=c.In.getActiveItemIndex(n)(r);return(0,h._)((0,m._)({},r),{cardIndex:a,items:n})},i=e.update=(e,i)=>n=>a=>{const[s,l]=S.uK(n,w.bZ.isRegistered);return(0,o.zG)(a,r(i)(l),t(e)(s))}}(y||(y={}));var _,k=r(17771),T=r(71249),M=r(8125),N=r(91549);!function(e){const t=w.h$.ord;function r(e){return e.id}function i(e){const t=e.map((e=>[N.R.getAlertOutcomeBundle(e),e]));return A.vM((([e,t])=>r(e)),t)}e.getCardId=r,e.initCardsHash=function(e,r,n,a,o){(0,b.kG)((0,x.pipe)(n,I.wo((({alertIndex:e})=>void 0!==r[e]))),"Can not find alert for provided alertIndex");const s=i(r),l=(0,x.pipe)(n,g.map((({alertIndex:e})=>((0,b.kG)(void 0!==r[e],"Can not find alert for provided alertIndex"),r[e]))));let c=g.none;const d=A.aW.empty(N.R.getId,o.compare),u=Array.from(s.entries()).reduce(((r,[i,n])=>{const o=n.map((([e,t])=>t)),s=n[0][0];return(0,x.pipe)(l,g.map((e=>o.indexOf(e))),g.filter((e=>e>-1)),g.fold((()=>r.add(a.createRendered(e)(i,s,o,t))),(n=>{const l=a.createFocused(e)(i,s,o,n,t);return c=g.some(i),r.add(l)})))}),d),p=(0,x.pipe)(c,g.chain((e=>(0,x.pipe)(u.get(e),g.map((e=>e.index))))));return{cardIndex:p,cards:u}},e.create=function(e,t,r,i){const n=A.aW.empty(N.R.getId,i.compare),o=g.none;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:n,itemsOrd:i,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}};var n=e.add=(e,r)=>n=>a=>{if(0===n.length)return a;const s=i(n),l=Array.from(s.entries()).reduce(((i,[n,s])=>{const l=s.map((([e,t])=>t)),c=s[0][0];return(0,x.pipe)(i.update(n,(e=>r.updateWithAlerts(l)(e))),C.fold((()=>i.add(e.createAdded(a.id)(n,c,l,t))),o.yR))}),a.items),d=(0,x.pipe)(a,c.In.getActiveItemIndex(l)),u=g.getEq(v.lr).equals(d,a.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},a),{cardIndex:d,items:l,animation:u})},s=e.remove=e=>t=>r=>{const n=i(t),a=Array.from(n.entries()).reduce(((t,[i,n])=>(0,x.pipe)(t.update(i,(t=>e.removeAlertFromItem(n.map((([e,t])=>t)),r)(t))),C.fold((()=>t),o.yR))),r.items),s=(0,x.pipe)(r,c.In.getActiveItemIndex(a));return(0,h._)((0,m._)({},r),{cardIndex:s,items:a,animation:c.wj.force})},l=e.update=(e,t,r)=>i=>n=>d(e,r)(i.filter((0,M.ff)(t.shouldAnimateAlertApply)))(n),d=e.updateWithAlerts=(e,r)=>n=>l=>{if(0===n.length)return l;const{left:d,right:u}=(0,x.pipe)(n,a.v.filterAlertInLens(l,r),T.uK(w.bZ.isRegistered)),p=i(u),g=Array.from(p.entries()).reduce(((i,[n,a])=>{const s=a.map((([e,t])=>t)),c=a[0][0];return(0,x.pipe)(i.update(n,(e=>r.updateWithAlerts(s)(e))),C.fold((()=>i.add(e.createAdded(l.id)(n,c,s,t))),o.yR))}),s(r)(d)(l).items),f=(0,x.pipe)(l,c.In.getActiveItemIndex(g));return(0,h._)((0,m._)({},l),{cardIndex:f,items:g,animation:c.wj.proceed})};e.getAlertsHandler=function(e,t,r){return(i,o)=>c=>{const d=a.v.ApplyDiff.applyWithFilter(o,a.v.ApplyDiff.apply);return(0,x.pipe)(c,d(i,n(e,r),l(e,t,r),s(r)))}},e.getHasAlerts=function(e,t,r,i){const n=a.v.Capabilities.getHasAlerts(e,t,r,i),o=e=>a.v.Capabilities.getHasSelectableAlert(t,r(e),i);return(0,h._)((0,m._)({},n),{findNextAlert:t=>(0,x.pipe)((0,k.g)(g.option)(c.In.getActiveItem(t),t.cardIndex),g.chain((([r,i])=>(0,x.pipe)(e.nextAlert(r),g.alt((()=>e.prevAlert(r))),g.alt((()=>(0,x.pipe)(S.Bs(t.items.values(),i+1,o(t)),g.alt((()=>S.Bs(t.items.values(),0,o(t)))),g.chain((e=>(0,x.pipe)(t.items.getAt(e.index),g.map((e=>e.alerts[0]))))))))))),g.map((e=>({alert:e,highlightIndex:0}))))})}}(_||(_={}));var L,D,F=r(26027);!function(e){let t;function r(e,t){return`${e.id}_${t.id}`}e.isInSuccess=function(e,t=o.W8){return r=>0===r.meta.count&&(0===r.items.filter(t).size||g.isNone(r.items.filter(t).find((t=>!e.isScheduledToDispose(t)))))},function(e){function t(e){return t=>c.nL.hasSuccess(t)&&c.nL.hasItems(t)&&L.isInSuccess(e)(t.currentLens)}e.isInSuccess=t;e.isInGlobalSuccess=e=>r=>c.nL.is(s.R.SpecialId.AllAlerts)(r)&&t(e)(r)}(t=e.State||(e.State={})),e.getCardId=r,e.create=function(e,t,r,i){const n=A.aW.empty(F.X.getId,i.compare),o=g.none;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:n,itemsOrd:i,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}};var i=e.add=(e,t,i)=>n=>o=>{const s=n.map((n=>{const s=t.createAdded(o.id)(r(o.meta,n),n);return e(o,n)?s:a.v.Items.hideItem(s,i)})),l=o.items.add(s),d=c.In.getActiveItemIndex(l)(o),u=g.getEq(v.lr).equals(d,o.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},o),{cardIndex:d,items:l,animation:u})},n=e.remove=e=>t=>r=>{const i=new Set(t.map((e=>e.id))),n=r.items.map(e.remove((0,o.ls)(e.hasActiveAlert,g.map((e=>e.alert)),g.fold(o.jv,(e=>i.has(e.id)))),(e=>(0,x.pipe)(c.In.getActiveItem(r),g.map((t=>r.itemsOrd.compare(e,t)>0)),g.getOrElse(o.W8))))),a=(0,x.pipe)(r.cardIndex,g.chain((t=>(0,x.pipe)(n.findRightFrom((t=>e.isScheduledToDispose(t)),t),g.map((e=>e.index))))),g.isSome)?c.wj.skip:c.wj.force,s=(0,x.pipe)(r,c.In.getActiveItemIndex(n));return(0,h._)((0,m._)({},r),{cardIndex:s,items:n,animation:a})},l=e.update=(e,t,r)=>i=>n=>d(t,e,r)(i.filter((0,M.ff)(t.shouldAnimateAlertApply)))(n),d=e.updateWithAlerts=(e,t,i)=>n=>s=>{if(0===n.length)return s;const l=(0,x.pipe)(n,a.v.filterAlertInLens(s,i),T.UI((e=>[r(s.meta,e),e])),T.u4(s.items,((r,[n,l])=>(0,x.pipe)(r.update(n,i.updateWithAlerts([l])),C.fold((()=>{const o=e.createAdded(s.id)(n,l);return r.add(t(s,l)?o:a.v.Items.hideItem(o,i))}),o.yR))))),d=c.In.getActiveItemIndex(l)(s);return(0,h._)((0,m._)({},s),{cardIndex:d,items:l,animation:c.wj.proceed})};e.getAlertHandler=function(e,t,r=o.W8){return(o,s)=>{const c=a.v.ApplyDiff.applyWithFilter(s,a.v.ApplyDiff.apply);return a=>(0,x.pipe)(a,c(o,i(r,e,t),l(r,e,t),n(t)))}}}(L||(L={})),function(e){var t=a.v.Prism;e.Prism=t;var r=a.v.Items;e.Items=r;var o=a.v.Capabilities;e.Capabilities=o;var s=a.v.ApplyDiff;e.ApplyDiff=s;e.filterAlertInLens=a.v.filterAlertInLens,e.findItemWithAlertInLens=a.v.findItemWithAlertInLens,e.lensHash=a.v.lensHash,e.getEq=a.v.getEq;var l=n;e.Closed=l;var c=d;e.DraftAI=c;var u=f;e.Plagiarism=u;var p=y;e.Premium=p;var m=_;e.WithBundles=m;var h=L;e.WithSuccess=h;var g=i;e.Cheetah=g}(D||(D={}))},73841:(e,t,r)=>{r.d(t,{l:()=>C});var i=r(18775),n=r(31542),a=r(11064),o=r(40327),s=r(22232),l=r(8125),c=r(95195),d=r(73975),u=r(5114),p=r(42040),m=r(46680),h=r(66896),g=r(19751),f=r(98403),y=r(17594),v=r(48521),x=r(35416),b=r(89770);class C{dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case x.nL.Effect.Type.Applicator:case x.nL.Effect.Type.ItemsApplicator:return e.source;case x.nL.Effect.Type.SwitchLens:return e.source.pipe(g.tap((e=>this._switchLensActions.next(e))),g.switchMapTo(g.NEVER));case x.nL.Effect.Type.SwitchAlert:return e.source.pipe(g.tap((e=>this._switchAlertActions.next(e))),g.switchMapTo(g.NEVER));default:return(0,s.vE)(e)}}_checkState(e){try{if(x.nL.hasCards(e)){const t=e.currentLens.items.filter((0,l.W9)(v.o.isAnimatable,v.o.isFocused));(0,s.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return c.left(e)}return c.right(void 0)}constructor(e,t,r,s,v,C,I){(0,i._)(this,"_state",void 0),(0,i._)(this,"_stateProvider",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_alertsService",void 0),(0,i._)(this,"_stateSideEffects",void 0),(0,i._)(this,"_getActiveAlert",void 0),(0,i._)(this,"_stateTransformer",void 0),(0,i._)(this,"focusLens",void 0),(0,i._)(this,"focusAlert",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_ts",void 0),(0,i._)(this,"_switchLensActions",void 0),(0,i._)(this,"_switchAlertActions",void 0),(0,i._)(this,"_addMetadata",void 0),(0,i._)(this,"_focusLensEffect",void 0),(0,i._)(this,"_focusAlertEffect",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_effects",void 0),this._state=e,this._stateProvider=t,this._alertsReader=r,this._alertsService=s,this._stateSideEffects=v,this._getActiveAlert=C,this._stateTransformer=I,this.focusLens=(e,t,r={toFocus:x.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:r})},this.focusAlert=(e,t,r)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:r}})},this._log=p.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=p.C8.TimeSeries.rootFemetrics.getMetric("lens_state.manager"),this._switchLensActions=new g.Subject,this._switchAlertActions=new g.Subject,this._addMetadata=e=>t=>t.pipe(g.map((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:r=x.Zz.defaultOptions.focusBehavior,order:i}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),h.R.isClosedId(e))return(0,o.pipe)(g.of(x.nL.Effect.Applicator.Source.override((0,b.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(h.R.isDraftAIId(e)||h.R.isCheetah(e)){const t=h.R.isCheetah(e)?(0,b.yC)():(0,b.zc)();return(0,o.pipe)(g.of(x.nL.Effect.Applicator.Source.override(t)),this._addMetadata({sourceId:"LSM.focusLensEffect"}))}const n=this._state.get(),a=n.patch({switchOrder:Boolean(i)?i:n.switchOrder,alertSource:t});return(0,o.pipe)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:r}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:r})=>{this._log.isEnabled(m.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const i=this._state.get(),n=i.patch({switchOrder:Boolean(r.order)?r.order:i.switchOrder,alertSource:t});return(0,o.pipe)(this._stateProvider.getLensEventsByAlert(n,function(e,t,r){if(e===h.R.SpecialId.PredictionTakeaways||e===h.R.SpecialId.PredictionEmogenie||e===h.R.SpecialId.RealTimeProofit||e===h.R.SpecialId.FreePremiumAlerts)return e;if(void 0!==r)return r;if(e===h.R.SpecialId.Closed||e===h.R.SpecialId.AllAlerts)return h.R.SpecialId.AllAlerts;return t}(i.currentLens.id,e.alert.lensId,r.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const S=this._state.get(),w=this._stateTransformer,A=new g.BehaviorSubject(S);this._effects=g.mergeStatic(...this._stateSideEffects.map((({when:e,what:t,id:r})=>this._state.view("currentLens","id").view(e).pipe(g.switchMap(f.Ft((0,o.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:r}))))))),g.mergeStatic(this._switchAlertActions.pipe(g.map(this._focusAlertEffect)),this._switchLensActions.pipe(g.map(this._focusLensEffect))).pipe(g.switchAll()));const E=this._ts.getTimer("batched.long_state_change"),_=d.MW({activeAlert:u.getEq(y.$.eq),lensId:d.yv});this._subs=[this._effects.pipe(g.catchError(((e,t)=>(this._log.error("Got error from effects: ",e),t))),g.withLatestFrom(A,(({source:e,metadata:t},r)=>({state:e(r),metadata:t}))),g.catchError(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),g.tap((e=>{this._log.isEnabled(m.i.TRACE)&&this._log.trace("lens state before state transformer: ",e)})),g.map(w),g.catchError(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,o.pipe)(e,c.fold((({state:e,metadata:t})=>{this._log.isEnabled(m.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,o.pipe)(this._checkState(e),c.fold((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>A.next(e))))}),c.fold((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,o.pipe)(A,g.map((e=>({activeAlert:x.nL.getActiveAlert(this._getActiveAlert)(e),lensId:e.currentLens.id}))),g.tap((e=>this._log.trace("active alert: ",e.activeAlert))),g.distinctUntilChanged(_.equals),g.switchMap((({activeAlert:e,lensId:t})=>(0,o.pipe)(e,f.aI((e=>(0,o.pipe)(this._alertsService.takeReference(e,`activeCard_${t}`),c.mapLeft((e=>this._log.error("can not take alertRef",e))),c.fold(a.of(l.Q1),(e=>e.dispose))))))))).subscribe(),A.subscribe((e=>{const t=performance.now();n.unstable_batchedUpdates((()=>{this._state.set(e)}));const r=performance.now()-t;r>16&&E.recordTime(r)}))],x.nL.hasCards(S)&&(0,o.pipe)(x.nL.getActiveAlertHighlight(this._getActiveAlert)(S),u.filter((e=>this._alertsReader.isRegistered(e.alert.id))),u.fold((()=>this._switchLensActions.next({lensId:S.currentLens.id,alertSource:S.alertSource,options:{order:S.switchOrder,toFocus:x.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:S.alertSource,options:{lensId:S.currentLens.id,order:S.switchOrder}}))))}}(0,i._)(C,"toLensAlert",(({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})))},89770:(e,t,r)=>{r.d(t,{T:()=>I,oq:()=>A,yC:()=>w,zc:()=>S});var i=r(18775),n=r(57050),a=r(40327),o=r(73975),s=r(22232),l=r(92843),c=r(5114),d=r(8125),u=r(83078),p=r(46680),m=r(42040),h=r(74660),g=r(66896),f=r(4390),y=r(91247),v=r(19751),x=r(35416),b=r(76201);const C=(0,n.ff)(h.bZ.isMuted),I=()=>x.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:b.v.Closed.create(n.jv,o.f7(n.jv))}),S=()=>x.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:b.v.DraftAI.create()}),w=()=>x.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:b.v.Cheetah.create()});class A{static _mapByActiveLensId(e,t,r,i){if(g.R.isOutcomeId(e))return i();switch(e){case g.R.SpecialId.Plagiarism:return t();case g.R.SpecialId.Premium:return r();case g.R.SpecialId.AllAlerts:case g.R.SpecialId.PredictionTakeaways:case g.R.SpecialId.PredictionEmogenie:case g.R.SpecialId.RealTimeProofit:case g.R.SpecialId.FreePremiumAlerts:return i();default:return(0,s.vE)(e)}}_conditionedApplicator(e,t){return r=>i=>e(i,r)?t(r)(i):i}static _filterALEvents(e,t){return r=>v.of((0,a.pipe)(r,f.p.Diff.filter((t=>e(t.alert))),(e=>(t.isEnabled(p.i.TRACE)&&t.trace("diff after filter",e),e)))).pipe(v.filter((0,n.ff)(l.v.isEmpty)))}emptyState(e=g.R.SpecialId.AllAlerts){return x.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:c.none,previousState:c.none,alertSource:h.l$.api}),alertSource:h.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,r={}){const i=this._getActiveLensMeta(t),n=this._lensAlerts(i),o=this._createState(e,c.none,i,t,n),s=r.focusBehavior?this._getAlertToFocus(r.focusBehavior,o):c.none;e.currentLens.id===t&&x.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==n.length&&this._log.warn("Lens contains inconsistent number of alerts",i.id);const l=x.nL.hasItems(o)?(0,a.pipe)(s,c.fold((()=>o),(r=>this._createState(e,c.some(r),i,t,n)))):o;return this._generateEventsFromState(l,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,r){(0,s.kG)(c.isSome(this._alertsReader.getById(r.alert.id)),"Can't focus non existing alert",r.alert.id);const i=this._getActiveLensMeta(t),n=e.currentLens.meta.id===t&&e.currentLens.meta.filter(r.alert)&&x.nL.hasItems(e)?x.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(r),e):this._createState(e,c.some(r),i,t,this._lensAlerts(i));return this._generateEventsFromState(n,this._alertsHandlerFactory(t))}findNextAlertInTextByLens(e,t){return this._alertSearchService.findNextAlertInText(e,(0,d.W9)(this._alertsFilterService.alertVisibleInText(t.id),(t=>t.id!==e.alert.id),(0,n.ls)(b.v.findItemWithAlertInLens(t,this._capabilities),c.isSome)))}findPremiumAlert(){return this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get().count>0?this._alertSearchService.findPremiumAlert():c.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return x.nL.hasItems(e)&&e.currentLens.kind===x._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):x.nL.hasItems(e)&&e.currentLens.type===x.Nm.lensview?this._lenses.pipe(v.distinctUntilChanged(y.w.eq.equals),v.map((0,n.ls)(y.w.lookup(e.currentLens.id),c.map(this._updateMetaSource(e.currentLens.id)),c.getOrElse((()=>x.nL.Effect.Applicator.Source.identity))))):x.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return v.mergeStatic(this._checkingState.pipe(v.pairwise(),v.map((([e,t])=>f.p.diff(e,t))),v.tap((e=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace("new alerts diff",e)})),v.switchMap(A._filterALEvents(e.currentLens.meta.filter,this._log)),v.map(this._conditionedApplicator(((e,t)=>{const r=this._alertsFilterService.getLensesFilter(e.currentLens.id),i=(0,a.pipe)(t,f.p.Diff.filter((0,n.ff)((({alert:e})=>r(e)))));return l.v.isEmpty(i)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(v.startWith(x.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=A._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,s.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState(e,t,r,i,n){(0,s.kG)(u.wo((({alert:e})=>c.isSome(this._alertsReader.getInteractable(e.id))))(t),"we can create state only with alert in registered state",(()=>(0,a.pipe)(t,c.fold((()=>"null"),(e=>e.toString())))));const o=e.alertSource,l=e.switchOrder,d=this._createLens({lensId:i,initialLens:r,visibleAlerts:n,alertHighlight:t,alertSource:o,previousState:c.some(e.currentLens)});return x.nL.create({currentLens:d,alertSource:o,switchOrder:l})}_createLens(e){return this._lensFactory(e.lensId,e.initialLens,e.visibleAlerts,this._focusFirstFilter(e),e.previousState)}_getAlertToFocus(e,t){switch(e.kind){case x.nL.Effect.FocusBehaviorType.noFocus:case x.nL.Effect.FocusBehaviorType.unFocus:return c.none;case x.nL.Effect.FocusBehaviorType.focusFirst:return x.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):c.none;case x.nL.Effect.FocusBehaviorType.focusNext:return x.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):c.none;case x.nL.Effect.FocusBehaviorType.focusAlert:return c.some(e.alertHighlight);default:(0,s.vE)(e)}}constructor(e,t,r,n,o,s,l,c,d,u=x.nL.FocusFirstFilter.defaultFilter){(0,i._)(this,"_checkingState",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_lenses",void 0),(0,i._)(this,"_alertSearchService",void 0),(0,i._)(this,"_lensPreviewVM",void 0),(0,i._)(this,"_lensFactory",void 0),(0,i._)(this,"_alertsHandlerFactory",void 0),(0,i._)(this,"_capabilities",void 0),(0,i._)(this,"_alertsFilterService",void 0),(0,i._)(this,"_focusFirstFilter",void 0),(0,i._)(this,"_transformAlertsDiffToApplicator",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"findClosestAlertHighlight",void 0),(0,i._)(this,"findNextAlertInText",void 0),(0,i._)(this,"_updateMetaSource",void 0),(0,i._)(this,"_lensAlerts",void 0),this._checkingState=e,this._alertsReader=t,this._lenses=r,this._alertSearchService=n,this._lensPreviewVM=o,this._lensFactory=s,this._alertsHandlerFactory=l,this._capabilities=c,this._alertsFilterService=d,this._focusFirstFilter=u,this._transformAlertsDiffToApplicator=e=>t=>r=>x.nL.hasItems(r)?r.patch({currentLens:e(t,C)(r.currentLens)}):r,this._log=m.C8.Logging.getLogger("FocusedLensManagerImpl"),this.findClosestAlertHighlight=this._alertSearchService.findClosestAlertHighlight,this.findNextAlertInText=this._alertSearchService.findNextAlertInText,this._updateMetaSource=e=>t=>r=>e===r.currentLens.id&&x.nL.hasItems(r)?x.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),r):r,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,a.pipe)(this._checkingState.get(),f.p.reduce([],((e,{alert:r})=>t(r)?[...e,r]:e)),(e=>e.sort(h.h$.ord.compare)))}}}},39920:(e,t,r)=>{r.d(t,{ad:()=>u,gi:()=>p,is:()=>c,kn:()=>d});var i,n=r(18775),a=r(22232),o=r(66896),s=r(35416),l=r(76201);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return r=>t(e(r))}}(i||(i={}));const c=(e,t)=>r=>{if(o.R.isOutcomeId(r))return l.v.WithSuccess.getAlertHandler(e,t);switch(r){case o.R.SpecialId.Premium:return l.v.Premium.getAlertsHandler(e,t);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return l.v.WithSuccess.getAlertHandler(e,t);default:return(0,a.vE)(r)}},d=(e,t,r,i,n)=>a=>r(a)?l.v.WithBundles.getAlertsHandler(e,t,n):i(a);class u{create(e,t){return this._lensPredicate(t)?l.v.WithBundles.create(e,t,this._itemEq,this._itemOrd):this._inner.create(e,t)}constructor(e,t,r,i){(0,n._)(this,"_lensPredicate",void 0),(0,n._)(this,"_inner",void 0),(0,n._)(this,"_itemEq",void 0),(0,n._)(this,"_itemOrd",void 0),this._lensPredicate=e,this._inner=t,this._itemEq=r,this._itemOrd=i}}class p{create(e,t){const r=()=>l.v.WithSuccess.create(e,t,this._itemEq,this._itemOrd);if(o.R.isOutcomeId(e))return r();switch(e){case o.R.SpecialId.Premium:return l.v.Premium.create(t,this._itemEq,this._itemOrd);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return r();default:return(0,a.vE)(e)}}constructor(e,t){(0,n._)(this,"_itemEq",void 0),(0,n._)(this,"_itemOrd",void 0),this._itemEq=e,this._itemOrd=t}}},66866:(e,t,r)=>{r.d(t,{EQ:()=>S,ay:()=>C,$A:()=>I});var i,n=r(18775),a=r(12271),o=r(57050),s=r(40327),l=r(95195),c=r(8125),d=r(95574),u=r(22232),p=r(5114),m=r(83078),h=r(74660),g=r(66896),f=r(19751),y=r(98403),v=r(60797),x=r(73975),b=r(71249);!function(e){var t=e.eq=(0,x.MW)({alert:(0,x.Uz)((e=>e.id))(x.w4),highlightIndex:x.w4});e.getEq=()=>t,e.getHighlightRange=e=>b.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(i||(i={}));var C,I,S,w=r(35416),A=r(30013);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(C||(C={})),function(e){e.Mock=class{ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}constructor(){(0,n._)(this,"events",new f.Subject),(0,n._)(this,"focusAlertHighlight",(()=>l.left(new Error("Method not implemented.")))),(0,n._)(this,"highlightAlertHighlight",(()=>l.left(new Error("Method not implemented.")))),(0,n._)(this,"moveCursorToHighlight",c.Q1)}},e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,l.mapLeft((()=>new Error("Mark is collapsed"))),l.chain((t=>d.vM((()=>{const r=e.getHighlightRanges(),i=r.length>1?r.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,u.kG)(-1!==i,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:r,targetRange:t}))),i})))))}}(I||(I={})),function(e){var t=e.getHighlightSubscription=(e,t,r)=>e.pipe(f.distinctUntilChanged(p.getEq(h.h$.ord).equals),f.switchMap((e=>(0,s.pipe)(e,p.fold((()=>f.EMPTY),(e=>f.Observable.create((()=>(r.debug(`highlight mark: ${e.id}`),(0,s.pipe)(t.highlightAlertHighlight(e),l.fold((t=>(r.error("Cannot highlight mark",t,{alertId:e.id}),c.Q1)),(t=>()=>{r.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),r=(e.getHoverAlertHightlightSource=(e,t,r,i)=>(0,s.pipe)(i,f.debounceTime(100),f.map((0,o.ls)(p.chain((i=>{const n=e.get();return w.nL.hasCards(n)?n.currentLens.items.find((e=>(0,s.pipe)(t.hasActiveAlert(e),p.map((e=>e.alert)),p.exists((t=>e.id===i&&r.isRegistered(t.id)))))):p.none})),p.chain((({value:e})=>t.hasActiveAlert(e))),p.map((e=>e.alert)))),f.distinctUntilChanged(p.getEq(h.h$.ord).equals),f.map(p.map((t=>({alert:t,highlightIndex:0,source:e.get().alertSource})))),f.startWith(p.none)),e.highlightMarkByHighlightedCard=(e,r,i,n,a,l)=>{const c=t(e.hovered.pipe(f.debounceTime(100),f.map((0,o.ls)(p.chain((e=>{const t=r.get();return w.nL.hasCards(t)?t.currentLens.items.find((t=>(0,s.pipe)(a.hasActiveAlert(t),p.map((e=>e.alert)),p.exists((r=>t.id===e&&n.isRegistered(r.id)))))):p.none})),p.chain((({value:e})=>a.hasActiveAlert(e))),p.map((e=>e.alert))))),i,l);return{id:"highlightMarkByHighlightedAlert",when:g.R.isWithAlertsId,what:w.nL.Effect.Applicator.create(c.pipe(f.switchMapTo(f.NEVER)))}},e.getAlertHighlightSource=e=>t=>(0,s.pipe)(t,f.distinctUntilChanged(p.getEq(h.h$.ord).equals),f.map(p.map((t=>({alert:t,source:e,highlightIndex:0})))),f.startWith(p.none)),e.getActiveHighlightSource=(e,t,r)=>e.view(w.nL.mapper((({currentLens:e,alertSource:t})=>(0,s.pipe)(r(e),p.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(f.switchMap(y.b2.rafScheduler),f.skipBy(p.getEq(i.getEq())),f.map(p.filter((e=>p.isSome(t.getRegistered(e.alert.id)))))));e.focusMarkByActiveAlert=(e,t,i,n,a,o=f.of(!0))=>{const d=(0,s.pipe)(r(e,i,n),f.tap(m.bw((e=>a.trace("new alert highlight: ",e)))),f.withLatestFrom(o),f.switchMap((([e,r])=>(0,s.pipe)(e,p.fold((()=>(a.debug("Nothing to focus"),f.EMPTY)),(e=>f.Observable.create((()=>(a.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}, shouldMoveCursor: ${r}`),e.source===h.l$.sidebar&&r&&t.moveCursorToHighlight(e,"start"),(0,s.pipe)(t.focusAlertHighlight(e),l.fold((t=>(a.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),c.Q1)),(t=>()=>{a.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))))));return{id:"focusMarkByActiveAlert",when:g.R.isWithAlertsId,what:w.nL.Effect.Applicator.create(d.pipe(f.switchMapTo(f.NEVER)))}},e.focusAlertByClickedMark=(e,t,r)=>({id:"focusAlertByActiveMark",when:w.nL.Effect.When.isSidebarOpen,what:w.nL.Effect.SwitchAlert.create(e.pipe(f.skip(1),v.oA,f.withLatestFrom(t.pipe(f.filter(w.nL.hasCards))),f.filter((([e,t])=>h.bZ.State.isRegistered(e.alert.state)&&(0,s.pipe)(e.alert,A.v.findItemWithAlertInLens(t.currentLens,r),p.isSome))),f.map(a.li),f.map((({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:h.l$.text,options:{order:"textOrder"}})))))});e.createOnAlertApplySideEffect=function(e,t){const r=e.pipe(f.map((e=>r=>e.type===C.Type.AppliedAlertAnimationFinished&&r.currentLens.meta.filter(e.alert)&&h.bZ.isApplicableAlert(e.alert)&&w.nL.hasItems(r)?r.patch({currentLens:t.finishApplyAnimation([e.alert])(r.currentLens),alertSource:e.alert.state.source}):r)));return{id:"onAlertApply",when:w.nL.Effect.When.isSidebarOpen,what:w.nL.Effect.Applicator.create(r)}}}(S||(S={}))},91605:(e,t,r)=>{r.d(t,{Bo:()=>s,Sh:()=>o,TV:()=>n,eh:()=>a});var i,n,a,o,s,l=r(18775),c=r(23239),d=r(5114),u=r(8125),p=r(66896),m=r(19751),h=r(4890),g=r(87363);!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(i||(i={})),function(e){e.NotAvailable="NotAvailable",e.DemoDoc="DemoDoc",e.EmptyDocument="EmptyDocument"}(n||(n={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(a||(a={})),function(e){e.NotAvailable="NotAvailable"}(o||(o={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={}));var r=e.documentActionAvailable={kind:"available"},i=(e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e}),e.cheetahDisabled=e=>({kind:"disabled",reason:e}));e.Mock=class{constructor(e={}){(0,l._)(this,"lensPreviews",void 0),(0,l._)(this,"activeLensId",c.h.create(p.R.SpecialId.AllAlerts).view()),(0,l._)(this,"documentActions",c.h.create({proofit:r,plagiarism:r,cheetah:i(o.NotAvailable)})),(0,l._)(this,"premiumButtonData",void 0),(0,l._)(this,"freePremiumButtonData",void 0),(0,l._)(this,"popover",c.h.create(d.none)),(0,l._)(this,"showMuteControl",c.h.create(!1)),(0,l._)(this,"isDocumentActionsDisabled",c.h.create(!1)),(0,l._)(this,"events",new m.Subject),(0,l._)(this,"lensTitleType",t.default),(0,l._)(this,"dispose",u.Q1),(0,l._)(this,"a11yContrast",!1),(0,l._)(this,"cardVisualMode",c.h.create(h.j.CardVisualMode.RegularLightMode));const n=new g.c.Mock(e);this.lensPreviews=n.lensPreviews}}}(s||(s={}))},64992:(e,t,r)=>{r.d(t,{O:()=>x,x:()=>v});var i=r(45701),n=r(18208),a=r(68983),o=r(66896),s=r(37539);function l(e){return`${e} ${n._6(e,"alert","alerts")}`}const c=e=>(t,r,i,n)=>t?l(r.count):e(r,i,n),d=(e,t)=>(r,i,n)=>{const a=r.count;return a>0?l(a):n&v.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c(d("No alerts","Looking good"))},p={description:"Helps make your writing easier to understand.",stateMessage:c(((e,t,r)=>{const n=(0,a.W)(i.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty)return"So far so good";if(e.count>0){if(s.g.isMin(t))return l(e.count);if(n(s.g.fromNumber(20)))return"Unclear";if(n(s.g.fromNumber(70)))return"A bit unclear";if(n(s.g.fromNumber(85)))return"Mostly clear";if(n(s.g.fromNumber(95)))return"Clear"}return"Very clear"}))},m={description:"Helps make your writing more interesting and effective.",stateMessage:c(((e,t,r)=>{const n=r&v.IsFreeUser,o=s.g.isMin(t),c=(0,a.W)(i.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty||n&&o)return"Nothing yet";if(n||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Bland";if(c(s.g.fromNumber(80)))return"A bit bland";if(c(s.g.fromNumber(95)))return"Engaging"}return"Very engaging"}))},h={description:"Helps you make the right impression on your reader.",stateMessage:c(((e,t,r)=>{const n=r&v.IsFreeUser,o=s.g.isMin(t),c=(0,a.W)(i.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty||n&&o)return"Nothing yet";if(n||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Serious issues";if(c(s.g.fromNumber(40)))return"Very off";if(c(s.g.fromNumber(95)))return"Slightly off"}return"Just right"}))},g={description:"Your organizations writing guidelines.",stateMessage:c(d("Nothing yet","All good"))},f={description:"Details on terms",stateMessage:c(d("Nothing yet","All good"))},y={[o.R.SpecialId.Correctness]:u,[o.R.SpecialId.Clarity]:p,[o.R.SpecialId.Engagement]:m,[o.R.SpecialId.Delivery]:h,[o.R.SpecialId.Vox]:g,[o.R.SpecialId.KnowledgeHub]:f,[o.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:c(((e,t,r)=>r&v.IsLensVisited&&!(r&v.IsDocumentEmpty)?r&v.IsLensActive?s.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"))},[o.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${n._6(e.count,"alert","alerts")}`))},[o.R.SpecialId.FreePremiumAlerts]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${n._6(e.count,"alert","alerts")}`))}};var v;function x(e){return y[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(v||(v={}))},12768:(e,t,r)=>{r.d(t,{g:()=>n});var i,n,a=r(18775),o=r(5114),s=r(8125),l=r(19751),c=r(23239);!function(e){let t,r;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){(0,a._)(this,"downloadStarted",c.h.create(!1)),(0,a._)(this,"beginDownload",s.Q1),(0,a._)(this,"tryToInterrupt",s.Q1),(0,a._)(this,"generateReport",(()=>{throw new Error("Method not implemented.")})),(0,a._)(this,"reportData",c.h.create(o.none)),(0,a._)(this,"dedHTML",""),(0,a._)(this,"dispose",s.Q1),(0,a._)(this,"sortedAlerts",[]),(0,a._)(this,"sortedPlagiarismAlerts",[])}}}(r=e.ViewModel||(e.ViewModel={}))}(i||(i={})),function(e){let t,r;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},r=o.some(new i.ViewModel.Mock)){(0,a._)(this,"statisticsState",void 0),(0,a._)(this,"reportViewModel",void 0),(0,a._)(this,"state",void 0),(0,a._)(this,"onModalClose",void 0),this.statisticsState=e,this.reportViewModel=r,this.state=l.of(this.statisticsState),this.onModalClose=s.Q1}}}(r=e.ViewModel||(e.ViewModel={}))}(n||(n={}))},27125:(e,t,r)=>{r.d(t,{L:()=>g,g:()=>a});var i=r(18775);if(3075==r.j)var n=r(40327);var a,o=r(23239);if(3075==r.j)var s=r(84966);if(3075==r.j)var l=r(5114);if(3075==r.j)var c=r(66896);if(3075==r.j)var d=r(19751);if(3075==r.j)var u=r(60797);if(3075==r.j)var p=r(98403);if(3075==r.j)var m=r(35416);if(3075==r.j)var h=r(76201);class g{dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===a.SuccessType.applied||e.type===a.SuccessType.zero?d.of(e):this._documentModel.checkingState.pipe(d.filter((e=>"checking"!==e)),d.first(),d.mapTo(e));return this._lensSwitch.pipe(u.cp((t=>this.textAmount.pipe(d.map(this._textAmountToSuccessType),d.startWith(t.prevLensType===m.Nm.lensview?{type:a.SuccessType.applied,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),d.pairwise(),d.map((([e,t])=>e.type===a.SuccessType.applied&&t.type!==a.SuccessType.zero?e:t)),d.switchMap(((t,r)=>0===r?d.of(t):e(t))),d.tap((e=>{this._trackSuccessStateChanged(e.type===a.SuccessType.applied?"applied":e.type===a.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(p.wW(this.successState))}constructor(e,t,r,u,g,f=h.v.WithSuccess.State.isInSuccess(u),y){(0,i._)(this,"_state",void 0),(0,i._)(this,"_documentModel",void 0),(0,i._)(this,"_trackSuccessStateChanged",void 0),(0,i._)(this,"_capabilities",void 0),(0,i._)(this,"mutedAlertsOptions",void 0),(0,i._)(this,"isInSuccess",void 0),(0,i._)(this,"_withBirthday",void 0),(0,i._)(this,"_getTextAmount",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"successState",void 0),(0,i._)(this,"textAmount",void 0),(0,i._)(this,"mutedAlerts",void 0),(0,i._)(this,"actionEvents",void 0),(0,i._)(this,"applicatorEffects",void 0),(0,i._)(this,"_currentLens",void 0),(0,i._)(this,"_listenTextSize",void 0),(0,i._)(this,"_lensSwitch",void 0),(0,i._)(this,"_textAmountToSuccessType",void 0),this._state=e,this._documentModel=t,this._trackSuccessStateChanged=r,this._capabilities=u,this.mutedAlertsOptions=g,this.isInSuccess=f,this._withBirthday=y,this._getTextAmount=e=>0===e?a.TextAmount.zero:e<=s.hD?a.TextAmount.small:a.TextAmount.large,this._subs=[],this.textAmount=o.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new d.Subject,this.applicatorEffects={id:"successViewModel.effects",when:c.R.isWithAlertsId,what:m.nL.Effect.Applicator.create(this.actionEvents.pipe(d.filter((({type:e})=>e===a.ActionType.More)),d.map((()=>e=>(0,n.pipe)(m.nL.hasItems(e)?this._capabilities.findFirstAlert(e.currentLens):l.none,l.fold((()=>e),(t=>e.patch({currentLens:m.nL.hasItems(e)?this._capabilities.selectItemByAlert(t)(e.currentLens):e.currentLens}))))))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,isAllAlerts:c.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(d.switchMap(p.Ft(this._documentModel.documentLength.view("trimmed"))),d.map(this._getTextAmount)).subscribe(p.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(d.startWith(this._currentLens.get()),d.pairwise(),d.map((([e,t])=>t.isSuccess?l.some({prevLensType:e.type,isAllAlerts:t.isAllAlerts}):l.none))),this._textAmountToSuccessType=e=>e===a.TextAmount.zero?{type:a.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===a.TextAmount.large?{type:a.SuccessType.large}:{type:a.SuccessType.small},this.successState=o.h.create({type:a.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.mutedAlerts=(0,n.pipe)(g,l.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}}!function(e){let t,r,n;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(r=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(n=e.SuccessType||(e.SuccessType={}));e.Mock=class{reviewMutedSuggestions(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}constructor(){(0,i._)(this,"textAmount",o.h.create(r.zero)),(0,i._)(this,"successState",o.h.create({type:n.zero,showBirthday:!1})),(0,i._)(this,"mutedSuggestionsCount",o.h.create(0))}}}(a||(a={}))},85287:(e,t,r)=>{r.d(t,{$4:()=>R,AP:()=>l,Dn:()=>o,IY:()=>E,bb:()=>O,rD:()=>I});var i=r(89894),n=r(40219),a=r(50224);const o="linear",s=i.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=i.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=i.ux.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),d=i.ux.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),u=i.ux.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=i.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=i.ux.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=i.ux.keyframes({"0%, 100%":{opacity:0}}),g=i.ux.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=i.ux.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=i.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=i.ux.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),x=i.ux.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),b=i.ux.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),C={position:"relative",margin:`${i.ux.rem(.5)} ${i.ux.rem(2)} ${i.ux.rem(.5)} 0`,userSelect:"none"},I={position:"absolute",width:i.ux.percent(100),pointerEvents:"none"},S={opacity:0,animation:`${s} ${i.ux.seconds(n.v4/4/1e3)} ${o} ${i.ux.seconds(n.v4/1e3)} forwards`},w={transformOrigin:"top",animation:`${l} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},A={transformOrigin:"bottom",animation:`${c} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},E={transformOrigin:"top",willChange:"contents"},_={animation:`${d} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},k={animation:`${u} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},T={animation:`${p} ${i.ux.seconds(n.v4/1e3)} ${o} reverse forwards`},M={animation:`${p} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},N={animation:`${m} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},L={animation:`${m} ${i.ux.seconds(n.v4/1e3)} ${o} reverse forwards`},D={transformOrigin:"top",animation:`${g} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${f} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`}}},F={position:"absolute",width:i.ux.percent(100),transformOrigin:"top",animation:`${y} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${v} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${i.ux.seconds(n.v4/1e3)} ${o} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${i.ux.rem(-1)})`}}},P={transformOrigin:"top",animation:`${x} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${b} ${i.ux.seconds(n.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${i.ux.seconds(n.v4/1e3)} ${o} none`}}},R=i.ux.stylesheet({wrapper:[C],animationWrapper:[{position:"relative"}],shade:[I],focused2renderedMain:[S],focused2renderedShade:[I,w],focused2renderedShadeClockwise:[I,A],rendered2focusedMainBase:[E],rendered2focusedMain:[E,_],rendered2focusedMainClockwise:[E,k],addedMain:[T],rendered2removedShade:[I,M],openedMain:[N],closedMain:[L],focused2successMain:[D],focused2successShade:[F],success2FocusedMain:[P]}),O=new Map([[l,R.focused2renderedShade],[c,R.focused2renderedShadeClockwise],[p,R.rendered2removedShade],[y,R.focused2successShade]])},22800:(e,t,r)=>{r.d(t,{S:()=>w,c:()=>A});var i=r(89894),n=r(40219),a=r(85287),o=r(50224);const s=i.ux.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=i.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=i.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),d=i.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),u=i.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=i.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=i.ux.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=i.ux.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=i.ux.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=i.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=i.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${s} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},x={transformOrigin:"top",animation:`${a.AP} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`}}}}},b={transformOrigin:"top",animation:`${u} ${i.ux.seconds(n.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${p} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${m} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`}}}}},I={animation:`${f} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${m} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${y} ${i.ux.seconds(n.v4/1e3)} ${a.Dn} forwards`},w=i.ux.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[a.rD,x],focused2renderedBundleShadeClockwise:[a.rD,b],rendered2focusedBundleMain:[a.IY,C],rendered2focusedBundleMainClockwise:[a.IY,I],rendered2focusedBundleShade:[a.rD,S]}),A=new Map([[a.AP,w.focused2renderedBundleShade],[u,w.focused2renderedBundleShadeClockwise],[y,w.rendered2focusedBundleShade]])},22391:(e,t,r)=>{r.d(t,{N:()=>p,p:()=>i});var i,n=r(27378),a=r(57050),o=r(5114),s=r(73975),l=r(15073),c=r(19751),d=r(90845),u=r(60797);function p(e=12){const{ref:t,onMount:r}=d.P.useElWatcher(),{cardHeight:u,cardVisibleViewportHeight:p}=n.useContext(i.Context),m=n.useContext(l.u.Context);return{onMount:r,maxHeight:n.useRef(t.pipe(c.switchMap(o.fold((0,a.a9)(c.of(o.none)),(e=>u.pipe(c.take(1),c.withLatestFrom(p),c.map((([t,r])=>(0,a.zG)(r,o.map((r=>e.offsetHeight+Math.max(0,r-t)))))))))),c.startWith(o.none),c.withLatestFrom(m.pipe(c.startWith(void 0),c.map(o.fromNullable))),c.map((([t,r])=>(0,a.zG)(t,o.alt((()=>(0,a.zG)(r,o.map((t=>e*t)))))))),c.distinctUntilChanged(o.getEq(s.lr).equals))).current,ref:t}}!function(e){var t=e.Context=n.createContext({cardHeight:c.EMPTY,cardVisibleViewportHeight:c.of(o.none)});e.Provider=e=>{const{ref:r,onMount:i}=d.P.useElWatcher(),a=n.useRef({cardHeight:e.card.pipe(c.switchMapTo(r.pipe(u.oA,c.map((e=>e.offsetHeight)))),c.distinctUntilChanged(),c.shareReplay({bufferSize:1,refCount:!0})),cardVisibleViewportHeight:e.cardVisibleViewportHeight.pipe(c.distinctUntilChanged(o.getEq(s.lr).equals),c.shareReplay({bufferSize:1,refCount:!0}))});return n.createElement(t.Provider,{value:a.current},e.children(i))}}(i||(i={}))},54290:(e,t,r)=>{r.d(t,{b:()=>xe});var i=r(18775),n=r(27378),a=r(57050),o=r(40327),s=r(8543),l=r(23239),c=r(5114),d=r(99094),u=r(66268),p=r(85287),m=r(22800),h=r(35108);const g=({children:e,mount:t})=>n.createElement(s.F.div,{"data-role":"animation-wrapper",className:p.$4.animationWrapper,mount:t},e),f=e=>(0,o.pipe)(c.fromNullable(e.activeAlert),c.fold((()=>e.id),(e=>e.id)));class y extends n.Component{_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:u.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:r}=this.props;if(!t.visualState.incomplete)return n.createElement(g,{mount:this.props.mount},n.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const i=r||h.SA,{main:y,shade:v}=i(t.visualState),x=l.h.create(void 0===v?c.none:(0,o.pipe)(t.visualState.from,c.map((e=>({state:e,className:v})))));return!Boolean(y)&&c.isNone(x.get())&&requestAnimationFrame((()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),n.createElement(d.f.Context.Provider,{value:this._elementState},n.createElement(g,{mount:this.props.mount},x.view((0,a.ls)(c.map((({state:r,className:i})=>n.createElement(s.F.div,{className:i,key:"shade"+r+f(t),onAnimationEnd:r=>{m.c.get(r.animationName)!==i&&p.bb.get(r.animationName)!==i||(e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>x.set(c.none))))}},this._stateToElement(r)))),c.toUndefined)),n.createElement(s.F.div,{className:y,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:u.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}constructor(...e){super(...e),(0,i._)(this,"_elementState",d.f.emptyWithName("card"))}}var v=r(50858),x=r(54001),b=r(44060),C=r(4870),I=r(3656),S=r(89894),w=r(24588),A=r(40219);class E extends n.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:r,children:i,counter:a,className:o,hideActivateButton:l,hideDot:c}=this.props;return n.createElement(s.F.div,(0,v._)({"data-aid":t,mount:e=>this._ref.current=e,onClick:t=>{const i=e();r.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:i},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,x.Sh)(o,$.wrapper,null!=c&&c?null:$.miniCard)),n.createElement(I.XY,(0,x.Sh)($.contentWrapper,null!=c&&c?$.contentWrapperWithoutDot:$.contentWrapperWithDot),i),n.createElement("div",{className:$.iconContainer},a&&n.createElement("div",{className:k},a),null!=l&&l?null:n.createElement("div",{className:M},n.createElement(C.JO.Arrow,{className:$.activeTopIcon}),n.createElement(C.JO.Arrow,{className:$.activeBottomIcon}))))}constructor(...e){super(...e),(0,i._)(this,"_ref",n.createRef()),(0,i._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})))}}const _="baseMiniCounterContainer",k=S.ux.joinClasses([_,S.ux.style({position:"absolute",height:S.ux.percent(100),top:0,right:0,zIndex:A.VN,margin:"auto 0",background:b.Il.CoreNeutral0,opacity:1})]),T="baseMiniActivateBtnSelector",M=S.ux.joinClasses([T,S.ux.style({position:"absolute",top:0,right:0,height:S.ux.percent(100),zIndex:A.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:b.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),N={position:"relative",display:"flex",overflow:"hidden",borderRadius:S.ux.rem(A.fx),background:b.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:b.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:S.ux.seconds(.2)},[`&:hover .${T}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},L={overflow:"hidden",color:w.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:S.ux.rem(1.5)},D={margin:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`},F={paddingLeft:S.ux.rem(.5)},P={position:"absolute",top:0,right:S.ux.rem(.5),bottom:0,display:"flex"},R={display:"flex",margin:`${S.ux.rem(.1)} 0 ${S.ux.rem(-1.25)}`,transform:"rotate(180deg)"},O={$nest:{"&:before":{position:"absolute",width:S.ux.px(10),height:S.ux.px(10),borderRadius:S.ux.percent(50),content:"''",transform:"scale(.5)"}}},B={$nest:{"&:before":{margin:`auto 0 auto ${S.ux.rem(.75)}`}}},$=S.ux.stylesheet({wrapper:[N],contentWrapper:[L],contentWrapperWithDot:[D],contentWrapperWithoutDot:[F],iconContainer:[P],activeTopIcon:[R],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[O],miniCard:[O,B]});var U=r(32096),W=r(52187);class z extends n.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:r,children:i,counter:a,className:o,hideActivateButton:l,hideDot:c,sduiStyle:d}=this.props;return n.createElement(s.F.div,(0,v._)({"data-aid":t,tabIndex:0,role:"button","aria-disabled":!1,mount:e=>this._ref.current=e,onClick:t=>{const i=e();r.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:i},clickPoint:{x:t.clientX,y:t.clientY}})},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.target.click(),e.preventDefault())},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,x.Sh)(o,null!=d&&d?re.sduiWrapper:re.wrapper,null!=c&&c?null:re.miniCard)),n.createElement(I.XY,(0,x.Sh)(re.contentWrapper,null!=c&&c?re.contentWrapperWithoutDot:re.contentWrapperWithDot),i),n.createElement("div",{className:re.iconContainer},a&&n.createElement("div",{className:j},a),null!=l&&l?null:n.createElement("div",{className:Y},n.createElement(C.JO.Arrow,{className:re.activeTopIcon}),n.createElement(C.JO.Arrow,{className:re.activeBottomIcon}))))}constructor(...e){super(...e),(0,i._)(this,"_ref",n.createRef()),(0,i._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})))}}const G="baseMiniCounterContainer",j=S.ux.joinClasses([G,S.ux.style({position:"absolute",height:S.ux.percent(100),top:0,right:0,zIndex:A.VN,margin:"auto 0",background:b.Il.CoreNeutral0,opacity:1})]),H="baseMiniActivateBtnSelector",Y=S.ux.joinClasses([H,S.ux.style({position:"absolute",top:0,right:0,height:S.ux.percent(100),zIndex:A.VN,display:"flex",flexDirection:"column",margin:"auto 0",opacity:0,justifyContent:"center"})]),V={position:"relative",display:"flex",overflow:"hidden",borderRadius:S.ux.rem(U.fx),background:b.Il.CoreNeutral0,boxShadow:W.S.z100,cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:b.Il.CoreNeutral10,transitionDuration:S.ux.seconds(.2)},"&:focus":{background:b.Il.CoreNeutral10,boxShadow:`${W.S.z100}, 0 0 0 2px rgb(99 142 235)`,outline:"none"},"&:hover .baseMiniActivateBtnSelector":{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},Z={boxShadow:W.s.llamaShadowToken},J={overflow:"hidden",color:w.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:S.ux.rem(1.5)},Q={margin:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`},q={paddingLeft:S.ux.rem(.5)},X={position:"absolute",top:0,right:S.ux.rem(.5),bottom:0,display:"flex"},K={display:"flex",margin:`${S.ux.rem(.1)} 0 ${S.ux.rem(-1.25)}`,transform:"rotate(180deg)"},ee={$nest:{"&:before":{position:"absolute",width:S.ux.px(10),height:S.ux.px(10),borderRadius:S.ux.percent(50),content:"''",transform:"scale(.5)"}}},te={$nest:{"&:before":{margin:`auto 0 auto ${S.ux.rem(.75)}`}}},re=S.ux.stylesheet({wrapper:[V],sduiWrapper:[V,Z],contentWrapper:[J],contentWrapperWithDot:[Q],contentWrapperWithoutDot:[q],iconContainer:[X],activeTopIcon:[K],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[ee],miniCard:[ee,te]});var ie,ne=r(55818),ae=r(8125),oe=r(50474),se=r(64757),le=r(19751),ce=r(50224);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(ie||(ie={}));const de=({actions:e,isLastCard:t})=>{const r=n.useContext(oe.m.Context).successLens.fixedText.titles,i=l.h.create(ie.stage0),a=()=>e.next({type:u.lY.Type.switchToNext});return n.createElement(s.F.div,{className:ve.successWrapper},n.createElement(I.P1,{className:ve.successText,onAnimationEnd:()=>{i.set(ie.stage1)}},r[(0,ae.TN)(r.length)]),n.createElement(s.F.span,null,i.view((e=>e>=ie.stage1&&n.createElement("span",{onAnimationEnd:()=>i.set(ie.stage2)},n.createElement(C.JO.CheckmarkAnimated,{className:ve.successCheckMark}))))),n.createElement(s.F.span,{className:ve.successBtnHolder},t.pipe(le.combineLatest(i,((e,t)=>t<ie.stage2?null:e?n.createElement(se.zx.Caps,{className:ve.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):n.createElement(se.zx.Caps,{className:ve.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},ue=S.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),pe={fontWeight:"bold",lineHeight:S.ux.rem(2),animation:`${ue} ${S.ux.seconds(.2)} linear forwards`},me={position:"relative",borderRadius:S.ux.rem(A.Jr),background:b.Il.CoreNeutral0,boxShadow:`0 ${S.ux.rem(.625)} ${S.ux.rem(A.mJ)} 0 rgba(198, 203, 222, .45)`},he={display:"flex",padding:`${S.ux.rem(1.5)} ${S.ux.rem(2)}`,alignItems:"center"},ge={marginLeft:S.ux.rem(1),minWidth:0,minHeight:0,width:S.ux.rem(1.325),height:S.ux.rem(1.325),animation:`${ue} ${S.ux.seconds(.2)} linear forwards`},fe={float:"right",width:S.ux.rem(4),textAlign:"center",animation:`${ue} ${S.ux.seconds(.2)} linear forwards`},ye={backgroundColor:b.Il.CoreGreen50,color:b.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:w.mb}}},ve=(0,ne._)((0,v._)({},S.ux.stylesheet({successText:[pe],successCheckMark:[ge],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[fe],doneBtn:[fe,ye]})),{fullCard:S.ux.joinClasses([ce.g.fullCardSelector,S.ux.style(me)]),successWrapper:S.ux.joinClasses([ce.g.successWrapperSelector,S.ux.style(me,he)])});var xe;!function(e){e.Mini=E,e.MiniContrast=z,e.Card=y,e.Success=de}(xe||(xe={}))},50224:(e,t,r)=>{r.d(t,{g:()=>b,m:()=>C});var i=r(50858),n=r(55818),a=r(44060),o=r(89894),s=r(24588),l=r(40219);const c={position:"relative",borderRadius:o.ux.rem(l.Jr),background:a.Il.CoreNeutral0,boxShadow:`0 ${o.ux.rem(.625)} ${o.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},d={$nest:{"&:before":{position:"absolute",width:o.ux.px(10),height:o.ux.px(10),borderRadius:o.ux.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:s.kl}}},p={$nest:{"&:before":{backgroundColor:s.AX}}},m={$nest:{"&:before":{backgroundColor:a.Il.CoreRed50}}},h={$nest:{"&:before":{backgroundColor:a.Il.CoreBlue50}}},g={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen50}}},f={$nest:{"&:before":{backgroundColor:a.Il.CorePurple50}}},y={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},v={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},x={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen60}}},b={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},C=(0,n._)((0,i._)({},o.ux.stylesheet({dot:[d],dotAdvanced:[p],dotCritical:[u],dotCorrectness:[m],dotClarity:[h],dotEngagement:[g],dotDelivery:[f],dotVox:[y],knowledgeHub:[v],dotWritingExpert:[x]})),{fullCard:o.ux.joinClasses([b.fullCardSelector,o.ux.style(c)])})},35108:(e,t,r)=>{r.d(t,{CE:()=>i,SA:()=>d,a:()=>u});var i,n=r(40327),a=r(5114),o=r(8125),s=r(42040),l=r(85287),c=r(22800);function d({from:e,transition:t,incomplete:r}){if(!r)return{};const i=p("transitionClassMapper");return(0,n.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return i.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(i.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function u({from:e,transition:t,incomplete:r}){return r?(0,n.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:r,shade:i}=e(t);return{main:a.fromNullable(r),shade:a.fromNullable(i)}}}}(i||(i={}));const p=(0,o.HP)(s.C8.Logging.getLogger)},28584:(e,t,r)=>{r.d(t,{$x:()=>S,Im:()=>w,a0:()=>i,oL:()=>P});var i,n=r(50858),a=r(27378),o=r(40327),s=r(54001),l=r(5114),c=r(83078),d=r(50474),u=r(64757),p=r(48911),m=r(4870),h=r(65223),g=r(3656),f=r(66896),y=r(74660),v=r(17594),x=r(4890),b=r(50224),C=r(74754),I=r(36642);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(i||(i={}));const S=({className:e,vox:t,isMinimalCard:r})=>{const{vox:{styleGuide:i}}=a.useContext(d.m.Context);return a.createElement("div",(0,s.Sh)(e,I.h.voxTitle,r?I.h.minimalTitle:void 0),a.createElement("span",null,t.companyName," ",i))},w=({logoUrl:e,className:t})=>a.createElement("img",(0,n._)({alt:"company logo","aria-hidden":!0,src:e},(0,s.Sh)(t,I.h.voxLogo))),A=({title:e,layoutDensity:t})=>a.createElement(g.XY,{className:(0,o.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>I.h.minimalTitle),(()=>I.h.toneTitle)))},a.createElement(p.dy,{emojiClassName:I.h.toneLogo},e));function E(e){return C.y.getDotStyle(e)}function _(e){return f.R.outcomeTypeMatch({correctness:a.createElement(m.JO.Correctness,{className:I.h.cardLogo}),clarity:a.createElement(m.JO.ClarityOutcome,{className:I.h.cardLogo}),premium:a.createElement(m.JO.Star,{className:I.h.cardLogo}),engagement:a.createElement(m.JO.EngagementOutcome,{className:I.h.cardLogo}),delivery:a.createElement(m.JO.DeliveryOutcome,{className:I.h.cardLogo}),vox:null,knowledgeHub:null})(e.lensType)}function k({activeAlert:e}){const t=a.useContext(d.m.Context);return a.createElement(g.XY,{className:I.h.minimalTitle},(0,o.pipe)(e.result,l.filter((e=>e.length>0)),l.getOrElse((()=>t.card.writingExpert.title))))}function T(e,t,r,i,d,u){const{extraProperties:h}=e;return v.$.isTakeaway(e)?function(e,t,r){return{style:"",description:a.createElement("div",{className:(0,o.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>I.h.minimalTitle),(()=>{})))},c.FX(y.TO.correctlyDetected)(e.takeawayFeedback)&&e.takeawayIsLikelyToBeRead?a.createElement(m.JO.ValidationOk,(0,n._)({width:16},(0,s.Sh)(I.h.cardLogo,I.h.takeawayIcon))):a.createElement(m.JO.Megaphone,(0,n._)({width:16},(0,s.Sh)(I.h.cardLogo,I.h.takeawayIcon))),t===x.j.Density.minimal?r:e.lensName)}}(e,r,u):v.$.isShortenIt(e)?M(e,r,d,u):v.$.isToneAI(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:I.h.minimalTitle},e.title)}}(e):v.$.isEthicalAI(e)?function(e){return{style:"",description:a.createElement("div",null,void 0!==e.emojiID?a.createElement(p.In,{id:e.emojiID,className:I.h.toneLogo}):a.createElement(m.JO.EthicalAI.Heart,(0,s.Sh)(I.h.cardLogo)),a.createElement(g.x4,{className:I.h.ethicalAILabel},e.miniCardTitle))}}(e):v.$.isSuggestedSnippet(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:I.h.minimalTitle},e.title)}}(e):v.$.isKnowledgeHubSuggestedTerm(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:I.h.minimalTitle},e.miniCardTitle)}}(e):v.$.isWritingExpert(e)?function(e){return{style:E(e),description:a.createElement(k,{activeAlert:e})}}(e):l.isSome(h.tone)?function(e,t){return{style:E(e),description:a.createElement(A,{title:e.title,layoutDensity:t})}}(e,r):t?l.isSome(h.vox)?function(e,t){return{style:b.m.dotVox,description:a.createElement(a.Fragment,null,(0,o.pipe)(e.logoUrl,l.fold((()=>null),(e=>a.createElement(w,{logoUrl:e,className:I.h.cardLogo})))),a.createElement(S,{vox:e,isMinimalCard:t===x.j.Density.minimal}))}}(h.vox.value,r):v.$.isFree(e)?M(e,r,d,u):function(e,t,r,i){return{style:(0,o.pipe)(i,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.pipe)(i,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),a.createElement("div",(0,s.Sh)(I.h.dualItemLabel,(0,o.pipe)(r,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>I.h.minimalTitle),(()=>{})))),a.createElement("span",{className:I.h.dualItemLabel},e.lensName,a.createElement(D,{highlightStyle:t}))))}}(e,i,r,d):null}function M(e,t,r,i){return(0,o.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>function(e,t,r){return{style:(0,o.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:Boolean(r)?r:a.createElement(a.Fragment,null,(0,o.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),a.createElement(g.XY,{className:I.h.minimalTitle},e.miniCardTitle))}}(e,r,i)),(()=>function(e,t){return{style:(0,o.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),e.lensName)}}(e,r))))}const N=({label:e})=>a.createElement("span",{className:I.h.fluencyLabel},e,a.createElement(u.RZ,{iconWidth:10,buttonClass:I.h.fluencyInfo,iconClass:I.h.fluencyInfo,title:a.useContext(d.m.Context).card.fluency.tooltip})),L=({style:e,description:t})=>a.createElement("span",(0,s.Sh)(I.h.lens,I.h.dot,e),t),D=({highlightStyle:e})=>{const t=a.useContext(d.m.Context);if(e===i.none)return null;const r=e===i.new?a.createElement("div",{className:I.h.newPremiumLabel},t.premiumAlertLabel.new,a.createElement(m.JO.Paid,{className:I.h.newPremiumLabelIcon,width:12})):a.createElement(m.JO.Paid,{className:I.h.premiumPersistentTooltipIcon,width:10});return a.createElement(h.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},r)},F=({style:e,description:t,extraStyle:r})=>a.createElement("span",(0,s.Sh)(r,I.h.lensMinimal,I.h.lens,I.h.dot,e),t),P=e=>(0,o.pipe)(T(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.cardVisualMode,e.children),l.fromNullable,l.map((t=>a.createElement("div",{className:e.className},(0,o.pipe)(e.activeAlert.extraProperties.fluencyMessage,l.fold((()=>(0,o.pipe)(e.layoutDensity,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>a.createElement(F,t)),(()=>a.createElement(L,t))))),(r=>(0,o.pipe)(e.layoutDensity,x.j.Density.match(a.createElement(a.Fragment,null,a.createElement(L,t),a.createElement(N,{label:r})),a.createElement(L,t),a.createElement(F,{style:t.style,extraStyle:I.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),l.fold((()=>a.createElement("div",{"data-purpose":"label-placeholder"})),(t=>a.createElement(R,null,t,e.badge)))),R=({children:e})=>a.createElement("div",{role:"definition",className:I.h.labelContainer},e)},74754:(e,t,r)=>{r.d(t,{y:()=>l});var i=r(66896),n=r(28706),a=r(17594),o=r(50224);const s=["b","i","br","ul","li"];var l;!function(e){e.renderToHtml=function(e,t){const r=t?{allowedTags:s.concat(["a"]),linkRegExp:t}:{allowedTags:s};return n.yG(e,r)};e.getDotStyle=e=>a.$.isWritingExpert(e)?o.m.dotWritingExpert:i.R.outcomeTypeMatch({correctness:o.m.dotCorrectness,clarity:o.m.dotClarity,premium:o.m.dotAdvanced,engagement:o.m.dotEngagement,delivery:o.m.dotDelivery,vox:o.m.dotVox,knowledgeHub:o.m.knowledgeHub})(e.lensType)}(l||(l={}))},52187:(e,t,r)=>{r.d(t,{S:()=>i,s:()=>n});const i={z100:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 1px 8px rgba(0, 0, 0, .15)",z300:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 4px 20px rgba(0, 0, 0, .15)"},n={llamaShadowToken:"0px 2px 8px 0px #1A213433, 0px 0px 0.5px 0px #000000B2"}},66346:(e,t,r)=>{r.d(t,{G3:()=>m,Vh:()=>p});var i=r(27378),n=r(84966),a=r(50474),o=r(64757),s=r(4870),l=r(28706),c=r(26027),d=r(66268),u=r(36642);const p=({card:{activeAlert:e,id:t,visualState:r},actions:p,mode:m,className:g,disabled:f})=>{const y=i.useContext(a.m.Context),v="mini"===m?h(r,y):"";return i.createElement(o.zx.Tertiary,{key:"toggle-more",name:h(r,y),title:v,"aria-label":v,className:g,disabled:f,onClick:l.hz((()=>{const i=c.X.isCardOpen(r);p.next({type:d.eI.Kind.startTransitionTo,id:t,transition:{type:i?"focused":"expanded",clockwise:!0}}),i||p.next({type:d.lY.Type.alertFeedback,alertId:e.id,feedbackType:n.PZ.EXPANDED})}))},c.X.isCardOpen(r)?i.createElement(s.JO.Arrow,{key:"more",className:u.h.lessIcon}):i.createElement(s.JO.QuestionMark,{key:"expand"}),"default"===m&&h(r,y))},m=({visualState:e,children:t,className:r})=>i.createElement("div",{className:(c.X.isCardOpen(e)?u.h.more:u.h.moreHidden)+" "+r},t);function h(e,t){const r=t.card;return c.X.isCardOpen(e)?r.less:r.more}},36642:(e,t,r)=>{r.d(t,{h:()=>I});var i=r(44060),n=r(89894),a=r(40219);const o={$nest:{"&:before":{position:"absolute",width:n.ux.px(10),height:n.ux.px(10),borderRadius:n.ux.percent(50),content:"''",transform:"scale(.5)"}}},s={opacity:1,transition:"opacity .3s"},l={color:i.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:i.xv.SubheadingLetterSpacing,fontSize:n.ux.rem(i.xv.SubheadingSize),lineHeight:n.ux.rem(i.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:n.ux.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:n.ux.px(2),left:n.ux.rem(-1.1),margin:"auto 0"}}},d={$nest:{"&:before":{top:0,bottom:0,left:n.ux.rem(-1.1),margin:`${n.ux.rem(.25)} 0 auto 0`}}},u={margin:`0 ${n.ux.rem(.4)} 0 ${n.ux.rem(.2)}`,width:n.ux.rem(.85),height:n.ux.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:n.ux.rem(-1),margin:"auto",transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${n.ux.rem(.3)} ${n.ux.rem(.25)}`,cursor:"pointer",borderRadius:n.ux.percent(100),marginLeft:n.ux.rem(.5),$nest:{"&:hover":{background:i.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${n.ux.rem(.25)}`,borderRadius:n.ux.rem(a.fx),cursor:"pointer",background:i.Il.CoreYellow20,color:i.Il.CoreYellow80,marginLeft:n.ux.rem(.5),$nest:{"&:hover":{background:i.Il.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:i.Il.CoreYellow80,marginLeft:n.ux.rem(.3)},f={display:"flex",alignItems:"flex-start",top:n.ux.rem(.125),minWidth:"initial",minHeight:"initial",background:i.Il.CoreNeutral0},y={color:i.Il.CoreNeutral90,textTransform:"none",letterSpacing:i.xv.SmallLetterSpacing,fontWeight:i.xv.SmallWeight,fontSize:n.ux.rem(i.xv.SmallSize),lineHeight:n.ux.rem(i.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:i.Il.CoreNeutral50,textTransform:"none"},x={width:n.ux.rem(1),height:n.ux.rem(1)},b={display:"inline-flex",padding:`0 ${n.ux.rem(.25)}`,borderRadius:n.ux.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},C={display:"inline-flex",marginLeft:n.ux.rem(.1),minWidth:0,minHeight:0},I=n.ux.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[s],moreHidden:[s,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[d],voxLogo:[u],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[p,x],fluencyLabel:[l,b],fluencyInfo:[C],dot:[o],ethicalAILabel:[{textTransform:"none"}]})},1883:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(50858),n=r(55818),a=r(27378),o=r(8543),s=r(54001),l=r(90845),c=r(77176),d=r(98403),u=r(5114),p=r(50474),m=r(89894),h=r(35108),g=r(50224);const f=e=>{const{shade:t}=(0,h.SA)(e.visualState),r=a.useContext(p.m.Context),{rect:m,onMount:g}=l.P.useRectWatcher(),f=m.pipe(c.U(u.exists((e=>e.height>0))));a.useEffect((()=>{Boolean(t)||e.onFocus()}),[]);const y=e.theme||{};return a.createElement(o.F.div,{className:y.container},e.header,a.createElement(o.F.div,{className:y.innerContainer},a.createElement(o.F.div,(0,n._)((0,i._)({},(0,s.Sh)(E.wrapper,y.wrapper)),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),a.createElement(o.F.div,(0,s.Sh)(E.grid,y.content),a.createElement(o.F.div,(0,i._)({role:"region","aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.description}: ${e}`)))},(0,s.Sh)(E.mainContent,y.contentBody)),e.body),Boolean(e.footer)?a.createElement(o.F.div,{role:"complementary",mount:g,"aria-hidden":d.U_(f),"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.more}: ${e}`))),className:E.footerContent},e.footer):null,Boolean(e.subActions)||Boolean(e.navigation)||Boolean(e.mainActions)?a.createElement(o.F.nav,{"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.cardActions}: ${e}`))),className:E.actions},e.subActions,a.createElement("div",{className:E.spacerOne}),e.navigation,a.createElement("div",{className:E.spacerFloat}),e.mainActions):null)),e.extra))},y="& > * + *",v=.75,x={position:"relative"},b={padding:`${m.ux.rem(1)} ${m.ux.rem(.5)} ${m.ux.rem(v)} ${m.ux.rem(1)}`},C={padding:`0 ${m.ux.rem(.5)} 0 ${m.ux.rem(1)}`,$nest:{[y]:{marginTop:m.ux.rem(v)}}},I={padding:`0 ${m.ux.rem(.5)} 0 ${m.ux.rem(1)}`,$nest:{[y]:{marginTop:m.ux.rem(v)}}},S={display:"flex",marginLeft:m.ux.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},w={width:m.ux.rem(1),flexShrink:1},A={$nest:{[y]:{marginTop:m.ux.rem(v)}}},E=(0,n._)((0,i._)({},m.ux.stylesheet({mainContent:[C],footerContent:[I],actions:[S],spacerOne:[w],spacerFloat:[{flex:1}],grid:[A]})),{fullCard:m.ux.joinClasses([g.g.fullCardSelector,m.ux.style(x)]),wrapper:m.ux.joinClasses([g.g.fullCardSelector,m.ux.style(x,b)])})},52575:(e,t,r)=>{r.d(t,{PS:()=>He,mQ:()=>Ge,o:()=>We,jt:()=>ze,Kg:()=>Ie,dk:()=>ve,lJ:()=>Me,hl:()=>Be,__:()=>Oe,M9:()=>Ye,ko:()=>xe,hT:()=>De,q4:()=>Ne,Dx:()=>Fe,jg:()=>Pe,Ot:()=>Re,Nm:()=>Te,VM:()=>nt,eb:()=>at,k_:()=>zt,m_:()=>$e,Bn:()=>Gt,IH:()=>lt,ce:()=>it});var i=r(50858),n=r(55818),a=r(27378),o=r(57050),s=r(40327),l=r(54001),c=r(8543),d=r(23239),u=r(84966),p=r(54678),m=r(8125),h=r(5114),g=r(83078),f=r(71249),y=r(18208),v=r(44060),x=r(42040),b=r(33678),C=r(50474),I=r(4021),S=r(64757),w=r(3929),A=r(4870),E=r(50790),_=r(76457),k=r(8965),T=r(42103),M=r(65223),N=r(3656),L=r(74660),D=r(89894),F=r(40219),P=r(90845),R=r(60797),O=r(19751),B=r(37539),$=r(28706),U=r(17594),W=r(26027),z=r(91549),G=r(66268),j=r(77610),H=r(4890),Y=r(51006),V=r(91463),Z=r(50224),J=r(28584),Q=r(74754),q=r(66346),X=r(1883),K=r(78416),ee=r(1509),te=r(14532);const re=({examples:e,layoutDensity:t})=>a.createElement(ee.Z,{nodeType:"table",styleType:ee.Z.Type.Base,className:me.wrapper},e.map(((e,r)=>a.createElement("tbody",{key:r,className:me.group},e.map((({text:e,title:r,color:n,hasItalic:o},l)=>a.createElement("tr",{key:l,className:(0,s.pipe)(t,H.j.Density.matchL((()=>me.item),(()=>me.itemCompact),(()=>me.itemMinimal)))},(0,s.pipe)(r,h.map((e=>a.createElement("td",{className:te.J.colorMatch(n)(me)},(e=>e.split("/").reduce(((e,t,r)=>(0!==r&&e.push(a.createElement("br",{key:r})),e.push(t),e)),[]))(e)))),h.toNullable),a.createElement("td",(0,i._)({colSpan:h.isNone(r)?2:void 0,className:o?me.content:me.contentItalic},$.yG(e)))))))))),ie={$nest:{"&:not(:last-child):after":{display:"block",height:D.ux.rem(1.75),content:"''"}}},ne={$nest:{"&:not(:last-child)":{borderBottom:`${D.ux.rem(.5)} solid transparent`}}},ae={display:"flex",flexDirection:"column",lineHeight:D.ux.rem(1.3125)},oe={padding:0,verticalAlign:"top",lineHeight:D.ux.rem(1.25)},se={paddingRight:D.ux.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},le={color:v.Il.CoreNeutral50,fontFeatureSettings:`${F.g_}, ${F.xL}`},ce={color:v.Il.CoreRed50},de={color:v.Il.CoreGreen70},ue={color:v.Il.CoreNeutral90},pe={color:v.Il.CoreNeutral90},me=D.ux.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[ie],item:[ne],itemCompact:[ne,{display:"flex",flexDirection:"column"}],itemMinimal:[ne,ae],baseBlock:[oe],title:[oe,se],content:[oe,le],contentItalic:[oe,le,{fontStyle:"italic"}],red:[oe,se,ce],green:[oe,se,de],yellow:[oe,se,ue],fallback:[oe,se,pe]});var he=r(11662),ge=r(19025);const fe=(0,m.HP)(x.C8.Logging.getLogger);var ye;!function(e){var t=e.actionRegex=/^#([\w\d_-]+)$/;e.parse=e=>(0,s.pipe)(h.fromNullable(e.match(t)),h.chain((e=>{switch(e[1]){case"set-goals":return h.some(G.lY.Type.openSetGoals);case"ideas-gallery":return h.some(G.lY.Type.openIdeasGallery);default:return h.none}})))}(ye||(ye={}));const ve=({description:e,actions:t,layoutDensity:r,className:n})=>{const o=a.useContext(C.m.Context),c=a.useContext(T.G.Context),{ref:d,onMount:u}=P.P.useElWatcher();P.P.useSubscriptionTo(d.pipe(R.oA,O.switchMap((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,r)=>{const i=O.fromEvent(r,"click").pipe(O.tap((e=>e.preventDefault())));return(0,s.pipe)(h.fromNullable(r.getAttribute("href")),h.chain(ye.parse),h.fold((()=>(fe("Description").error("Invalid action",r),e.pipe(O.merge(i)))),(n=>O.mergeStatic(e,n in o.card.actionDescription&&n!==G.lY.Type.openIdeasGallery?c.getTooltipObservable(r,o.card.actionDescription[n],"auto",h.none):O.EMPTY,i.pipe(O.mapTo({type:n}),O.tap(t))))))}),O.EMPTY)))));const p=(0,s.pipe)(r,H.j.Density.matchOrDefault(H.j.Density.minimal)((()=>Ht.minimalDescription),(()=>Ht.description)));return a.createElement(N.XY,(0,i._)({mount:u},(0,l.Sh)(p,n),Q.y.renderToHtml(e,ye.actionRegex)))},xe=({card:e,isChecking:t})=>L.bZ.isRated(e.activeAlert)?a.createElement(w.B,{value:W.X.isCardPresuccess(e.visualState)?B.g.MAX:e.meta.percentile,initValue:W.X.isCardPresuccess(e.visualState)?e.meta.percentile:B.g.MIN,isLoading:t}):null,be=({card:e})=>{const t=(0,w.N)(W.X.isCardPresuccess(e.visualState)?B.g.MAX:e.meta.percentile,W.X.isCardPresuccess(e.visualState)?e.meta.percentile:B.g.MIN);return a.createElement(c.F.Fragment,null,t.pipe(O.map(B.g.prism.reverseGet),O.map((e=>a.createElement(_.P,{percentage:e,colorType:_.P.ColorType.neoBlue,iconSize:_.P.IconSize.extraSmall,theme:{radialProgressBar:Ht.circleProgress,radialProgressText:Ht.circleText}})))))},Ce=({card:e,feedbackActions:t,onClick:r,disabled:i})=>{const n=a.useContext(C.m.Context);return a.createElement(S.zx.Ghost,{name:"ignore",title:n.dismiss,"aria-label":n.dismiss,onClick:$.hz((()=>{t.next({type:G.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:W.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:j.i.isSynfonyItem(e)?(0,s.pipe)(e.synfonySelection,h.getOrElse((()=>[]))):void 0}),r&&r()})),disabled:i},a.createElement(A.JO.Ignore,null))},Ie=({card:e,feedbackActions:t,disabled:r,onClickDismissButton:i,alwaysShowWrongAndOffensiveButtons:n})=>a.createElement(a.Fragment,null,a.createElement(Ce,{card:e,feedbackActions:t,onClick:i,disabled:r}),a.createElement(_e,{id:e.id,activeAlert:e.activeAlert,onMute:(0,s.pipe)(e.muteCategory,h.map((r=>$.hz((()=>t.next({type:G.lY.Type.muteAlertCategory,categoryId:r.id,id:e.id,viewType:e.activeAlert.type})))))),onWrong:$.hz($.hz((()=>t.next({type:G.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.WRONG_SUGGESTION})))),onOffensive:$.hz($.hz((()=>t.next({type:G.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:G.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"}),alwaysShowWrongAndOffensiveButtons:n})),Se=()=>{const e=a.useContext(C.m.Context);return a.createElement(a.Fragment,null,a.createElement(A.JO.Mute,null),e.card.mute)},we=()=>{const e=a.useContext(C.m.Context);return a.createElement(a.Fragment,null,a.createElement(A.JO.Report,null),e.card.wrong)},Ae=()=>{const e=a.useContext(C.m.Context);return a.createElement(a.Fragment,null,a.createElement(A.JO.Report,null),e.card.offensive)},Ee=e=>(0,s.pipe)(e.extraProperties.vox,g.dH((()=>null),a.createElement(Ae,null))),_e=({id:e,activeAlert:t,onMute:r,onWrong:i,onOffensive:n,alwaysShowWrongAndOffensiveButtons:l=!1})=>{const c=a.useContext(C.m.Context),d=h.isSome(t.getTransform()),u=h.isSome(r),y=d||l,v={turnoff:(0,s.pipe)(r,h.getOrElse((()=>m.Q1))),incorrect:i,offensive:n};return(0,s.pipe)(u||y,h.fromPredicate(o.yR),h.map((()=>a.createElement(p.v.Dropdown,{id:e,placement:"bottom end",label:a.createElement(A.T1.MoreVertical,null),"aria-label":c.card.moreActions,onAction:e=>v[e](),items:(0,s.pipe)([(0,s.pipe)(r,h.map((()=>[a.createElement(p.v.Item,{key:"turnoff",textValue:"turnoff"},a.createElement(Se,null))])),h.map((e=>({key:"turnoff",children:e})))),(0,s.pipe)(d||l,h.fromPredicate(o.yR),h.map((()=>{const e=[a.createElement(p.v.Item,{key:"incorrect",textValue:"incorrect"},a.createElement(we,null))],r=Ee(t);return r&&e.push(a.createElement(p.v.Item,{key:"offensive",textValue:"offensive"},r)),e})),h.map((e=>({key:"wrongAndOffensive",children:e}))))],f.DZ(o.yR))},(e=>a.createElement(p.v.Section,{key:e.key},e.children))))),g.QP)},ke=({card:e,onClick:t,mode:r="default"})=>{const o=a.useContext(C.m.Context),s=a.useContext(b.a.Context),l=a.useCallback((e=>{s.has(b.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),c=e.renderOptions.features.has(H.j.Features.showAnonymousUserFooters)?{disabled:!0,title:o.card.disabledForAnonymous}:{title:"mini"===r?o.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?a.createElement(S.zx.Tertiary,(0,n._)((0,i._)({},c),{name:"add-to-dict",onClick:l}),a.createElement(A.JO.Dict,null),o.card.addToDict):null},Te=({title:e,checkingInProgress:t,checkingMessage:r,applyMessage:o,onClick:s,disabled:c,className:d,spinnerClassName:u,messageClassName:p})=>a.createElement(S.zx.Primary,(0,n._)((0,i._)({key:"update-all",name:"update-all",title:e},(0,l.Sh)(t.pipe(O.map((0,m.RN)(K.V.updateAllBtnLoading,K.V.updateAllBtn))),d)),{disabled:t.view((e=>e||!0===c)),children:t.pipe(O.map((0,m.RN)(a.createElement(a.Fragment,{key:"update-all-checking"},a.createElement("span",{className:p},y.kC(r)),a.createElement(k.$,{size:18,strokeWidth:2,wrapperClassName:(0,l.Sh)(K.V.updateBtnSpinner,u).className,variation:"white"})),a.createElement(a.Fragment,{key:"update-all-checked"},y.kC(o))))),onClick:$.hz(s)})),Me=({card:e})=>(0,s.pipe)(Ue(e.activeAlert,e.renderOptions.layoutDensity),h.map((t=>a.createElement(q.G3,{key:"card-actions-details",visualState:e.visualState,className:Ht.more},t))),h.toNullable),Ne=({card:e,actions:t})=>$e(e.activeAlert,e.renderOptions.layoutDensity)?a.createElement(q.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):j.i.isDefaultItem(e)?a.createElement(ke,{key:"card-actions-button",card:e,mode:"default",onClick:$.hz((()=>t.next({type:G.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.ADD_TO_DICTIONARY})))}):null,Le=e=>{const t=e.showDemoDocOnboardingA11yUpdates?{title:"Review suggestions",message:"Grammarly checks for mistakes and suggests ways to improve your text."}:{message:"Click a suggestion to accept it."};return a.createElement(V.TG,{alignment:"bottom",eventType:"onclick",stepId:Y.X.StepId.Step4,title:t.title,message:t.message,dotPosition:{kind:"findFirstButton",position:V.E2.rightTop},themes:{containerWrapperClassName:Ht.onboardingNotification}},e.children)},De=({onClick:e,rl:t,layoutDensity:r,a11yContrast:i,showDemoDocOnboardingA11yUpdates:n})=>a.createElement(Le,{showDemoDocOnboardingA11yUpdates:n},a.createElement(he.zO,{replacementsLabels:t,onClick:e,layoutDensity:r,a11yContrast:i})),Fe=({text:e})=>a.createElement(N.P1,(0,i._)({className:Ht.title},Q.y.renderToHtml(e))),Pe=({text:e})=>a.createElement(N.P1,(0,i._)({className:Ht.titleMinimal},Q.y.renderToHtml(e))),Re=({alert:e})=>a.createElement(N.H4,(0,i._)({className:Ht.title},Q.y.renderToHtml(e.title))),Oe=({alert:e,options:t,children:r,className:o,badge:s})=>{const d=a.useContext(C.m.Context);return a.createElement(c.F.Fragment,null,t.cardVisualMode.pipe(O.map((c=>a.createElement(J.oL,(0,n._)((0,i._)({activeAlert:e,cardVisualMode:c,showCardLabel:t.features.has(H.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(H.j.Features.showNewPremiumCardLabels)?J.a0.new:t.features.has(H.j.Features.showPersistentPremiumCardLabels)?J.a0.persistent:J.a0.none,layoutDensity:t.layoutDensity},(0,l.Sh)(Ht.label,o)),{badge:e.extraProperties.isBeta?a.createElement(I.C.Regular,{a11yContrast:t.features.has(H.j.Features.a11yContrast)},d.beta):s}),r)))))},Be=({text:e,layoutDensity:t})=>a.createElement("div",{className:Ht.highlightedTextBox},a.createElement(N.XY,{className:(0,s.pipe)(t,H.j.Density.matchOrDefault(H.j.Density.minimal)((()=>Ht.minimalHighlightedTextInnerBox),(()=>Ht.highlightedTextInnerBox)))},e));function $e(e,t){return!e.extraProperties.hasAddToDictionary&&(!(!h.isSome(e.examples)&&!h.isSome(e.details))||!(t!==H.j.Density.minimal||!h.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation))}const Ue=(e,t)=>{if(!$e(e,t))return g.cS();const r=(0,s.pipe)(t,H.j.Density.matchOrDefault(H.j.Density.minimal)((()=>Ht.minimalDescription),(()=>Ht.description)));return h.some(a.createElement(a.Fragment,null,(0,s.pipe)(t,H.j.Density.matchOrDefault(H.j.Density.minimal)((()=>h.isNone(e.details)?a.createElement(N.XY,(0,i._)({className:r},Q.y.renderToHtml(e.explanation,ye.actionRegex))):null),(()=>null))),(0,s.pipe)(e.details,h.map((e=>a.createElement(N.XY,(0,i._)({className:r},Q.y.renderToHtml(e))))),h.toNullable),(0,s.pipe)(e.examples,h.map((e=>a.createElement(re,{layoutDensity:t,examples:e}))),h.toNullable)))},We=({isChecking:e})=>a.createElement(c.F.Fragment,null,e.pipe(O.map((e=>a.createElement(k.$,{className:e?Ht.spinner:Ht.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),ze=e=>{const[t,r]=a.useState(!0);return t?a.createElement(Ve,{type:e.type,actions:e.actions,onClose:()=>r(!1)}):null},Ge=({card:e,actions:t})=>{if(j.i.isEthicalAIItem(e)||j.i.isSuggestedSnippetItem(e)||j.i.isKnowledgeHubSuggestedTermItem(e))return null;if(!(0,s.pipe)(e.activeAlert.isFree)&&e.renderOptions.features.has(H.j.Features.showYellowFooterForTrialUsers))return a.createElement(Ke,null);if((0,s.pipe)(e.activeAlert.extraProperties.freePremium,g.FX("unlocked")))return a.createElement(qe,null);if((0,s.pipe)(e.activeAlert.extraProperties.premiumYellowFooterVariant,h.isSome))return(0,s.pipe)(e.activeAlert.extraProperties.premiumYellowFooterVariant,h.fold((()=>null),(e=>a.createElement(Xe,{variant:e}))));if(!U.$.isFree(e.activeAlert)&&e.renderOptions.features.has(H.j.Features.showPremiumOnboarding))return a.createElement(et,null);if(!U.$.isFree(e.activeAlert)&&e.renderOptions.features.has(H.j.Features.showPremiumTrialFooters))return a.createElement(Qe,{actions:t});if(e.renderOptions.features.has(H.j.Features.showAnonymousUserFooters))return a.createElement(Je,{actions:t,card:e});const r=e.renderOptions.isPremiumOnboarding||d.h.create(!1);return a.createElement(c.F.Fragment,null,r.view((r=>!U.$.isFree(e.activeAlert)&&Boolean(r)?a.createElement(et,null):(0,s.pipe)(e.renderOptions.layoutDensity,H.j.Density.matchOrDefault(H.j.Density.cozy)((()=>a.createElement(Ze,{card:e,actions:t})),(()=>(0,s.pipe)(e.activeAlert.extraProperties.fluencyMessage,h.fold((()=>a.createElement(Ze,{card:e,actions:t})),(e=>a.createElement(tt,{fluencyLabel:e}))))))))))};function je(e,t,r){r.next({type:G.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const He=({card:e,actions:t})=>{const r=a.useContext(C.m.Context).card.matchesNavigation;return a.createElement(c.F.Fragment,null,(0,s.pipe)(e,O.map((e=>a.createElement("div",{key:e.activeAlert.id,className:Ht.bundleNavWrapper},a.createElement(N.XY,{className:Ht.bundleTitle},z.R.bundleTitle(e)),a.createElement("div",{className:Ht.bundleNavMatchesRow},a.createElement(S.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:Ht.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>je("left",e,t)},a.createElement(A.JO.Arrow,{className:Ht.bundleNavLeftButtonIcon})),a.createElement(N.ck,{className:Ht.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),a.createElement(S.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:Ht.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>je("right",e,t)},a.createElement(A.JO.Arrow,{className:Ht.bundleNavRightButtonIcon}))))))))},Ye=({card:e,actions:t,isChecking:r})=>a.createElement(a.Fragment,null,(0,s.pipe)(e.renderOptions.layoutDensity,H.j.Density.matchOrDefault(H.j.Density.minimal)((()=>L.bZ.isRated(e.activeAlert)?a.createElement(a.Fragment,null,a.createElement(be,{card:e}),a.createElement(Pe,{text:e.activeAlert.miniCardTitle})):a.createElement(Oe,{alert:e.activeAlert,options:e.renderOptions},a.createElement(Pe,{text:e.activeAlert.miniCardTitle}))),(()=>a.createElement(a.Fragment,null,a.createElement(Oe,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(Fe,{text:e.activeAlert.title}),a.createElement(xe,{card:e,isChecking:r}))))),a.createElement(ve,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),Ve=e=>{const t=a.useContext(C.m.Context),{title:r,content:i}=t.card.onboarding[e.type];return a.useLayoutEffect((()=>()=>e.actions.next({type:G.lY.Type.onboardingClose,value:e.type}))),a.createElement(E.DI.AdHoc,{key:"new-notification",title:a.createElement(a.Fragment,null,r,a.createElement(I.C.Regular,{className:Ht.newLabel},t.new)),className:Ht.newCheckNotification,onClose:e.onClose},i)},Ze=({actions:e,card:t})=>{const r=a.useContext(C.m.Context);return P.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:G.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?a.createElement(rt.Base,{className:It},a.createElement("span",null,r.card.muteCitedText(a.createElement("button",{"data-name":"open-preferences-link",onClick:()=>e.next({type:G.lY.Type.openPreferences})},r.documentSettings.editorSettings))),a.createElement(S.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:G.lY.Type.dismissMuteQuotedAdvice})},a.createElement(A.JO.Close,null))):null},Je=({actions:e,card:t})=>{const r=a.useContext(C.m.Context),i=t.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return a.createElement(rt.Base,{className:Ht.anonymousUserNotice},i((()=>{e.next({type:G.lY.Type.toSignIn})})))},Qe=({actions:e})=>a.createElement(rt.Small,{className:wt},a.createElement(A.JO.PaidLink,{className:Ht.iconWrapper,width:12}),a.useContext(C.m.Context).premiumFreeTrial((()=>{e.next({type:G.lY.Type.premiumTrialFooterCtaClick})}))),qe=()=>{const{beforeIcon:e,afterIcon:t}=a.useContext(C.m.Context).freePremiumAlertFooter;return a.createElement(rt.Small,{className:_t},e,a.createElement(A.JO.PaidLink,{width:12}),t)},Xe=({variant:e})=>{const t=a.useContext(C.m.Context).premiumFooter;return a.createElement(rt.Small,{className:kt},a.createElement(A.JO.PaidLink,{width:12}),t[e])},Ke=()=>{const{freeTrialAlertFooter:e}=a.useContext(C.m.Context);return a.createElement(rt.Small,{className:_t},a.createElement(A.JO.PaidLink,{width:12}),e)},et=()=>{const{premiumOnboardingFooter:e}=a.useContext(C.m.Context);return a.createElement(rt.Small,{className:Et},a.createElement(A.JO.PaidLink,{width:12}),e)},tt=({fluencyLabel:e})=>{const t=a.useContext(C.m.Context).card.fluency;return a.createElement(N.x4,{className:Ht.fluencyNotice},e,a.createElement(M.u,{title:t.tooltip},a.createElement(A.JO.Info,{width:10,className:Ht.fluencyInfo})))};var rt;!function(e){function t(e){return({children:t,className:r})=>a.createElement(e,(0,l.Sh)(Ht.cardFooter,r),t)}e.Small=t(N.x4),e.Base=t(N.XY)}(rt||(rt={}));function it(e){const{transformHidden:t,isMouseInside:r,transformHiddenObservable:i}=P.P.useMemoOnDidMount((()=>{const t=d.h.create(!1),r=new O.Subject,i=O.mergeStatic(O.combineLatestStatic([r,e]).pipe(O.map((([e,t])=>e&&t)),O.filter((e=>!0===e)),O.tap((()=>t.set(!0)))),e.pipe(O.skip(1),O.filter((e=>!e)),O.tap((()=>t.set(!1)))));return{transformHidden:t,isMouseInside:r,transformHiddenObservable:i}}));return P.P.useSubscriptionTo(i),{transformHidden:t,isMouseInside:r}}const nt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardTheme:o,cardBody:s,cardFooter:l,mainActions:c,subActions:d,cardExtra:u})=>{var p,h,g,f;const{transformHidden:y,isMouseInside:v}=it(r);return a.createElement(X.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:G.lY.Type.alertCardShow,cardType:G.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOver:()=>{t.next({type:G.lY.Type.hover,kind:"hover",id:e.id}),v.next(!0)},onMouseOut:()=>{t.next({type:G.lY.Type.hover,kind:"unhover",id:e.id}),v.next(!1)},theme:(0,i._)({content:n.pipe(O.map((0,m.RN)(Ht.loadingWrapperInvisible,Ht.loadingWrapper)))},(0,ge.Gh)(e.renderOptions),o),extra:a.createElement(a.Fragment,null,a.createElement(We,{isChecking:n}),null===(p=u)||void 0===p?void 0:p()),body:s(y),mainActions:null===(h=c)||void 0===h?void 0:h(),footer:null===(g=l)||void 0===g?void 0:g(y),subActions:null===(f=d)||void 0===f?void 0:f()})},at=({card:e,actions:t,isChecking:r,body:i,footer:n,alwaysShowWrongAndOffensiveButtons:o})=>a.createElement(X.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:G.lY.Type.alertCardShow,cardType:G.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,ge.Gh)(e.renderOptions),body:null!=i?i:a.createElement(Ye,{card:e,actions:t,isChecking:r}),mainActions:a.createElement(Ie,{card:e,feedbackActions:t,alwaysShowWrongAndOffensiveButtons:o}),footer:null!=n?n:a.createElement(Me,{card:e}),subActions:a.createElement(Ne,{card:e,actions:t}),extra:a.createElement(Ge,{card:e,actions:t})}),ot={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",display:"inline",textDecoration:"none",$nest:{"&:link, &:visited":{color:v.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${F.g_}, ${F.xL}`},"& ul":{margin:`${D.ux.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:D.ux.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:D.ux.rem(.5)}}},st={lineHeight:D.ux.rem(1.3125),$nest:{"& a":{display:"initial"}}},lt={$nest:{"& i":{color:v.Il.CoreNeutral50},"& > * + *":{marginTop:D.ux.rem(.75)}}},ct={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:v.Il.CoreRed50}}},dt={marginTop:D.ux.important(0),lineHeight:D.ux.rem(1.125)},ut={fontSize:D.ux.rem(v.xv.SubheadingSize),lineHeight:D.ux.rem(v.xv.SubheadingLineHeight)},pt={width:D.ux.rem(2),height:D.ux.rem(2)},mt={position:"absolute",top:`calc(50% - ${D.ux.rem(1)})`,left:`calc(50% - ${D.ux.rem(1)})`,width:D.ux.rem(2),height:D.ux.rem(2),transition:"opacity .2s"},ht={marginLeft:D.ux.rem(.5),backgroundColor:v.Il.CoreGreen50,color:v.Il.CoreNeutral0,fontWeight:600},gt={position:"absolute",marginTop:D.ux.rem(-8.5),marginLeft:D.ux.rem(-2),$nest:{"&:after":{position:"absolute",bottom:D.ux.rem(-.525),left:D.ux.rem(.7),borderTop:`${D.ux.rem(.625)} solid ${v.Il.BackgroundNotification}`,borderRight:`${D.ux.rem(.5)} solid transparent`,borderLeft:`${D.ux.rem(.5)} solid transparent`,content:"' '"}}},ft={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},yt={position:"absolute",top:D.ux.rem(.75),left:D.ux.rem(.4)},vt={color:v.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:v.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:v.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${v.Il.CoreBlue40}`,color:v.Il.CoreBlue40}}}}},xt={display:"flex",borderRadius:`${F.LB} ${F.LB} ${D.ux.rem(F.Jr)} ${D.ux.rem(F.Jr)}`,color:v.Il.CoreNeutral50,padding:`${D.ux.rem(.5)} ${D.ux.rem(.75)} ${D.ux.rem(.5)} ${D.ux.rem(1)}`,fontSize:D.ux.rem(.6875),lineHeight:D.ux.rem(1.125)},bt={padding:`0 ${D.ux.rem(.6)}`,minWidth:D.ux.rem(.625),minHeight:D.ux.rem(.625)},Ct="muteQuotedAdvice",It=D.ux.joinClasses([Ct,D.ux.style({$nest:{"& button":{border:0,textDecoration:"underline",textUnderlineOffset:2,color:v.Il.CoreBlue50,background:"none",padding:0,$nest:{"&:link, &:visited":{color:v.Il.CoreBlue50},"&:hover":{color:v.Il.CoreBlue40}}},"& i:hover":{strokeWidth:D.ux.px(2)}}})]),St="premiumFreeTrial",wt=D.ux.joinClasses([St,D.ux.style({$nest:{"& svg":{fill:v.Il.CoreYellow80},"& a":{fontWeight:800,color:v.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:v.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${v.Il.CoreYellow60}`,color:v.Il.CoreYellow60}}}}})]),At="premiumAlertFooter",Et=D.ux.joinClasses([At,D.ux.style({justifyContent:"center"})]),_t=D.ux.joinClasses([At,D.ux.style({justifyContent:"start",padding:D.ux.important(`${D.ux.rem(.5)} ${D.ux.rem(1)}`)})]),kt=D.ux.joinClasses([At,D.ux.style({justifyContent:"start",padding:D.ux.important(`${D.ux.rem(.5)} ${D.ux.rem(1)} ${D.ux.rem(.5)} ${D.ux.rem(1.75)}`)})]),Tt={display:"block",boxSizing:"border-box",padding:`${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(1.5)}`,width:D.ux.percent(100),borderRadius:`${F.LB} ${F.LB} ${D.ux.rem(F.Jr)} ${D.ux.rem(F.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(2)}`,background:v.Il.CoreNeutral10,color:v.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(1)} ${D.ux.rem(2)}`,position:"relative",background:v.Il.CoreYellow20,color:v.Il.CoreNeutral90},"&.premiumAlertFooter":{display:"flex",alignItems:"center",padding:D.ux.rem(.5),background:v.Il.CoreYellow20,color:v.Il.CoreYellow80,$nest:{"& svg":{margin:`0 ${D.ux.rem(.25)}`,fill:v.Il.CoreYellow80}}}}},Mt={position:"absolute",top:D.ux.rem(.8),left:D.ux.rem(.5),minWidth:D.ux.rem(1),minHeight:D.ux.rem(1)},Nt={fontWeight:"bold",fontSize:D.ux.rem(.875),lineHeight:D.ux.rem(1.125),flex:2},Lt={padding:`${D.ux.rem(.625)} 0 ${D.ux.rem(.1875)} ${D.ux.rem(.5)}`,marginBottom:D.ux.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},Dt={fontSize:D.ux.rem(.75),lineHeight:D.ux.rem(1.125),color:v.Il.CoreNeutral90},Ft={display:"flex",justifyContent:"flex-end",alignItems:"center",height:D.ux.rem(1.5),$nest:{"& > * + *":{marginLeft:D.ux.rem(.25)},"& > *":{borderRadius:D.ux.rem(F.fx)}}},Pt={height:D.ux.rem(2),minHeight:D.ux.rem(2),width:D.ux.rem(2),fill:v.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:v.Il.CoreBlue50},"&[data-disabled='true']":{fill:v.Il.CoreNeutral30}}},Rt={borderRadius:D.ux.rem(.75),background:v.Il.CoreNeutral20,margin:`${D.ux.rem(-.25)} ${D.ux.rem(-.25)}`,padding:`${D.ux.rem(.25)} ${D.ux.rem(.25)}`,$nest:{[`& .${Z.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${Z.g.fullCardSelector}`]:{padding:`${D.ux.rem(.75)} ${D.ux.rem(.5)} ${D.ux.rem(.5)} ${D.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${D.ux.rem(-.5)})`}}},Ot={paddingTop:D.ux.rem(.25),paddingBottom:D.ux.rem(.5),paddingLeft:D.ux.rem(.5),paddingRight:D.ux.rem(.5),fontWeight:"bold",fontSize:D.ux.rem(.875),lineHeight:D.ux.rem(1.125)};function Bt(e,t){return{display:["block","-webkit-box"],maxHeight:D.ux.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const $t=(0,n._)((0,i._)({},Bt(1.5,3)),{lineHeight:D.ux.rem(1.5)}),Ut=(0,n._)((0,i._)({},Bt(1.3125,3)),{lineHeight:D.ux.rem(1.3125)}),Wt={padding:D.ux.rem(.5),borderRadius:D.ux.rem(F.fx),background:v.Il.CoreNeutral10,color:v.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${F.g_}, ${F.xL}`},zt=.25,Gt={opacity:0,pointerEvents:"none"},jt={transition:`opacity ${D.ux.seconds(zt)}`},Ht=D.ux.stylesheet({loadingWrapper:[jt],loadingWrapperInvisible:[jt,Gt],description:[ot],minimalDescription:[ot,st],more:[lt],onboardingNotification:[{display:"block"}],title:[ct],titleMinimal:[ct,dt],label:[ut],dropdownContainer:[pt],spinner:[mt],spinnerInvisible:[mt,{opacity:0,pointerEvents:"none"}],newLabel:[ht],newCheckNotification:[gt],baseNotice:[ft],iconWrapper:[yt],anonymousUserNotice:[ft,vt],fluencyNotice:[ft,xt],fluencyInfo:[bt],cardFooter:[Tt],circleProgress:[Mt],circleText:[{display:"none"}],bundleTitle:[Nt],bundleNavWrapper:[Lt],bundleNavCount:[Dt],bundleNavMatchesRow:[Ft],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Pt],bundleNavLeftButtonIcon:[Pt,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Pt,{transform:"rotate(270deg)"}],cardWrapper:[Rt],cardWrapperTitle:[Ot],highlightedTextBox:[Wt],highlightedTextInnerBox:[$t],minimalHighlightedTextInnerBox:[Ut]})},87684:(e,t,r)=>{r.d(t,{J:()=>Ot});var i,n=r(50858),a=r(55818),o=r(27378),s=r(57050),l=r(40327),c=r(23239),d=r(8543),u=r(18813),p=r(4870),m=r(64757),h=r(8125),g=r(5114),f=r(83078),y=r(22232),v=r(44060),x=r(42040),b=r(50474),C=r(48643),I=r(4021),S=r(14330),w=r(3656),A=r(89894),E=r(98403),_=r(19751),k=r(28706),T=r(90845),M=r(26027),N=r(66268),L=r(77610),D=r(4890),F=r(93462),P=r(1883),R=r(52575),O=r(19025);!function(e){e.Full=({card:e,actions:t,isChecking:r})=>o.createElement(P.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:N.lY.Type.alertCardShow,cardType:N.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,O.Gh)(e.renderOptions),body:o.createElement(R.M9,{card:e,actions:t,isChecking:r}),mainActions:o.createElement(R.Kg,{card:e,feedbackActions:t}),footer:o.createElement(R.lJ,{card:e}),subActions:o.createElement(m.zx.Primary,{href:e.activeAlert.knowledgeHubTermCreationUrl,target:"_blank",rel:"noopener noreferrer",onClick:()=>t.next({type:N.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},o.createElement(p.JO.New,null),"Add term"),extra:o.createElement(R.mQ,{card:e,actions:t})})}(i||(i={}));var B=r(55415),$=r(34217),U=r(74660),W=r(98637),z=r(54001),G=r(59179),j=function(e){var t=e.theme,r=void 0===t?{}:t;return o.createElement(d.F.div,(0,z.Sh)(Y.container,r.container),o.createElement(d.F.div,(0,z.Sh)(Y.swoosh,r.animation)))},H=A.ux.keyframes({to:{backgroundPosition:"0 100%"}}),Y=A.ux.prefixedStylesheet("ai-animation-v2",{container:[{position:"relative",width:A.ux.rem(2),height:A.ux.rem(2),display:"inline-block"}],swoosh:[{position:"absolute",left:0,right:0,top:0,bottom:0,animationName:H,animationTimingFunction:"steps(".concat(119,", start)"),animationFillMode:"forwards",animationDuration:A.ux.seconds(2),animationIterationCount:"infinite",background:"transparent url('".concat(G.y,"swoosh.png') 0 0 no-repeat"),backgroundSize:A.ux.percent(100)}]}),V=r(66346);const Z=({card:e,actions:t,disabled:r})=>(0,R.m_)(e.activeAlert,e.renderOptions.layoutDensity)?o.createElement(V.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e,disabled:r}):null,J=$.UI.Grid.make((({slots:e,state:t,notify:r})=>o.createElement(d.F.Fragment,null,t.pipe(_.map((t=>o.createElement(R.VM,{card:t,actions:{next:e=>r(e)(),error:s.Q1,complete:s.Q1},isChecking:_.of(!1),isCheckingGlobal:_.of(!1),cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,e.body)),cardTheme:{contentBody:Q.contentBody}}))))))),Q=A.ux.stylesheet({contentBody:[{paddingLeft:0}]}),q=$.UI.Knot.make(J,{body:$.UI.Node.make((()=>{const e=o.useContext(b.m.Context);return o.createElement("div",{className:ee.container},o.createElement(j,{theme:{container:ee.animation}}),o.createElement(w.XY,{className:ee.label},e.card.shortenIt.loadingLabel))}))}),X={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:A.ux.rem(.25)},K={paddingLeft:A.ux.rem(.5)},ee=A.ux.stylesheet({container:[X],animation:[{transform:"scale(.7)"}],label:[K]}),te=(e,t)=>$.Z.composeKnot({body:(0,s.a9)(_.of(null)),root:$.Z.fromSideEffect((e=>{t.next(e)}),e)}),re=$.UI.Knot.make(J,{body:$.UI.Node.make((()=>{const e=o.useContext(b.m.Context);return o.createElement("div",{className:ae.container},o.createElement(p.JO.ValidationOk,null),o.createElement(w.XY,{className:ae.label},e.card.shortenIt.notFoundLabel))}))}),ie={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:A.ux.rem(.25)},ne={paddingLeft:A.ux.rem(.5)},ae=A.ux.stylesheet({container:[ie],label:[ne]}),oe=(e,t)=>$.Z.composeKnot({body:(0,s.a9)(_.of(null)),root:$.Z.fromSideEffect((e=>{t.next(e)}),e)});var se=r(98410),le=r(19962),ce=r(40219),de=r(60797),ue=r(85089),pe=r(71249),me=r(86732),he=r(26215),ge=r(94048);const fe=$.UI.Node.make((({state:e})=>o.createElement(d.F.Fragment,null,e.pipe(_.map((({collapsed:e,text:t})=>e?o.createElement("span",{className:Be.shortenItCollapsedDelete},o.createElement(p.JO.EllipsisSmall,{width:13,className:Be.shortenItCollapsedIcon})):o.createElement("span",{className:Be.shortenItDelete},t))))))),ye=/^\W/,ve=$.UI.Node.make((({state:e})=>o.createElement(d.F.span,{className:e.pipe(_.map((e=>ye.test(e.text)?Be.shortenItInsertPunctuation:Be.shortenItInsert)))},e.pipe(_.map((e=>e.text)))))),xe=$.UI.Node.make((({state:e})=>o.createElement(d.F.span,null,e.pipe(_.map((e=>e.text)))))),be=$.UI.Union.make("kind",{insert:ve,delete:fe,text:xe}),Ce=$.UI.Grid.make((({slots:e,state:t,notify:r})=>{const i=o.useContext(b.m.Context).card.shortenIt.collapsedButtonTooltip;return o.createElement(d.F.Fragment,null,t.pipe(_.map((({isReviewableGroup:t,isInReview:n,group:a})=>(0,s.zG)(a,g.filter((()=>t)),g.fold((()=>e.parts),(t=>n?o.createElement("span",{ref:e=>{e&&(0,s.zG)(g.fromNullable(e.offsetParent),g.map((e=>e.getBoundingClientRect())),f.bw((i=>{const n=e.getBoundingClientRect();r({kind:"editGroupExpanded",group:t,offsetRect:{width:n.width,height:n.height,top:n.top-i.top,left:n.left-i.left},offsetParentSize:{width:i.width,height:i.height}})()})))},className:Be.shortenItEditGroupExpanded},e.parts):o.createElement(m.zx,{name:"shorten-it-review-change",className:Be.shortenItEditGroupButton,animationMode:me.m.FromClickPoint,title:i,"aria-label":i,tag:he.X.div,onClick:r({kind:"reviewEdit",group:t})},e.parts))))))))})),Ie=$.UI.Knot.make(Ce,{parts:$.UI.List.make(pe.IX,be)}),Se=$.UI.List.make(pe.IX,Ie),we=$.UI.Grid.make((({slots:e,state:t})=>o.createElement(w.XY,{className:t.pipe(_.map((e=>(0,s.zG)(e,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>Be.minimalShortenItBackground),(()=>Be.shortenItBackground))))))},e.labels))),Ae=$.UI.Knot.make(we,{labels:Se}),Ee="cards-replacements_labels-",_e={shortenItBackground:`${Ee}shortenItBackground`,minimalShortenItBackground:`${Ee}minimalShortenItBackground`,shortenItDelete:`${Ee}shortenItDelete`,shortenItInsert:`${Ee}shortenItInsert`,shortenItInsertPunctuation:`${Ee}shortenItInsertPunctuation`,shortenItEditGroupButton:`${Ee}shortenItEditGroupButton`,shortenItEditGroupExpanded:`${Ee}shortenItEditGroupExpanded`,shortenItCollapsedDelete:`${Ee}shortenItCollapsedDelete`,shortenItCollapsedDeleteButton:`${Ee}shortenItCollapsedDeleteButton`,shortenItCollapsedIcon:`${Ee}shortenItCollapsedIcon`},ke={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${A.ux.rem(1)} 0`,color:v.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${ce.g_}, ${ce.xL}`},Te={color:v.Il.CoreRed50,textDecoration:"line-through",fontWeight:400},Me={color:v.Il.CoreBlue60,fontWeight:600},Ne={transitionProperty:"background-color",transitionDuration:".2s",padding:`0 0 ${A.ux.rem(.2)} 0`,display:"inline",whiteSpace:"unset",verticalAlign:"unset",borderWidth:"1px",borderStyle:"solid",borderRadius:A.ux.rem(ce.fx)},Le=(0,a._)((0,n._)({},Ne),{backgroundColor:v.Il.CoreNeutral1,borderColor:v.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:v.Il.CoreBlue10,borderColor:v.Il.CoreBlue10}}}),De=(0,a._)((0,n._)({},Ne),{backgroundColor:v.Il.CoreBlue10,borderColor:v.Il.CoreBlue10,position:"relative"}),Fe={display:"inline-block",width:A.ux.rem(1),lineHeight:A.ux.rem(.625),height:A.ux.rem(.625),margin:`0 ${A.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:A.ux.rem(ce.mA)},Pe=(0,n._)({},Fe),Re=(0,a._)((0,n._)({},Fe),{backgroundColor:v.Il.CoreNeutral20,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:v.Il.CoreBlue10}}}),Oe={minWidth:"unset",minHeight:"unset",paddingBottom:A.ux.rem(.125),fill:v.Il.CoreBlue60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:v.Il.CoreNeutral50}}},Be={shortenItBackground:A.ux.joinClasses([_e.shortenItBackground,A.ux.style(ke),ge.E.style(ke)]),minimalShortenItBackground:A.ux.joinClasses([_e.minimalShortenItBackground,A.ux.style(ke,{lineHeight:A.ux.rem(1.3125)}),ge.E.style(ke,{lineHeight:A.ux.rem(1.3125)})]),shortenItDelete:A.ux.joinClasses([_e.shortenItDelete,A.ux.style(Te),ge.E.style(Te)]),shortenItInsert:A.ux.joinClasses([_e.shortenItInsert,A.ux.style(Me),ge.E.style(Me)]),shortenItInsertPunctuation:A.ux.joinClasses([_e.shortenItInsertPunctuation,A.ux.style(Me),ge.E.style(Me)]),shortenItEditGroupButton:A.ux.joinClasses([_e.shortenItEditGroupButton,A.ux.style(Le),ge.E.style(Le)]),shortenItEditGroupExpanded:A.ux.joinClasses([_e.shortenItEditGroupExpanded,A.ux.style(De),ge.E.style(De)]),shortenItCollapsedDelete:A.ux.joinClasses([_e.shortenItCollapsedDelete,A.ux.style(Pe),ge.E.style(Pe)]),shortenItCollapsedDeleteButton:A.ux.joinClasses([_e.shortenItCollapsedDeleteButton,A.ux.style(Re),ge.E.style(Re)]),shortenItCollapsedIcon:A.ux.joinClasses([_e.shortenItCollapsedIcon,A.ux.style(Oe),ge.E.style(Oe)])};A.ux.cssRule(`.${_e.shortenItDelete} + .${_e.shortenItInsert}`,{marginLeft:A.ux.rem(.25)});const $e=$.UI.Grid.make((({state:e,view:t,notify:r,slots:i})=>{const l=o.useContext(b.m.Context),u=(0,a._)((0,n._)({},E.UF()),{next:e=>r(e)()}),p=T.P.useMemoOnDidMount((()=>c.h.create(!1)));return T.P.useSubscriptionTo(t("transformHidden").pipe(_.tap(E.wW(p)))),o.createElement(d.F.Fragment,null,e.pipe(_.map((({item:e})=>o.createElement(P.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:r({type:N.lY.Type.alertCardShow,cardType:N.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOut:r({type:N.lY.Type.hover,kind:"unhover",id:e.id}),onMouseOver:r({type:N.lY.Type.hover,kind:"hover",id:e.id}),theme:(0,n._)({content:t("isCheckingGlobal").pipe(_.map((0,h.RN)(Je.loadingWrapperInvisible,Je.loadingWrapper)))},(0,O.Gh)(e.renderOptions)),mainActions:o.createElement(R.Kg,{card:e,feedbackActions:u}),subActions:o.createElement(Z,{card:e,actions:u}),body:o.createElement(o.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(I.C.Regular,null,l.beta)}),(0,s.zG)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:{next:e=>r(e)(),error:s.Q1,complete:s.Q1},layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(d.F.div,{className:t("transformHidden").pipe(_.map((0,h.RN)(Je.transformHidden,void 0)))},i.transform)),footer:o.createElement(o.Fragment,null,o.createElement(R.lJ,{card:e}),o.createElement(d.F.div,{className:Je.footerBtns},o.createElement(R.Nm,{className:Je.applyButton,spinnerClassName:Je.applyButtonSpinner,messageClassName:Je.applyButtonMessage,applyMessage:e.activeAlert.todoAction,checkingMessage:l.card.shortenIt.acceptButtonCheckingLabel,checkingInProgress:p,onClick:k.hz(r({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),cardType:N.lY.getCardType(e)}))}))),extra:o.createElement(R.o,{isChecking:t("isCheckingGlobal")})})))))})),Ue=$.UI.Grid.make((({slots:e,state:t,notify:r})=>{const i=o.useContext(b.m.Context).card.shortenIt,{ref:l,onMount:c}=T.P.useElWatcher(),u=de.oA(t).pipe(_.map((e=>e.group)),_.distinctUntilChanged(),_.switchMap((e=>l.pipe(de.cp((t=>ue.YC(t).pipe(_.map((()=>({width:t.clientWidth,height:t.clientHeight}))),_.startWith({width:t.clientWidth,height:t.clientHeight}),_.distinctUntilChanged(le.xu.eq.equals),_.tap((t=>r((0,a._)((0,n._)({kind:"editPopupSize"},t),{group:e}))())))))))));return T.P.useSubscriptionTo(u),o.createElement(d.F.div,{className:Je.editPopupContainer},e.replacementLabels,t.pipe(_.map(g.fold(s.gn,(e=>{var{group:t}=e,n=(0,se._)(e,["group"]);return o.createElement(d.F.div,{className:Je.editPopup,style:"withPosition"===n.kind?{transform:`translate(${n.left}px, ${n.top}px)`,visibility:"visible",opacity:1}:"withoutPosition"===n.kind?{visibility:"hidden",opacity:0}:(0,y.vE)(n),mount:c},o.createElement(m.zx.Primary,{name:"shorten-it-keep-change",onClick:r({kind:"keepEdit",group:t})},i.editPopupKeepButtonLabel),o.createElement(m.zx.Tertiary,{name:"shorten-it-dismiss-change",onClick:r({kind:"dismissEdit",group:t})},i.editPopupDismissButtonLabel))})))))})),We=$.UI.Knot.make(Ue,{replacementLabels:Ae}),ze=$.UI.Knot.make($e,{transform:We}),Ge={padding:`0 ${A.ux.rem(1)}`},je={display:"flex",flexDirection:"row",padding:A.ux.rem(.25),position:"absolute",backgroundColor:v.Il.CoreNeutral0,boxShadow:"0px 0px 0.5px rgba(0, 0, 0, 0.7), 0px 2px 8px rgba(26, 33, 52, 0.2)",borderRadius:A.ux.rem(ce.fx),zIndex:1,top:0,left:0,transition:"visibility 0.15s linear, opacity 0.15s linear"},He={$nest:{"&[data-disabled='true']":{backgroundColor:v.Il.CoreNeutral10,color:v.Il.CoreNeutral40}}},Ye={$nest:{"& circle":{stroke:v.Il.CoreNeutral40}}},Ve={paddingRight:A.ux.rem(.25)},Ze={transition:`opacity ${A.ux.seconds(R.k_)}`},Je=A.ux.stylesheet({loadingWrapper:[Ze],loadingWrapperInvisible:[Ze,{opacity:0,pointerEvents:"none"}],footerBtns:[{display:"flex"}],expandEditsBtn:[Ge],editPopupContainer:[{position:"relative"}],editPopup:[je],applyButton:[He],applyButtonSpinner:[Ye],applyButtonMessage:[Ve],transformHidden:[{pointerEvents:"none",opacity:.5}]});var Qe=r(35214),qe=r(73975);const Xe=(e,t,r)=>$.Z.composeKnot({root:$.Z.fromSideEffect(s.Q1,e.pipe(_.map((e=>e.renderOptions.layoutDensity)))),labels:i=>_.mergeStatic(i.pipe(_.withLatestFrom(e),_.tap((([e,i])=>{const o=e.action.action;switch(o.kind){case"reviewEdit":t.set(g.some({groupId:o.group,expandedEdit:g.none,popupSize:g.none,popupPosition:g.none})),r.next({type:N.lY.Type.shortenItReviewEdit,alertId:i.activeAlert.id,itemId:i.id,group:o.group});break;case"editGroupExpanded":t.set((0,s.zG)(t.get(),g.filter((e=>e.groupId===o.group)),g.fold((()=>g.some({groupId:o.group,popupSize:g.none,popupPosition:g.none,expandedEdit:g.some({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})})),(e=>g.some((0,a._)((0,n._)({},e),{expandedEdit:g.some({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})}))))));break;default:(0,y.vE)(o)}})),_.switchMap((()=>_.NEVER))),_.sequenceS({item:e,editsInReview:t}).pipe(_.map((({item:e,editsInReview:t})=>(0,s.zG)(e.transform,g.filter(W.b$.isShortenIt),g.map(B.ei("labels")),g.map((t=>(0,s.zG)(t,pe.DZ((t=>(0,s.zG)(t.group,g.fold(s.jv,(t=>e.activeAlert.dismissedTransformGroups.has(t))))?t.type===W.GP.Delete?g.some((0,a._)((0,n._)({},t),{type:W.GP.Text})):t.type===W.GP.Insert?g.none:g.some(t):g.some(t)))))),g.fold((()=>[]),(0,s.ls)(pe.u4([],((e,r)=>{var i;const n=r.type===W.GP.Delete?{kind:r.type,text:r.text,collapsed:(0,s.zG)(r.group,g.fold((()=>null!==(i=r.shouldBeCollapsed)&&void 0!==i&&i),(e=>!(0,s.zG)(t,g.exists((t=>t.groupId===e)))))),group:r.group}:r.type===W.GP.Insert||r.type===W.GP.Text?{kind:r.type,text:r.text,group:r.group}:(0,y.vE)(r);return e.length>0&&g.getEq(qe.yv).equals(e[e.length-1].group,r.group)&&g.isSome(r.group)?e.slice(0,-1).concat({group:r.group,parts:e[e.length-1].parts.concat(n)}):e.concat({group:r.group,parts:[n]})})),pe.UI((e=>({root:{isReviewableGroup:e.parts.length>1||1===e.parts.length&&e.parts[0].kind!==W.GP.Text,isInReview:(0,s.zG)(e.group,g.fold(s.jv,(e=>(0,s.zG)(t,g.exists((t=>t.groupId===e)))))),group:(0,s.zG)(e.parts.map((e=>e.group)),(0,Qe.fold)(g.getFirstMonoid()))},parts:e.parts}))))))))))}),Ke=(e,t,r,i,n,a)=>$.Z.composeKnot({root:i=>_.mergeStatic(i.pipe(_.tap((e=>{e.type===N.lY.Type.hover&&a.next("hover"===e.kind),r.next(e)})),_.switchMap((()=>_.NEVER))),_.sequenceS({item:e,isCheckingGlobal:t,transformHidden:n})),transform:$.Z.composeKnot({root:et(e,i,r),replacementLabels:Xe(e,i,r)})});const et=(e,t,r)=>i=>_.mergeStatic(i.pipe(_.withLatestFrom(e),_.tap((([e,i])=>{"editPopupSize"===e.kind?t.set((0,s.zG)(t.get(),g.filter((t=>t.groupId===e.group)),g.fold((()=>g.some({groupId:e.group,expandedEdit:g.none,popupPosition:g.none,popupSize:g.some({width:e.width,height:e.height})})),(t=>g.some((0,a._)((0,n._)({},t),{popupSize:g.some({width:e.width,height:e.height})})))))):function(e,t,r,i){switch(r.set((0,s.zG)(r.get(),g.filter((e=>e.groupId!==t.group)))),t.kind){case"dismissEdit":i.next({type:N.lY.Type.shortenItDismissEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group}),e.activeAlert.transformGroups.size===new Set(e.activeAlert.dismissedTransformGroups).add(t.group).size&&i.next({type:N.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:M.X.isEligibleForDismissSurvey(e)});break;case"keepEdit":i.next({type:N.lY.Type.shortenItKeepEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group});break;default:(0,y.vE)(t.kind)}}(i,e,t,r)})),_.switchMap((()=>_.NEVER))),t.view(g.chain((e=>(0,s.zG)(e.expandedEdit,g.map((t=>(0,s.zG)(e.popupSize,g.fold((()=>({kind:"withoutPosition",group:e.groupId})),(r=>(0,n._)({kind:"withPosition",group:e.groupId},function(e,t,r=-10){const i=t.offsetRect.top+t.offsetRect.height,n=t.offsetRect.left+r;if(n+e.width>t.offsetParentSize.width)return{top:i,left:t.offsetParentSize.width-e.width};return{top:i,left:n}}(r,t))))))))))));const tt={loading:q,summary:ze,notFound:re},rt=$.UI.Union.make("kind",tt),it=e=>e.pipe(_.map((e=>{const t=e.activeAlert.summaryState,r=g.fold(s.jv,W.b$.isShortenIt)(e.transform);switch(t){case U.vQ.SummaryState.notFound:return{kind:"notFound"};case U.vQ.SummaryState.notRequested:return{kind:"loading"};case U.vQ.SummaryState.requestSent:return r?{kind:"summary"}:{kind:"loading"};case U.vQ.SummaryState.invalidated:case U.vQ.SummaryState.received:return{kind:"summary"};default:(0,y.vE)(t)}})));var nt;!function(e){e.Full=e=>{const t=T.P.useAtomOf(e.card),{isChecking:r,isCheckingGlobal:i}=function(e,t,r){const i=T.P.useAtomOf({isWaiting:e.activeAlert.summaryState===U.vQ.SummaryState.requestSent||e.activeAlert.summaryState===U.vQ.SummaryState.invalidated,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return T.P.useMemoOnDidMount((()=>({isChecking:_.combineLatestStatic([t,i]).pipe(_.map((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),_.distinctUntilChanged()),isCheckingGlobal:_.combineLatestStatic([r,i]).pipe(_.map((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),_.distinctUntilChanged())})))}(e.card,e.isChecking,e.isCheckingGlobal),{transformHidden:n,isMouseInside:a}=(0,R.ce)(r),l=T.P.useMemoOnDidMount((()=>c.h.create(g.none))),d=T.P.useMemoOnDidMount((()=>t.pipe(_.map((0,s.ls)(B.ei("transform"),g.filter(W.b$.isShortenIt))),_.skipBy(g.getEq(W.b$.ShortenIt.eq)),_.map((()=>g.none)),_.tap(E.wW(l)))));return T.P.useSubscriptionTo(d),o.createElement(o.Fragment,null,$.UI.mount(rt,((e,t,r,i,n,a)=>$.Z.composeUnion({loading:te(e,r),notFound:oe(e,r),summary:Ke(e,t,r,i,n,a)},(()=>it(e))))(t,i,e.actions,l,n,a)))}}(nt||(nt={}));var at=r(97428);const ot=({card:e,actions:t})=>{const r=o.useContext(b.m.Context),i=g.isNone(e.activeAlert.takeawayFeedback)?r.card.takeaway.defaultTitle:e.activeAlert.title,n=g.fromNullable(e.activeAlert.highlightTexts[0]),a=(0,l.pipe)(e.activeAlert,g.fromPredicate((e=>!e.takeawayIsLikelyToBeRead&&f.FX(U.TO.correctlyDetected)(e.takeawayFeedback))),g.map((()=>e.meta.explanation)));return o.createElement(o.Fragment,null,(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions},o.createElement(R.jg,{text:M.X.miniTitle(e,r)}))),(()=>o.createElement(o.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(R.Dx,{text:i}))))),(0,l.pipe)(n,g.fold(s.gn,(t=>o.createElement(R.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,l.pipe)(a,g.fold(s.gn,(r=>o.createElement(R.dk,{description:r,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))};var st;const lt=({card:e,feedbackActions:t})=>o.createElement(o.Fragment,null,o.createElement(m.zx.Ghost,{name:"takeaway-like",onClick:k.hz((()=>t.next({type:N.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(st=e.activeAlert.highlightTexts[0])&&void 0!==st?st:"",isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(p.JO.YesCircle,null)," Yes"),o.createElement(m.zx.Ghost,{name:"takeaway-dislike",onClick:k.hz((()=>t.next({type:N.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},o.createElement(p.JO.NoCircle,null)," No")),ct=({card:e,feedbackActions:t})=>{const r=o.useContext(b.m.Context);return o.createElement(o.Fragment,null,o.createElement(m.zx.Ghost,{name:"resolve",title:r.resolve,"aria-label":r.resolveLabel,onClick:k.hz((()=>t.next({type:N.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(p.JO.YesCircle,null)),o.createElement(m.zx.Ghost,{name:"ignore",title:r.dismiss,"aria-label":r.dismiss,onClick:k.hz((()=>t.next({type:N.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(p.JO.Ignore,null)))};function dt(e){return!g.isNone(e.takeawayFeedback)&&!(!g.isSome(e.examples)&&!g.isSome(e.details))}var ut;!function(e){e.Full=({card:e,actions:t})=>{return o.createElement(P.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:N.lY.Type.alertCardShow,cardType:N.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(r=e.renderOptions,(0,a._)((0,n._)({},(0,O.f8)(r.layoutDensity)),{wrapper:(0,l.pipe)(r.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>mt.minimalCardWrapper),(()=>{})))})),body:o.createElement(ot,{card:e,actions:t}),mainActions:g.isNone(e.activeAlert.takeawayFeedback)?o.createElement(lt,{card:e,feedbackActions:t}):o.createElement(ct,{card:e,feedbackActions:t}),footer:dt(e.activeAlert)?o.createElement(R.lJ,{card:e}):null,subActions:dt(e.activeAlert)?o.createElement(V.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var r}}(ut||(ut={}));const pt={padding:`${A.ux.rem(.75)} ${A.ux.rem(.5)} ${A.ux.rem(.5)} ${A.ux.rem(1)}`},mt=A.ux.stylesheet({minimalCardWrapper:[pt]});var ht=r(28748),gt=r(11662),ft=r(32096);const yt=e=>A.ux.style({textDecoration:"line-through",color:e,fontWeight:"bold"}),vt=e=>A.ux.style({fontWeight:"bold",padding:`${A.ux.rem(.0625)} ${A.ux.rem(.21875)} ${A.ux.rem(.0625)} ${A.ux.rem(.21875)}`,border:`1px solid ${e}`,borderRadius:A.ux.rem(.125),color:e}),xt=A.ux.style({fontSize:A.ux.rem(.875),letterSpacing:"0px",lineHeight:A.ux.rem(1.3125),padding:`${A.ux.rem(.15625)} 0`}),bt=A.ux.style({fontWeight:"bold",padding:`${A.ux.rem(.0625)} ${A.ux.rem(.21875)} ${A.ux.rem(.0625)} ${A.ux.rem(.21875)}`,borderRadius:A.ux.rem(.125),color:ft.Qi,background:ft.T1}),Ct=A.ux.style({fontStyle:"italic"}),It=[bt,xt],St=/[\d\w&]/,wt=e=>1===e.length&&!St.test(e),At=(e,t,r)=>(i,n,a)=>{const o=a[n-1];switch(i.type){case"insert":return e(i,n,o);case"delete":return t(i,n,o);case"text":return r(i,n,o);default:throw new Error("Unexpected citation alert transform part:"+JSON.stringify(i))}},Et=(e,t)=>{var r;return"text"===(null===(r=t)||void 0===r?void 0:r.type)?null:o.createElement("span",{key:"s"+e,className:xt}," ")},_t=e=>o.createElement(o.Fragment,null,e.replacement.labels.map(e.isCitationGap?At(((e,t,r)=>o.createElement(o.Fragment,{key:t},Et(t,r),o.createElement("span",(0,a._)((0,n._)({},(0,z.Sh)(...It)),{key:t}),e.text))),((e,t)=>o.createElement(o.Fragment,{key:t})),((e,t)=>o.createElement("span",{key:t,className:xt},e.text))):At(((e,t,r)=>{return o.createElement(o.Fragment,{key:t},Et(t,r),o.createElement("span",(0,n._)({key:t},(0,z.Sh)(...(i=e.text,[wt(i)?vt(ft.Wi):(a=ft.Wi,A.ux.style({color:a,fontWeight:"bold"})),xt,Ct]))),e.text));var i,a}),((e,t,r)=>{return o.createElement(o.Fragment,{key:t},Et(t,r),o.createElement("span",(0,n._)({key:t},(0,z.Sh)(...(i=e.text,wt(i)?[vt(ft._b),(a=ft._b,A.ux.style({backgroundImage:`linear-gradient(to top left,\n        rgba(0,0,0,0) 0%,\n        rgba(0,0,0,0) calc(50% - 0.5px),\n        ${a} 50%,\n        rgba(0,0,0,0) calc(50% + 0.5px),\n        rgba(0,0,0,0) 100%)`})),xt,Ct]:[yt(ft._b),xt,Ct]))),e.text));var i,a}),((t,r)=>o.createElement("span",(0,n._)({key:r},(0,z.Sh)(xt,("italic"===t.style||!e.isCitationItalicization)&&Ct)),t.text))))),kt=({transformHidden:e})=>{const t=o.useContext(b.m.Context);return o.createElement(w.Xk,{"aria-hidden":E.U_(e),className:e.pipe(_.map((0,h.RN)(Gt.transformHint,Gt.transformHintInvisible)))},t.card.updatingSuggestion)},Tt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i})=>{const n=o.useContext(b.m.Context);return o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:(0,s.a9)(o.createElement(R.M9,{card:e,actions:t,isChecking:r})),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(R.lJ,{card:e}),o.createElement("div",{className:Gt.fullSentenceCardFooterBtns},o.createElement(R.Nm,{title:n.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:N.lY.Type.alertApply,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),alertId:e.activeAlert.id,alternativeIndex:0,cardType:N.lY.getCardType(e)})}))})))})},Mt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:n})=>{const a=o.useContext(b.m.Context),u=c.h.create(!0);return T.P.useSubscriptionTo((0,l.pipe)(u,_.skip(1),_.tap((e=>t.next({type:N.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Bt,{isNew:e.renderOptions.isNew,actions:t}),(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(C.T9,{classes:{rendered:Gt.replacement,removing:Gt.replacementHidden},timeout:250,content:u.pipe(_.combineLatest(n,((t,r)=>(0,l.pipe)(r,g.fold((()=>(x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(r=>o.createElement(gt.n4,{replacements:r,showDiff:t,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(D.j.Features.a11yContrast)})))))))}),o.createElement(R.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(R.lJ,{card:e}),o.createElement(d.F.div,{className:Gt.fullSentenceCardFooterBtns},o.createElement(R.Nm,{title:n.pipe(_.map(g.fold((()=>""),(e=>a.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),cardType:N.lY.getCardType(e)})}))}),o.createElement(S.Ys,{className:Gt.fullSentenceCardCheckbox,checked:u,name:"set-goals"},a.card.showChangesToggle)))})},Nt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:n})=>{const a=o.useContext(b.m.Context),c=(0,l.pipe)(e.activeAlert.extraProperties.citationGap,f.FX(!0)),u=(0,l.pipe)(e.activeAlert.extraProperties.citationItalicization,f.FX(!0));return o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Bt,{isNew:e.renderOptions.isNew,actions:t}),(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity,className:jt.description})))),o.createElement(C.T9,{classes:{rendered:Gt.replacement,removing:Gt.replacementHidden},timeout:250,content:n.pipe(_.map((e=>o.createElement(_t,{replacement:e.value,isCitationGap:c,isCitationItalicization:u}))))}),o.createElement(R.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(R.lJ,{card:e}),o.createElement(d.F.div,{className:Gt.fullSentenceCardFooterBtns},!c&&o.createElement(R.Nm,{title:a.card.todoAction(e.activeAlert.todoAction),applyMessage:"Reformat",checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),cardType:N.lY.getCardType(e)})}))})))})},Lt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:n})=>{const a=(0,l.pipe)(e.userInput,g.getOrElse((0,s.a9)("")));return o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:i=>o.createElement(o.Fragment,{key:"content"},o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Bt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(d.F.div,{className:i.pipe(_.map((0,h.RN)(Gt.transformContainerInvisible,Gt.transformContainer)))},o.createElement(C.T9,{classes:{rendered:Gt.replacement,removing:Gt.replacementHidden},timeout:250,content:n.pipe(_.map(g.fold((()=>(x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>o.createElement(gt.$s,{key:"label",gapValue:a,replacements:r,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(D.j.Features.a11yContrast),onFocus:()=>t.next({type:N.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:r=>t.next({type:N.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:r}),onApply:k.hz((()=>t.next({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),cardType:N.lY.getCardType(e)})))})))))})),o.createElement(kt,{transformHidden:i}),o.createElement(R.ko,{card:e,isChecking:r}),(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(R.lJ,{card:e}))})},Dt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i})=>{(0,y.kG)(g.isSome(e.activeAlert.extraProperties.citationDetection),"Should contain citation detection");const n=o.useContext(b.m.Context),a=c.h.create(f.MH(e.activeAlert.extraProperties.citationDetection));return o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Bt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),o.createElement("div",{className:(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.cozy)((()=>Ht.dropdownContainer),(()=>Ht.minimalDropdownContainer)))},o.createElement(u.L,{name:"citationStyle",label:o.createElement(d.F.div,null,a.pipe(_.map((e=>o.createElement("span",{className:Ht.dropdownLabel,key:e},n.citation.essayDetectionCard.dropdownOptions[e],o.createElement(p.JO.TriangleArrow,{className:Ht.arrowIcon}))))))},Object.entries(n.citation.essayDetectionCard.dropdownOptions).map((([t,r])=>o.createElement(m.zx.Flat,{key:t,name:t,onClick:()=>a.set(t),textPosition:"right"},a.pipe(_.map((e=>t===e?o.createElement(p.JO.DocumentSettings.Selected,null):o.createElement("div",{className:Ht.placeholder})))),r,void 0!==n.citation.essayDetectionCard.examples[t]&&(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.cozy)((()=>o.createElement("span",{className:Ht.example},n.citation.essayDetectionCard.examples[t])),(()=>null)))))))),o.createElement(R.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(R.lJ,{card:e}),o.createElement(d.F.div,{className:Gt.fullSentenceCardFooterBtns},o.createElement(R.Nm,{title:n.card.todoAction(e.activeAlert.todoAction),applyMessage:"Set style",checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:N.Wh.Kind.setAcademicDomainAndCitationStyle,citationStyle:a.get(),id:e.id}),t.next({type:N.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})}))})))})},Ft=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:n})=>{const a=o.useContext(b.m.Context);return o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:i=>o.createElement(o.Fragment,null,o.createElement(d.F.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(I.C.Regular,{a11yContrast:e.renderOptions.features.has(D.j.Features.a11yContrast)},a.beta)})),o.createElement(d.F.div,{className:i.pipe(_.map((0,h.RN)(Gt.transformContainerInvisible,Gt.transformContainer)))},o.createElement(C.T9,{classes:{rendered:Gt.replacement,removing:Gt.replacementHidden},timeout:250,content:n.pipe(_.map(g.fold((()=>(x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>{const i=(0,l.pipe)(e.synfonySelection,g.getOrElse((()=>[])));return o.createElement(gt.Px,{replacements:r,onClick:r=>k.hz((()=>{t.next({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,cardType:N.lY.getCardType(e),id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),drilldownSuggestionIds:i})})),onDive:(r,n)=>t.next({type:N.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:r,cardId:e.id,alternativeId:n,drilldownSuggestionIds:i}),onBack:()=>t.next({type:N.GM.Kind.back,cardId:e.id}),selection:i,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(D.j.Features.a11yContrast)})}))))})),o.createElement(kt,{transformHidden:i}),o.createElement(R.ko,{card:e,isChecking:r}),(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(R.lJ,{card:e}))})},Pt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:n})=>o.createElement(Rt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:i=>o.createElement(o.Fragment,null,o.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(d.F.div,{className:i.pipe(_.map((0,h.RN)(Gt.transformContainerInvisible,Gt.transformContainer)))},o.createElement(C.T9,{classes:{rendered:Gt.replacement,removing:Gt.replacementHidden},timeout:250,content:n.pipe(_.map(g.fold((()=>(x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>o.createElement(R.hT,{rl:r,onClick:r=>k.hz((()=>{t.next({type:N.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,id:e.id,eligibleForSurvey:M.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:M.X.isEligibleForGbPrompt(e),cardType:N.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(D.j.Features.a11yContrast),showDemoDocOnboardingA11yUpdates:e.renderOptions.features.has(D.j.Features.showOnboardingTourA11yUpdates)})))))})),o.createElement(kt,{transformHidden:i}),o.createElement(R.ko,{card:e,isChecking:r}),(0,l.pipe)(e.renderOptions.layoutDensity,D.j.Density.matchOrDefault(D.j.Density.minimal)((()=>null),(()=>o.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(R.lJ,{card:e}))}),Rt=e=>{var t,r,i;return o.createElement(R.VM,(0,a._)((0,n._)({},e),{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,s.a9)(o.createElement(R.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(r=e.mainActions)&&void 0!==r?r:(0,s.a9)(o.createElement(R.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(i=e.subActions)&&void 0!==i?i:(0,s.a9)(o.createElement(R.q4,{card:e.card,actions:e.actions}))}))},Ot=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a})=>L.i.isTakeawayItem(e)?o.createElement(ut.Full,{card:e,actions:t}):L.i.isShortenItItem(e)?o.createElement(nt.Full,{card:e,actions:t,isChecking:r,isCheckingGlobal:n}):L.i.isToneAIItem(e)?o.createElement(ht.Y.Full,{card:e,actions:t,isChecking:r,isCheckingGlobal:n}):L.i.isEthicalAIItem(e)?o.createElement(F.T.Full,{card:e,actions:t,isChecking:r}):L.i.isSuggestedSnippetItem(e)?o.createElement(at.w.Full,{card:e,actions:t,isChecking:r}):L.i.isKnowledgeHubSuggestedTermItem(e)?o.createElement(i.Full,{card:e,actions:t,isChecking:r}):M.X.isCitationDetectionCard(e)?o.createElement(Dt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n}):M.X.hasTransform(e)?M.X.hasFullSentenceTransform(e)||M.X.hasWritingExpertTransform(e)?o.createElement(Mt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a}):M.X.hasCitationTransform(e)?o.createElement(Nt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a}):M.X.hasOneGapTransform(e)?o.createElement(Lt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a}):M.X.hasSynfonyTransform(e)?o.createElement(Ft,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a}):o.createElement(Pt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:a}):M.X.isSimple(e)?o.createElement(Tt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n}):o.createElement(R.eb,{card:e,actions:t,isChecking:r}),Bt=e=>o.createElement(d.F.Fragment,null,e.isNew.pipe(_.map(g.fold(s.gn,(t=>o.createElement(R.jt,{type:t,actions:e.actions,key:"new-notification"})))),_.startWith(null))),$t={transition:`opacity ${A.ux.seconds(R.k_)}`,transitionDelay:A.ux.seconds(R.k_)},Ut={position:"absolute",top:A.ux.rem(2),color:v.Il.CoreNeutral40,lineHeight:A.ux.rem(2),transition:`opacity ${A.ux.seconds(R.k_)}`,transitionDelay:A.ux.seconds(R.k_)},Wt={transition:`opacity ${A.ux.seconds(R.k_)}`},zt={fontSize:A.ux.rem(v.xv.BodySize),lineHeight:A.ux.rem(2.0625)},Gt=(0,n._)({},A.ux.stylesheet({invisible:[R.Bn],transformContainer:[$t],transformContainerInvisible:[$t,R.Bn,{transitionDelay:"initial"}],transformHint:[Ut],transformHintInvisible:[Ut,R.Bn,{transitionDelay:"initial"}],replacement:[Wt],replacementHidden:[Wt,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[zt]})),jt=A.ux.prefixedStylesheet("withCitation",{description:[{$nest:{"& a":{backgroundImage:`repeating-linear-gradient(90deg, ${v.Il.CoreBlue50}, ${v.Il.CoreBlue50} 1px, transparent 1px, transparent 2px, ${v.Il.CoreBlue50} 2px)`,backgroundSize:"100% 1px",backgroundPosition:"0 100%",backgroundRepeat:"no-repeat",borderBottom:"none",paddingBottom:A.ux.px(1)}}}]}),Ht=A.ux.prefixedStylesheet("withCitationDetection",{dropdownLabel:[{color:v.Il.CoreBlue50,fontSize:A.ux.rem(.875),fontWeight:700,lineHeight:A.ux.rem(1.3125),cursor:"pointer"}],dropdownContainer:[{width:A.ux.rem(18.75)}],minimalDropdownContainer:[{width:A.ux.rem(10)}],arrowIcon:[{transform:"rotate(180deg)",position:"absolute",marginLeft:A.ux.rem(-.5625),top:A.ux.rem(-.34375),$nest:{"*":{fill:v.Il.CoreBlue50}}}],placeholder:[{width:A.ux.rem(2),margin:`0 ${A.ux.rem(.25)} 0 0`}],example:[{display:"inline-block",marginLeft:"auto",marginRight:0,color:v.Il.CoreNeutral50,fontStyle:"italic",fontSize:A.ux.rem(.75),lineHeight:A.ux.rem(2)}]})},76578:(e,t,r)=>{r.d(t,{P:()=>O});var i=r(50858),n=r(55818),a=r(27378),o=r(40327),s=r(54001),l=r(8543),c=r(77176),d=r(5114),u=r(50474),p=r(4021),m=r(3656),h=r(91549),g=r(4890),f=r(54290),y=r(74754),v=r(32941),x=r(23239),b=r(83078),C=r(48911),I=r(4870),S=r(66896),w=r(28706),A=r(26027),E=r(77610),_=r(28584);function k(e,t){return S.R.outcomeTypeMatch({correctness:a.createElement(I.JO.Correctness,{className:t}),clarity:a.createElement(I.JO.ClarityOutcome,{className:t}),premium:a.createElement(I.JO.Star,{className:t}),engagement:a.createElement(I.JO.EngagementOutcome,{className:t}),delivery:a.createElement(I.JO.DeliveryOutcome,{className:t}),vox:null,knowledgeHub:null})(e)}const T=({text:e,className:t})=>a.createElement("div",(0,i._)({className:t},w.yG(e,{allowedTags:["i","b"]}))),M=(e,t,r)=>{const l=A.X.miniTitle(e,t),c=(0,o.pipe)(e.activeAlert.extraProperties.vox,d.map((e=>(({vox:e,theme:t={}})=>({icon:(0,o.pipe)(e.logoUrl,d.map((e=>a.createElement(_.Im,(0,n._)((0,i._)({},(0,s.Sh)(t.logo)),{logoUrl:e}))))),action:a.createElement(_.$x,(0,n._)((0,i._)({vox:e},(0,s.Sh)(t.label)),{isMinimalCard:!1}))}))({vox:e,theme:{logo:r.voxLogo,label:r.voxLabel}})))),u=(0,o.pipe)(((e,t)=>(0,o.pipe)(e.activeAlert.extraProperties.tone,d.map((({emojiId:e})=>({action:t.replace(C.Vg,""),emojiId:e})))))(e,l),d.map((({action:e,emojiId:t})=>({icon:d.some(a.createElement(C.In,{id:t,className:(0,s.Sh)(r.emojiLogo).className})),action:a.createElement(T,{text:e,className:r.wrapper})})))),p=({className:e})=>a.createElement(I.JO.PaidLink,{width:14,className:e});return(0,o.pipe)(c,b.vx(u),d.getOrElse((()=>{return{icon:(t=e.activeAlert,(0,o.pipe)(t.freePremium,d.exists((e=>"unlocked"===e)))?d.some(a.createElement(p,{className:(0,s.Sh)(r.freePremiumIcon).className})):E.i.isTakeawayItem(e)?d.some(a.createElement(I.JO.Megaphone,{width:16,className:r.takeawayLogo})):d.none),action:a.createElement(T,{text:l,className:r.wrapper})};var t})))},N=(e,t,r)=>{const{action:i,icon:n}=M(e,t,r);return{actionComponent:i,iconComponent:(0,o.pipe)(n,d.fold((()=>e.renderOptions.cardVisualMode.view(g.j.CardVisualMode.match({onRegular:()=>d.none,onContrast:()=>d.fromNullable(k(e.activeAlert.lensType,r.lensLogo))}))),(e=>x.h.create(d.some(e)))))}},L=e=>e?f.b.MiniContrast:f.b.Mini,D=e=>[y.y.getDotStyle(e),v.FW.cta],F=()=>{const e=a.useContext(u.m.Context);return a.createElement(p.C.Regular,{className:v.FW.newLabel},e.new)},P=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.a11yContrast),R=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.sduiContainerStyle);var O;!function(e){e.Bundle=({card:e,actions:t})=>{const[r]=D(e.activeAlert),c=(0,o.pipe)(e.renderOptions,P,L);return a.createElement(c,(0,n._)((0,i._)({},(0,s.Sh)(v.l$.wrapper,v.l$.bundleContainer,v.l$.dot,r)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,counter:a.createElement(m.CL,{className:v.l$.alertsCounter},e.alerts.length),sduiStyle:R(e.renderOptions)}),a.createElement(l.F.div,(0,s.Sh)(v.l$.miniContainer),a.createElement("div",{className:v.l$.highlightedText},h.R.bundleTitle(e))))},e.Standard=({card:e,actions:t})=>{const r=a.useContext(u.m.Context),[p,m]=D(e.activeAlert),h=(0,o.pipe)(e.renderOptions,P,L),{actionComponent:g,iconComponent:f}=N(e,r,{wrapper:(0,s.Sh)(m,v.FW.ctaText).className,voxLogo:(0,s.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,voxLabel:v.FW.cta,emojiLogo:(0,s.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,lensLogo:(0,s.Sh)(v.FW.cardLogo,v.l$.cardLogo,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconStandard,freePremiumIcon:(0,s.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.l$.cardLogo).className});return a.createElement(h,(0,n._)((0,i._)({},(0,s.Sh)(v.l$.wrapper,f.view((e=>d.isSome(e)?v.l$.invisibleDot:v.l$.dot)),p)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:R(e.renderOptions)}),a.createElement(l.F.div,(0,s.Sh)(v.l$.miniContainer),(0,o.pipe)(f.view(d.toNullable)),a.createElement("div",{className:v.l$.highlightedText},e.activeAlert.highlightTexts[0]),a.createElement("div",{className:v.l$.middleDot},""),g,(0,o.pipe)(e.renderOptions.isNew,c.U((e=>d.isSome(e)?a.createElement(F,{key:"new-label"}):null)))))},e.TwoLined=({card:e,actions:t})=>{const r=a.useContext(u.m.Context),[c,p]=D(e.activeAlert),m=(0,o.pipe)(e.renderOptions,P,L),{actionComponent:h,iconComponent:g}=N(e,r,{wrapper:(0,s.Sh)(p,v.FW.ctaText,v.nu.ctaText,v.nu.subTitle).className,voxLogo:(0,s.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,voxLabel:(0,s.Sh)(v.FW.cta,v.nu.subTitle).className,emojiLogo:(0,s.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,lensLogo:(0,s.Sh)(v.FW.cardLogo,v.nu.lensIcon,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconMini,freePremiumIcon:(0,s.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.nu.cardLogo).className});return a.createElement(m,(0,n._)((0,i._)({},(0,s.Sh)(v.nu.wrapper,g.view((e=>d.isSome(e)?v.nu.invisibleDot:v.nu.dot)),c)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:R(e.renderOptions)}),a.createElement(l.F.div,(0,s.Sh)(v.nu.miniContainer),h,(0,o.pipe)(g.view(d.toNullable)),a.createElement("div",{className:v.Es},e.activeAlert.highlightTexts[0])))}}(O||(O={}))},32941:(e,t,r)=>{r.d(t,{Es:()=>p,FW:()=>P,l$:()=>k,nu:()=>x});var i=r(50858),n=r(55818),a=r(44060),o=r(89894),s=r(24588),l=r(40219);const c="0 1px 8px rgba(109, 117, 141, .18)",d={$nest:{"&:before":{top:o.ux.rem(.85),left:0}}},u="miniTwoLinedHighlightedText",p=o.ux.joinClasses([u,o.ux.style({overflow:"hidden",marginTop:o.ux.rem(-.25),color:a.Il.CoreNeutral90,textOverflow:"ellipsis"})]),m={height:o.ux.rem(3.25),borderRadius:o.ux.rem(l.Jr),boxShadow:c,$nest:{"&:hover":{boxShadow:c},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},h={top:o.ux.rem(.7)},g={top:o.ux.rem(.1)},f={fontWeight:o.ux.important(400),fontSize:o.ux.rem(.75)},y={position:"absolute",left:o.ux.rem(.5),minWidth:"initial",minHeight:"initial",background:a.Il.CoreNeutral0},v=(0,n._)((0,i._)({},y),{top:o.ux.rem(.6)}),x=o.ux.stylesheet({dot:[d],invisibleDot:[d,{$nest:{"&:before":{visibility:"hidden"}}}],wrapper:[m],miniContainer:[{flexDirection:"column"}],cardLogo:[h],lensIcon:[g],subTitle:[f],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[v],takeawayIconStandard:[y]}),b={height:o.ux.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},C={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0}}},I={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0,visibility:"hidden"}}},S={height:o.ux.important(o.ux.rem(2.5)),borderRadius:o.ux.rem(l.Jr)},w={color:a.Il.CoreNeutral50,display:"flex",width:o.ux.rem(2),height:o.ux.percent(100),justifyContent:"center",alignItems:"center"},A={overflow:"hidden",color:a.Il.CoreNeutral90,textOverflow:"ellipsis"},E={display:"inline-block",padding:`0 ${o.ux.rem(.5)}`},_={top:0,bottom:0,left:o.ux.rem(.5),margin:"auto"},k=o.ux.stylesheet({wrapper:[b],dot:[C],invisibleDot:[C,I],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[S],alertsCounter:[w],highlightedText:[A],middleDot:[E],cardLogo:[_]}),T={color:a.Il.CoreNeutral50,fontWeight:300},M={position:"absolute",left:o.ux.rem(.5),width:o.ux.rem(1),height:o.ux.rem(1),background:s.Zn},N={left:o.ux.rem(0)},L={marginLeft:o.ux.rem(.5)},D={marginLeft:o.ux.rem(-.5)},F={minHeight:"auto",left:o.ux.rem(.4)},P=o.ux.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[T],cardLogo:[M],lensIcon:[D],outcomesCardLogo:[M,N],newLabel:[L],diamondIcon:[F]})},11662:(e,t,r)=>{r.d(t,{Px:()=>qe,n4:()=>Qe,$s:()=>Ke,zO:()=>rt,RF:()=>at});var i=r(50858),n=r(55818),a=r(27378),o=r(57050),s=r(40327),l=r(54001),c=r(23239),d=r(8543),u=r(18208),p=r(55415),m=r(22232),h=r(8125),g=r(5114),f=r(50474),y=r(64757),v=r(86732),x=r(26215),b=r(4870),C=r(66672),I=r(3656),S=r(51006),w=r(19751),A=r(98637),E=r(4890),_=r(22391),k=r(91463),T=r(17138),M=r(55162),N=r(94632),L=r(44060),D=r(89894),F=r(94048),P=r(40219);const R=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:D.ux.rem(.5*e)}}}),O=(e,t,r,i)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:i,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${r}) '. '`}}}}}),B=e=>[O(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),O(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),O(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),O(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),O(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),O(e,5,"lower-roman","card-list6 card-list7 card-list8"),O(e,6,"decimal","card-list7 card-list8"),O(e,7,"lower-alpha","card-list8"),O(e,8,"lower-roman","none")],$="cards-replacements_labels-",U={list:`${$}list`,item:`${$}item`,diff:`${$}diff`,columnList:`${$}columnList`,itemInsert:`${$}itemInsert`,deleteAll:`${$}deleteAll`,crossed:`${$}crossed`,deleteQuote:`${$}deleteQuote`,deletePunctuation:`${$}deletePunctuation`,deleteDoubleComma:`${$}deleteDoubleComma`,deleteApostrophe:`${$}deleteApostrophe`,deleteLetter:`${$}deleteLetter`,deletePunctuationBeforeLetter:`${$}deletePunctuationBeforeLetter`,itemOriginal:`${$}itemOriginal`,itemOriginalStrikeThrough:`${$}itemOriginalStrikeThrough`,itemOriginalContent:`${$}itemOriginalContent`,spacesOnlyContent:`${$}spacesOnlyContent`,removeOrContainer:`${$}removeOrContainer`,itemContext:`${$}itemContext`,itemContextShifted:`${$}itemContextShifted`,or:`${$}or`,arrowInsertsList:`${$}arrowInsertsList`,cozyArrowInsertsList:`${$}cozyArrowInsertsList`,inlineHeader:`${$}inlineHeader`,fullSentenceBackground:`${$}fullSentenceBackground`,minimalFullSentenceBackground:`${$}minimalFullSentenceBackground`,fullSentenceDelete:`${$}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${$}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${$}fullSentenceHidden`,fullSentenceListItem:`${$}fullSentenceListItem`,fullSentenceBulletListItem:`${$}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${$}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${$}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:$+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:$+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:$+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${$}fullSentenceInsert`,fullSentenceInsertPunctuation:`${$}fullSentenceInsertPunctuation`,toneAIInsert:`${$}toneAIInsert`,itemRemove:`${$}itemRemove`,oneGapInsert:`${$}oneGapInsert`,oneGapInput:`${$}oneGapInput`,drilldownInsertGroup:`${$}drilldownInsertGroup`,drilldownArrowButton:`${$}drilldownArrowButton`,drilldownIcon:`${$}drilldownIcon`,drilldownOriginalRow:`${$}drilldownOriginalRow`,drilldownBackButton:`${$}drilldownBackButton`,collapsibleDelete:`${$}collapsibleDelete`,collapsibleInsert:`${$}collapsibleInsert`,collapsiblePartContent:`${$}collapsiblePartContent`},W={position:"relative",overflow:"hidden",margin:`0 ${D.ux.rem(.5)} ${D.ux.rem(.5)} 0`,padding:`${D.ux.rem(.25)} ${D.ux.rem(.5)}`,borderRadius:D.ux.rem(P.fx),color:L.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:D.ux.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},z={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:D.ux.rem(.3125),width:"1px",height:"120%",background:L.Il.CoreNeutral0,content:"''",opacity:.8}}},G={position:"relative",marginRight:D.ux.rem(.5),whiteSpace:"nowrap"},j=e=>({overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${D.ux.rem(1)} 0`,padding:e?0:D.ux.rem(.5),maxHeight:D.ux.rem(12),borderRadius:D.ux.rem(P.fx),background:e?L.Il.CoreNeutral0:L.Il.CoreNeutral10,color:L.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${P.g_}, ${P.xL}`}),H={position:"relative",marginRight:D.ux.rem(.5),maxWidth:`calc(100% - ${D.ux.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:D.ux.rem(.5),color:L.Il.CoreNeutral50,content:"''",verticalAlign:"middle"}}},Y={textDecoration:"line-through",color:L.Il.CoreRed40,textDecorationLine:"line-through"},V=[R(0),R(1),R(2),R(3),R(4),R(5),R(6),R(7),R(8)],Z={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${P.g_}, ${P.xL}`},J=e=>({display:"inline-block",background:e?T.I.Background.Brand.Default:L.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:e?M.Blue80:L.Il.CoreGreen50},"&[data-disabled='true']":{background:e?T.I.Background.Brand.Default:L.Il.CoreGreen40,opacity:.4}}}),Q={$nest:{"&:after":{transform:"rotate(-25deg)"}}},q={paddingRight:D.ux.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},X=e=>({color:e?T.I.Background.Brand.Default:L.Il.CoreGreen60,fontWeight:600}),K={paddingRight:D.ux.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},ee={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},te={display:"flex",flexBasis:"100%"},re={margin:`0 ${D.ux.rem(.5)} ${D.ux.rem(.5)} 2px`,color:L.Il.CoreNeutral60},ie={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},ne={marginBottom:D.ux.rem(.25),color:L.Il.CoreNeutral60,fontWeight:400,fontSize:D.ux.rem(.8),lineHeight:D.ux.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ae={color:T.I.Background.Critical.Default,textDecoration:"line-through",fontWeight:600},oe=(0,n._)((0,i._)({},ae),{textDecoration:"none"}),se={fontWeight:"bold",color:L.Il.CorePurple50},le={background:T.I.Background.Critical.Default,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:M.Red80}}},ce={$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}},de={$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}},ue={width:"100%",marginTop:D.ux.rem(.5),marginBottom:D.ux.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:L.Il.CoreNeutral40}}},pe={marginTop:D.ux.rem(.5),lineHeight:`calc(${D.ux.rem(2)} - ${D.ux.px(2)})`,padding:`0 ${D.ux.rem(.5)}`,border:D.ux.important(`${D.ux.px(1)} solid ${L.Il.CoreNeutral50}`),color:L.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:D.ux.important(L.Il.CoreNeutral20)}}},me=F.E.style(W,J(!1)),he={margin:`0 ${D.ux.rem(.5)} ${D.ux.rem(.5)} 0`,$nest:{[`& .${U.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${U.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${U.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},ge={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:D.ux.rem(.1875),paddingRight:D.ux.rem(.3125)},fe={width:D.ux.rem(1),height:D.ux.rem(1),minWidth:D.ux.rem(1),minHeight:D.ux.rem(1),verticalAlign:"top",marginTop:D.ux.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:D.ux.important("white")}}},ye={width:D.ux.percent(100),marginBottom:D.ux.rem(.5),display:"flex",$nest:{"& > *":{marginRight:D.ux.rem(.5)}}},ve={background:L.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:L.Il.CoreNeutral10}}},xe={display:"inline-block",width:D.ux.rem(1),lineHeight:D.ux.rem(.625),height:D.ux.rem(.625),margin:`0 ${D.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:D.ux.rem(P.mA)},be={lineHeight:D.ux.rem(.2),verticalAlign:"super",marginLeft:"1px"},Ce=(0,n._)((0,i._)({},xe),{backgroundColor:L.Il.CoreRed10}),Ie=(0,n._)((0,i._)({},xe),{backgroundColor:L.Il.CoreGreen10}),Se={list:D.ux.joinClasses([U.list,D.ux.style(Z),F.E.style(Z)]),item:D.ux.joinClasses([U.item,D.ux.style(W),F.E.style(W)]),itemInsert:D.ux.joinClasses([U.itemInsert,D.ux.style(W,J(!1)),me]),deleteAll:D.ux.joinClasses([U.deleteAll,D.ux.style({textDecoration:"line-through"}),F.E.style({textDecoration:"line-through"})]),crossed:D.ux.joinClasses([U.crossed,D.ux.style(z)]),deleteQuote:D.ux.joinClasses([U.deleteQuote,D.ux.style(z,Q),F.E.style(z,Q)]),deletePunctuation:D.ux.joinClasses([U.deletePunctuation,D.ux.style(z,q),F.E.style(z,q)]),deleteDoubleComma:D.ux.joinClasses([U.deleteDoubleComma,D.ux.style({textDecoration:"line-through"}),F.E.style({textDecoration:"line-through"})]),deleteApostrophe:D.ux.joinClasses([U.deleteApostrophe,D.ux.style(z,K),F.E.style(z,K)]),deleteLetter:D.ux.joinClasses([U.deleteLetter,D.ux.style(ee),F.E.style(ee)]),deletePunctuationBeforeLetter:D.ux.joinClasses([U.deletePunctuationBeforeLetter,D.ux.style({textDecoration:"line-through"}),F.E.style({textDecoration:"line-through"})]),itemOriginal:D.ux.joinClasses([U.itemOriginal,D.ux.style(H),F.E.style(H)]),itemOriginalStrikeThrough:D.ux.joinClasses([U.itemOriginalStrikeThrough,D.ux.style(Y),F.E.style(Y)]),itemOriginalContent:D.ux.joinClasses([U.itemOriginalContent,D.ux.style({color:L.Il.CoreNeutral90}),F.E.style({color:L.Il.CoreNeutral90})]),spacesOnlyContent:D.ux.joinClasses([U.spacesOnlyContent,D.ux.style({whiteSpace:"pre"})]),removeOrContainer:D.ux.joinClasses([U.removeOrContainer,D.ux.style(te),F.E.style(te)]),itemContext:D.ux.joinClasses([U.itemContext,D.ux.style(G)]),itemContextShifted:D.ux.joinClasses([U.itemContextShifted,D.ux.style(G,{marginRight:"2px"}),F.E.style(G,{marginRight:"2px"})]),or:D.ux.joinClasses([U.or,D.ux.style(re),F.E.style(re)]),arrowInsertsList:D.ux.joinClasses([U.arrowInsertsList,D.ux.style(ie),F.E.style(ie)]),columnList:D.ux.joinClasses([U.columnList,D.ux.style(ie,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),F.E.style(ie)]),cozyArrowInsertsList:D.ux.joinClasses([U.arrowInsertsList,D.ux.style(ie,{flex:2,flexBasis:"0%"}),F.E.style(ie)]),inlineHeader:D.ux.joinClasses([U.inlineHeader,D.ux.style(ne),F.E.style(ne)]),toneAIInsert:D.ux.joinClasses([U.toneAIInsert,D.ux.style(se),F.E.style(se)]),fullSentenceBackground:D.ux.joinClasses([U.fullSentenceBackground,D.ux.style(j(!1)),F.E.style(j(!1))]),minimalFullSentenceBackground:D.ux.joinClasses([U.minimalFullSentenceBackground,D.ux.style(j(!1),{lineHeight:D.ux.rem(1.3125)}),F.E.style(j(!1),{lineHeight:D.ux.rem(1.3125)})]),fullSentenceDelete:D.ux.joinClasses([U.fullSentenceDelete,D.ux.style(ae),F.E.style(ae)]),fullSentenceDeleteCollapsed:D.ux.joinClasses([U.fullSentenceDeleteCollapsed,D.ux.style(oe),F.E.style(oe)]),fullSentenceHidden:D.ux.joinClasses([U.fullSentenceHidden,D.ux.style({display:"none"})]),fullSentenceListItem:D.ux.joinClasses([U.fullSentenceListItem,D.ux.style(...V),F.E.style(...V)]),fullSentenceBulletListItem:D.ux.joinClasses([U.fullSentenceBulletListItem,D.ux.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),F.E.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:D.ux.joinClasses([U.fullSentenceDashedListItem,D.ux.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),F.E.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:D.ux.joinClasses([U.fullSentenceOrderedListItem,D.ux.style(...B(""),...V),F.E.style(...B(""),...V)]),fullSentenceOrderedListItemWithFormatting:D.ux.joinClasses([U.fullSentenceOrderedListItemWithFormatting,D.ux.style(...B(""),...V,X(!1)),F.E.style(...B(""),...V,X(!1))]),fullSentenceBulletListItemWithFormatting:D.ux.joinClasses([U.fullSentenceBulletListItemWithFormatting,D.ux.style(...V,de,X(!1)),F.E.style(...V,de)]),fullSentenceDashedListItemWithFormatting:D.ux.joinClasses([U.fullSentenceDashedListItemWithFormatting,D.ux.style(...V,ce,X(!1)),F.E.style(...V,ce)]),fullSentenceInsert:D.ux.joinClasses([U.fullSentenceInsert,D.ux.style(X(!1))]),fullSentenceInsertPunctuation:D.ux.joinClasses([U.fullSentenceInsertPunctuation,D.ux.style(X(!1))]),diff:D.ux.joinClasses([U.diff,D.ux.style({fontWeight:"bolder"}),F.E.style({fontWeight:"bolder"})]),itemRemove:D.ux.joinClasses([U.itemRemove,D.ux.style(W,le)]),oneGapInsert:D.ux.joinClasses([U.oneGapInsert,D.ux.style(W,J(!1),ue),me]),oneGapInput:D.ux.joinClasses([U.oneGapInput,D.ux.style(pe)]),drilldownInsertGroup:D.ux.joinClasses([U.drilldownInsertGroup,D.ux.style(he)]),drilldownArrowButton:D.ux.joinClasses([U.drilldownArrowButton,D.ux.style(ge)]),drilldownIcon:D.ux.joinClasses([U.drilldownIcon,D.ux.style(fe)]),drilldownOriginalRow:D.ux.joinClasses([U.drilldownOriginalRow,D.ux.style(ye)]),drilldownBackButton:D.ux.joinClasses([U.drilldownBackButton,D.ux.style(ve)]),collapsibleDelete:D.ux.joinClasses([U.collapsibleDelete,D.ux.style(Ce)]),collapsibleInsert:D.ux.joinClasses([U.collapsibleInsert,D.ux.style(Ie)]),collapsiblePartContent:D.ux.joinClasses([U.collapsiblePartContent,D.ux.style(be)])};D.ux.cssRule(`.${U.fullSentenceDelete} + .${U.fullSentenceInsert}`,{marginLeft:D.ux.rem(.25)});const we=(0,n._)((0,i._)({},Se),{itemInsert:D.ux.joinClasses([U.itemInsert,D.ux.style(W,J(!0)),me,N.T$]),oneGapInsert:D.ux.joinClasses([U.oneGapInsert,me,D.ux.style(W,J(!0),ue),N.T$]),fullSentenceOrderedListItemWithFormatting:D.ux.joinClasses([U.fullSentenceOrderedListItemWithFormatting,F.E.style(...B(""),...V,X(!1)),D.ux.style(...B(""),...V,X(!0))]),fullSentenceBulletListItemWithFormatting:D.ux.joinClasses([U.fullSentenceBulletListItemWithFormatting,D.ux.style(...V,de,X(!0)),F.E.style(...V,de)]),fullSentenceDashedListItemWithFormatting:D.ux.joinClasses([U.fullSentenceDashedListItemWithFormatting,D.ux.style(...V,ce,X(!0)),F.E.style(...V,ce)]),fullSentenceInsert:D.ux.joinClasses([U.fullSentenceInsert,D.ux.style(X(!0))]),fullSentenceInsertPunctuation:D.ux.joinClasses([U.fullSentenceInsertPunctuation,D.ux.style(X(!0))]),fullSentenceBackground:D.ux.joinClasses([U.fullSentenceBackground,D.ux.style(j(!0)),F.E.style(j(!1))]),minimalFullSentenceBackground:D.ux.joinClasses([U.minimalFullSentenceBackground,D.ux.style(j(!0),{lineHeight:D.ux.rem(1.3125)}),F.E.style(j(!0),{lineHeight:D.ux.rem(1.3125)})])});var Ae;function Ee(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'.,;:!?\\\/\-()]+$/)}function _e(e,t){if(e===t)return;const r=e.length,i=t.length;if(i>r){if(t.substr(0,r)===e)return{from:r,to:r,oldFragment:"",newFragment:t.substr(r)};if(t.substr(i-r)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,i-r)}}if(i<r){if(e.substr(r-i)===t)return{from:0,to:r-i,oldFragment:e.substr(0,r-i),newFragment:""};if(e.substr(0,i)===t)return{from:i,to:r,oldFragment:e.substr(i),newFragment:""}}const n=i<r?i:r,a=function(e,t,r){let i=0;for(;e[i]===t[i]&&i<r;)i+=1;return i}(e,t,n);let o=function(e,t,r,i,n){let a=0;for(;e[r-a-1]===t[i-a-1]&&n-a>=0;)a+=1;return a}(e,t,r,i,n);return a+o>r&&(o-=a+o-r),a+o>i&&(o-=a+o-i),{from:a,to:r-o,oldFragment:e.substr(a,r-o-a),newFragment:t.substr(a,i-o-a)}}!function(e){e.getClass=function(e,t){return null!==(r=t)&&1===r.length&&/["']/.test(r)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'][.,;]/)}(t)?e.deleteQuote:Ee(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:Boolean(function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t))?e.deletePunctuationBeforeLetter:e.deleteAll;var r}}(Ae||(Ae={}));const ke=e=>e?we:Se,Te=({theme:e,children:t})=>a.createElement(I.Xk,{className:e.list},t),Me=({transform:e,title:t,disabled:r,boldifier:i=Re,classes:n,onClick:o})=>a.createElement(y.zx,{animationMode:v.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:x.X.div,onClick:o,title:t,disabled:r,className:n.itemInsert},e.map(((e,t)=>a.createElement(a.Fragment,{key:t},i(e,n.diff))))),Ne=({transform:e,theme:t,showOnboarding:r,onClick:n,onExpand:o})=>{const s=a.useContext(f.m.Context),c=e.label.map(((e,t)=>a.createElement(a.Fragment,{key:t},e.text))),d=a.createElement(y.zx,(0,i._)({animationMode:v.m.FromClickPoint,name:"expand-insert",onClick:o,title:s.synfony.drilldownTooltip(c)},(0,l.Sh)(t.itemInsert,t.drilldownArrowButton)),a.createElement(b.JO.Arrow,{direction:b.n4.right,className:t.drilldownIcon}));return a.createElement("div",{className:t.drilldownInsertGroup},a.createElement(y.zx,{animationMode:v.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:x.X.div,onClick:n,title:s.synfony.applyTooltip,className:t.itemInsert},c),Boolean(e.subLabels.length)&&(r?a.createElement(Xe,null,d):d))},Le=({transform:e,title:t,theme:r,onClick:i})=>a.createElement(y.zx,{animationMode:v.m.FromClickPoint,name:"apply-remove",role:"deletion",tag:x.X.div,onClick:i,title:t,className:r.itemRemove},e.map(((e,t)=>a.createElement(Be,{key:t,element:e,theme:r})))),De=({transform:e,title:t,theme:r,onClick:i,children:n})=>a.createElement("div",{className:r.removeOrContainer},e.map(((n,o)=>"text"===n.type?a.createElement("span",{key:o,className:o===e.length-1?r.itemContextShifted:r.itemContext},n.text):a.createElement(y.zx,{key:o,animationMode:v.m.FromClickPoint,name:"apply-remove-or",role:"deletion",tag:x.X.div,onClick:i,title:t,className:r.itemRemove},a.createElement(Be,{element:n,theme:r})))),n),Fe=e=>a.createElement("span",{className:e.classes.or},a.useContext(f.m.Context).card.or),Pe=({transform:e,replacements:t,boldifier:r=Re,theme:i,strikeThrough:n=!0})=>{var o;const c=e.every((e=>null===e.text.match(/\n/))),d=_e(e.map((e=>e.text)).join(""),1===t.length?t[0].map((e=>e.text)).join(""):""),p=(0,s.pipe)(null===(o=d)||void 0===o?void 0:o.oldFragment,(e=>Boolean(e)&&u.tj(e))),m=c&&p;return a.createElement("div",(0,l.Sh)(i.itemOriginal,n&&i.itemOriginalStrikeThrough),a.createElement("span",(0,l.Sh)(i.itemOriginalContent,m&&i.spacesOnlyContent),e.map(((e,t)=>a.createElement(a.Fragment,{key:t},r(e,i.diff))))))},Re=p.ei("text"),Oe=({text:e,type:t},r)=>"text"===t?e:a.createElement("span",{className:r},e),Be=({element:e,strikeClass:t,theme:r})=>"delete"===e.type?a.createElement("span",(0,l.Sh)(Ae.getClass(r,e.text),t),e.text):a.createElement(a.Fragment,null,e.text);function $e({labels:e,original:t,onlyReplacements:r},i,n,o,s){const l=1===t.length,[c]=l?[t[0].text,e[0][0].text].map((e=>(t,r)=>i=>a.createElement(Je,{index:r,oldText:t,newText:i.text,theme:e}))(o)):[Oe,Oe];return a.createElement(Te,{theme:o},!r&&a.createElement(Pe,{transform:t,theme:o,replacements:e}),a.createElement("div",{className:n===E.j.Density.cozy?o.cozyArrowInsertsList:e.length>2?o.columnList:o.arrowInsertsList},e.map(((e,t)=>a.createElement(Me,{key:t,title:i,onClick:s(t),transform:e,boldifier:c,classes:o})))))}const Ue=/^\W/,We=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceDelete;case A.GP.Insert:return Ue.test(e.text)?t.fullSentenceInsertPunctuation:t.fullSentenceInsert;case A.GP.Text:case A.GP.List:return"";default:return(0,m.vE)(e)}},ze=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:case A.GP.Text:case A.GP.Insert:return"";default:return(0,m.vE)(e)}},Ge=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?t.fullSentenceDashedListItemWithFormatting:t.fullSentenceOrderedListItemWithFormatting;case A.GP.Insert:case A.GP.Text:return"";default:return(0,m.vE)(e)}},je=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItem:"dashed"===e.kind?t.fullSentenceDashedListItem:t.fullSentenceOrderedListItem;case A.GP.Insert:case A.GP.Text:return"";default:return(0,m.vE)(e)}},He=({p:e,theme:t})=>{const r=c.h.create(e.shouldBeCollapsed);return a.createElement(d.F.Fragment,null,r.view((0,h.RN)(a.createElement("span",{className:e.type===A.GP.Delete?t.collapsibleDelete:t.collapsibleInsert,onClick:()=>r.set(!1),role:"button",tabIndex:0},a.createElement("span",{className:t.collapsiblePartContent},"")),a.createElement(a.Fragment,null,e.text))))},Ye=(e,t,r)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case A.GP.Insert:case A.GP.Delete:return t?a.createElement(He,{p:e,theme:r}):e.text;case A.GP.Text:return a.createElement("span",null,"  ");default:(0,m.vE)(e)}},Ve=e=>{const t=(0,s.pipe)(e.showDiff,(0,h.RN)(We,ze),(t=>t(e.transformPart,e.theme)));return a.createElement("span",{className:t},Ye(e.transformPart,e.showDiff,e.theme))},Ze=e=>{const t=(0,s.pipe)(e.showDiff,(0,h.RN)(Ge,je),(t=>t(e.transformPart,e.theme)));return e.transformPart.type===A.GP.List?a.createElement("span",{className:t,"data-indent":e.transformPart.indent}):a.createElement("span",{className:t},Ye(e.transformPart,e.showDiff,e.theme))},Je=({index:e=0,oldText:t,theme:r,newText:i})=>{const n=function(e,t){if(e.length<=4)return null;const r=_e(e,t);if(void 0===r)return null;const{from:i,to:n,oldFragment:a,newFragment:o}=r,s=1===o.length&&i>0&&e[i-1]===o,l=1===a.length&&0===o.length&&t[i-1]===a;let c=i,d=o;return(s||l)&&(c=i-1),s&&(d=o+o),l&&(d=a),d.length>3?null:[e.substring(0,c),d,e.substring(n)]}(t,i),o=!!n&&u.tj(n[1]);return a.createElement(a.Fragment,null,n?[n[0],a.createElement("span",{key:e,className:o?r.spacesOnlyContent:r.diff},n[1]),n[2]]:i)},Qe=e=>{const{onMount:t,maxHeight:r}=(0,_.N)(),i=ke(e.a11yContrast);return a.createElement(I.XY,{mount:t,style:{maxHeight:r.pipe(w.map(g.getOrElse(o.r5)))},tabIndex:0,className:(0,s.pipe)(e.layoutDensity,E.j.Density.matchOrDefault(E.j.Density.minimal)((()=>i.minimalFullSentenceBackground),(()=>i.fullSentenceBackground)))},e.replacements.kind===A._k.WithFormatting?e.replacements.labels.map(((t,r)=>a.createElement(Ze,{showDiff:e.showDiff,transformPart:t,key:r,theme:i}))):e.replacements.labels.map(((t,r)=>a.createElement(Ve,{showDiff:e.showDiff,transformPart:t,key:r,theme:i}))))},qe=({replacements:e,layoutDensity:t,a11yContrast:r,selection:i,onClick:n,onDive:o,onBack:s})=>{const l=a.useContext(f.m.Context),{activeLabels:c,original:d}=A.ey.getSelectedItems(e,i),u=ke(r);return a.createElement(Te,{theme:u},a.createElement("div",{className:u.drilldownOriginalRow},i.length>0&&a.createElement(y.zx.Ghost,{name:"go-back",title:l.synfony.back,onClick:s,className:u.drilldownBackButton},a.createElement(b.JO.Arrow,{direction:b.n4.left})),a.createElement(Pe,{transform:d,theme:u,replacements:[],strikeThrough:!Boolean(i)||0===i.length})),a.createElement("div",{className:t===E.j.Density.cozy?u.cozyArrowInsertsList:u.arrowInsertsList},c.map(((e,t)=>a.createElement(Ne,{key:t,transform:e,showOnboarding:2===t,theme:u,onClick:n(e.alternativeId),onExpand:()=>o(t,e.alternativeId)})))))},Xe=e=>{const t=a.useContext(f.m.Context);return a.createElement(k.TG,{alignment:"topLeft",eventType:"onclick",stepId:S.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:k.E2.rightCenter}},e.children)},Ke=e=>{const t=a.useContext(f.m.Context).card,r=""===e.gapValue,i=ke(e.a11yContrast);return a.createElement(a.Fragment,null,a.createElement(C.B2,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:i.oneGapInput}),a.createElement(Me,{title:r?"":t.todoAction(e.replacements.tooltipText),boldifier:Oe,onClick:e.onApply,classes:{itemInsert:i.oneGapInsert,inlineHeader:i.inlineHeader,diff:i.diff},disabled:r,transform:et(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},et=(e,t,r)=>[...e,{type:A.GP.Insert,text:tt(e)+(t||"")+tt(r),shouldBeCollapsed:!1},...r],tt=e=>e.length?" ":"",rt=({replacementsLabels:e,layoutDensity:t,a11yContrast:r,onClick:i})=>{const n=a.useContext(f.m.Context).card.todoAction(e.tooltipText),o=ke(r);switch(e.type){case A.b$.Type.InsertList:return a.createElement(Te,{theme:o},e.labels.map(((e,t)=>a.createElement(Me,{key:t,title:n,onClick:i(t),transform:e,classes:o}))));case A.b$.Type.DeleteList:return a.createElement(Te,{theme:o},e.labels.map(((e,t)=>a.createElement(Le,{key:t,title:n,onClick:i(t),transform:e,theme:o}))));case A.b$.Type.Arrow:return $e(e,n,t,o,i);case A.b$.Type.InsertOr:return a.createElement(Te,{theme:o},a.createElement(Me,{transform:e.labels[0],title:n,onClick:i(0),boldifier:Oe,classes:o}),a.createElement(Fe,{classes:o}),a.createElement(Me,{transform:e.labels[1],title:n,onClick:i(1),boldifier:Oe,classes:o}));case A.b$.Type.DeleteOr:return a.createElement(Te,{theme:o},e.labels.map(((t,r)=>a.createElement(De,{key:r,title:n,onClick:i(r),theme:o,transform:t},r===e.labels.length-2&&a.createElement(Fe,{classes:o})))));case A.b$.Type.Citation:case A.b$.Type.FullSentence:case A.b$.Type.OneGap:case A.b$.Type.Drilldown:case A.b$.Type.ShortenIt:case A.b$.Type.ToneAI:case A.b$.Type.WritingExpert:return null;default:return(0,m.vE)(e)}},it=({label:e,a11yContrast:t})=>{const r=e.findIndex((e=>e.type===A.GP.Delete));let o=e.reduce(((e,t)=>e=e.concat(t.text.split(" ").map((e=>({word:e,isDelete:t.type===A.GP.Delete,shouldHighlight:!1}))))),[]).filter((e=>""!==e.word));return o=0===r?o.filter((e=>!e.isDelete)).map(((e,t)=>{let r=!1;return t-2<0&&(r=!0),(0,n._)((0,i._)({},e),{shouldHighlight:r})})):r===e.length-1?o.filter((e=>!e.isDelete)).map(((e,t,r)=>{let a=!1;return t+2>=r.length&&(a=!0),(0,n._)((0,i._)({},e),{shouldHighlight:a})})):o.map(((e,t,r)=>{let a=!1;return(void 0!==r[t+1]&&r[t+1].isDelete||void 0!==r[t-1]&&r[t-1].isDelete)&&(a=!0),(0,n._)((0,i._)({},e),{shouldHighlight:a})})).filter((e=>!e.isDelete)),a.createElement(a.Fragment,null,o.map(((e,r,i)=>a.createElement("span",{key:`${e.word}-${r}`,className:e.shouldHighlight?ke(t).toneAIInsert:void 0},e.word,void 0===i[r+1]||Ee(i[r+1].word)?"":" "))))},nt=({label:e,a11yContrast:t})=>a.createElement(a.Fragment,null,e.filter((e=>e.type!==A.GP.Delete)).map((e=>a.createElement("span",{key:e.text,className:e.type===A.GP.Insert?ke(t).toneAIInsert:void 0},e.text)))),at=({label:e,className:t,a11yContrast:r})=>{let i;return i=!e.some((e=>e.type===A.GP.Insert))?a.createElement(it,{label:e,a11yContrast:r}):a.createElement(nt,{label:e,a11yContrast:r}),a.createElement("div",{className:t},i)}},19025:(e,t,r)=>{r.d(t,{Gh:()=>m,f8:()=>p});var i=r(50858),n=r(55818),a=r(40327),o=r(44060),s=r(89894),l=r(40219),c=r(4890),d=r(50224),u=r(52187);const p=e=>({container:(0,a.pipe)(e,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>x.cozyCardContainer),(()=>x.compactCardContainer)))}),m=e=>(0,n._)((0,i._)({},e.hasOwnProperty("features")&&e.features.has(c.j.Features.a11yContrast)?(e=>({container:(0,a.pipe)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>e.features.has(c.j.Features.sduiContainerStyle)?x.cozyCardContainerContrastSdui:x.cozyCardContainerContrast),(()=>x.compactCardContainer)))}))(e):p(e.layoutDensity)),{wrapper:(0,a.pipe)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.minimal)((()=>x.minimalCardWrapper),(()=>{})))}),h={padding:`${s.ux.rem(.75)} ${s.ux.rem(.5)} ${s.ux.rem(.5)} ${s.ux.rem(1)}`},g={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:`0 ${s.ux.rem(.625)} ${s.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},f={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:u.S.z300},y={boxShadow:u.s.llamaShadowToken},v={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0},x=(0,n._)((0,i._)({},s.ux.stylesheet({minimalCardWrapper:[h],compactCardContainer:[v]})),{cozyCardContainer:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(g)]),cozyCardContainerContrast:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f)]),cozyCardContainerContrastSdui:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f),s.ux.style(y)])})},93462:(e,t,r)=>{r.d(t,{T:()=>i});var i,n=r(50858),a=r(55818),o=r(27378),s=r(54001),l=r(8543),c=r(23239),d=r(2834),u=r(18208),p=r(44060),m=r(50474),h=r(64757),g=r(48911),f=r(4870),y=r(89894),v=r(40219),x=r(90845),b=r(66268),C=r(54290),I=r(52575);!function(e){e.Mini=({card:e,actions:t,twoLined:r,useBundleContainer:i})=>o.createElement(C.b.Mini,(0,a._)((0,n._)({},(0,s.Sh)(!0===r?k.twoLinedWrapper:k.standardWrapper,!0===i?k.bundleContainer:null)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,hideDot:!0}),o.createElement(l.F.div,{className:k.content},void 0!==e.activeAlert.emojiID?o.createElement(g.In,{id:e.activeAlert.emojiID,className:k.icon}):o.createElement(f.JO.EthicalAI.Heart,{className:k.icon}),o.createElement("div",{className:k.highlightedText},e.activeAlert.miniCardTitle))),e.Full=({card:e,actions:t,isChecking:r})=>{const i=o.useContext(m.m.Context),n=c.h.create(!1);return x.P.useSubscriptionTo(r.pipe(d.b((e=>n.set(e))))),o.createElement(I.eb,{card:e,actions:t,isChecking:r,body:o.createElement(o.Fragment,null,o.createElement(I.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(I.Dx,{text:e.activeAlert.title}),void 0!==e.activeAlert.bannerColors?o.createElement("div",null,e.activeAlert.bannerColors.map((e=>o.createElement("div",{className:D.bannerStripe,style:{backgroundColor:e}})))):null,o.createElement(I.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),footer:o.createElement(o.Fragment,null,o.createElement(I.lJ,{card:e}),o.createElement(h.zx.Primary,{key:"ethical-ai-external-link",name:"ethical-ai-external-link",href:e.activeAlert.externalLink,target:"_blank",rel:"noopener noreferrer",title:i.card.todoAction(e.activeAlert.todoAction),onClick:()=>{t.next({type:b.lY.Type.ethicalAIOpenExternalLink,alertId:e.activeAlert.id,itemId:e.id,externalLink:e.activeAlert.externalLink}),e.activeAlert.shouldDismissAfterOpeningLink&&t.next({type:b.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},className:D.externalLinkButton},o.createElement("div",{className:D.externalLinkButtonContent},u.kC(e.activeAlert.todoAction),o.createElement(f.JO.EthicalAI.ExternalLink,{className:D.externalLinkButtonContentIcon})))),alwaysShowWrongAndOffensiveButtons:e.activeAlert.isFlaggable})}}(i||(i={}));const S={height:y.ux.rem(3.25),borderRadius:y.ux.rem(v.Jr),boxShadow:"0 1px 8px rgba(109, 117, 141, .18)"},w={height:y.ux.rem(3)},A={height:y.ux.important(y.ux.rem(2.5)),borderRadius:y.ux.rem(v.Jr)},E={width:y.ux.rem(1),height:y.ux.rem(1),marginRight:y.ux.rem(.5)},_={overflow:"hidden",color:p.Il.CoreNeutral90,textOverflow:"ellipsis"},k=y.ux.stylesheet({twoLinedWrapper:[S],standardWrapper:[w],bundleContainer:[A],content:[{display:"flex",alignItems:"center"}],icon:[E],highlightedText:[_]}),T={width:y.ux.percent(100),$nest:{a:{color:p.Il.CoreNeutral0,textDecoration:"none"}}},M={width:y.ux.percent(100),position:"relative",textAlign:"center"},N={position:"absolute",top:y.ux.rem(.25),right:y.ux.rem(.25)},L={width:y.ux.percent(100),height:y.ux.rem(.5)},D=y.ux.stylesheet({externalLinkButton:[T],externalLinkButtonContent:[M],externalLinkButtonContentIcon:[N],bannerStripe:[L]})},88529:(e,t,r)=>{r.d(t,{A:()=>Ne});var i=r(27378),n=r(57050),a=r(40327),o=r(8543),s=r(19751),l=r(26027),c=r(77610),d=r(4890),u=r(54290),p=r(50858),m=r(55818),h=r(23239),g=r(99652),f=r(1509),y=r(5114),v=r(8125),x=r(22232),b=r(42040),C=r(50474),I=r(64757),S=r(4870),w=r(66672),A=r(3656),E=r(74660),_=r(28706),k=r(17594),T=r(66268),M=r(1883),N=r(44060),L=r(89894);const D=L.ux.style({margin:`${L.ux.rem(1)} 0`}),F=(L.ux.style({marginLeft:L.ux.rem(.5),lineHeight:L.ux.rem(1.3125),fontSize:L.ux.rem(.875),color:N.Il.CoreNeutral90}),L.ux.style({marginLeft:L.ux.rem(1)})),P={color:N.Il.CoreRed60,fontSize:L.ux.rem(.75),lineHeight:L.ux.rem(1.125)},R=L.ux.style(P),O=L.ux.style(P,{visibility:"hidden"}),B=L.ux.style({padding:0}),$=L.ux.style({paddingTop:L.ux.rem(1),paddingLeft:L.ux.rem(1),paddingRight:L.ux.rem(1),display:"flex"}),U=L.ux.style({minWidth:L.ux.rem(1)}),W=L.ux.style({paddingTop:L.ux.rem(.25),paddingLeft:L.ux.rem(.5)}),z=L.ux.style({paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),marginTop:L.ux.rem(.5)}),G=L.ux.style({display:"flex",alignItems:"center",gap:L.ux.rem(.75),marginTop:L.ux.rem(1)}),j=L.ux.style({flexGrow:1}),H=L.ux.style({marginTop:L.ux.rem(1.5)}),Y=L.ux.style({fontWeight:"bold",paddingBottom:L.ux.rem(.25)}),V=L.ux.style({height:L.ux.rem(2.5),paddingLeft:L.ux.rem(.5)}),Z=L.ux.style({height:L.ux.rem(6),paddingLeft:L.ux.rem(.5)}),J=L.ux.style({paddingTop:L.ux.rem(1.5),color:N.Il.CoreNeutral50}),Q=L.ux.style({display:"flex",flexDirection:"row",columnGap:L.ux.rem(.5),alignItems:"center",paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),paddingBottom:L.ux.rem(.5)}),q=L.ux.style({flex:3,textAlign:"center"}),X=L.ux.style({color:N.Il.CoreNeutral50,border:`1px solid ${N.Il.CoreNeutral20}`,borderRadius:L.ux.rem(.25)});var K=r(19025);const ee=({card:e,actions:t})=>(0,a.pipe)(e.visualState.transition,y.fromPredicate((e=>"feedback_form"===e.type)),y.fold((()=>(b.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(r=>"survey"===r.formType?i.createElement(te,{card:e,data:r,actions:t}):i.createElement(re,{card:e,data:r,actions:t})))),te=({card:e,data:t,actions:r})=>{const n=i.useContext(C.m.Context).card.feedbackForm,a=h.h.create(void 0),s=h.h.create(!1),l=i=>r.next((0,p._)({alertId:e.activeAlert.id,reason:i},t.submitActionType===T.lY.Type.alertApplyFormSubmit?{type:T.lY.Type.alertApplyFormSubmit,alertApplyActionProps:t.alertApplyActionProps}:{type:T.lY.Type.alertIgnoreFormSubmit})),c=`survey-title-${e.id}`;return i.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>r.next({type:T.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,K.Gh)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,i.createElement(A.H4,{id:c,className:D},t.survey.question||n.dismissReason),i.createElement(g.V.Group,{id:`survey-${e.id}`,selectedItemIndex:a,"aria-labelledby":c,items:t.survey.options.map((e=>e.text)),onChange:()=>s.set(!1)})),mainActions:i.createElement(i.Fragment,null),footer:i.createElement(i.Fragment,null,i.createElement(o.F.div,{"aria-hidden":s,className:s.view((0,v.RN)(R,O))},n.error),i.createElement("div",null,i.createElement(I.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const e=a.get();return void 0===e?s.set(!0):_.hz((()=>l(t.survey.options[e].key)))()}},n.submit),i.createElement(I.zx.Ghost,{className:F,name:"skipCardFeedbackForm",onClick:_.hz((()=>l("skipped")))},n.skip))),subActions:i.createElement(i.Fragment,null)})},re=({card:e,data:t,actions:r})=>{const n=ae(e,t),a="background"===t.gbPrompt.promptType&&E.BY.isVox(t.gbPrompt),[o,s]=i.useState("initial"),[l,c]=i.useState(n.source),[d,u]=i.useState(n.target),[h,g]=i.useState(""),y=!("createRule"!==o||l&&d),v=i=>{const n={alertId:e.activeAlert.id,alertApplyActionProps:t.alertApplyActionProps,gbPrompt:t.gbPrompt,patternName:e.activeAlert.patternName,source:l,target:d,description:h};switch(i){case T.lY.Type.gbPromptDismiss:r.next((0,m._)((0,p._)({},n),{type:i,step:o}));break;case T.lY.Type.gbPromptApply:case T.lY.Type.gbPromptCreateRule:r.next((0,m._)((0,p._)({},n),{type:i}));break;default:(0,x.vE)(i)}},b="initial"===o?t.gbPrompt.description:i.createElement(i.Fragment,null,i.createElement("div",{className:G},i.createElement("div",{className:j},i.createElement(f.Z.Base,{className:Y},"Original"),i.createElement(w.B2,{name:"gbprompt-source",className:V,value:l,onChange:e=>c(e.target.value)})),i.createElement(f.Z.Paper,{className:J},""),i.createElement("div",{className:j},i.createElement(f.Z.Base,{className:Y},"Change to"),i.createElement(w.B2,{name:"gbprompt-target",className:V,value:d,onChange:e=>u(e.target.value)}))),i.createElement("div",{className:H},i.createElement(f.Z.Base,{className:Y},"Explanation"),i.createElement(w.E_,{className:Z,value:h,onChange:e=>g(e.target.value),placeholder:"Add it here...",blockExtension:!0})));return i.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>r.next({type:T.lY.Type.gbPromptShow,patternName:e.activeAlert.patternName}),theme:(0,m._)((0,p._)({},(0,K.Gh)(e.renderOptions)),{wrapper:B}),visualState:e.visualState,header:i.createElement("div",{className:$},i.createElement(S.JO.StyleGuide,null),i.createElement(A.H4,{className:W},t.gbPrompt.title)),body:i.createElement("div",{className:z},b),mainActions:i.createElement(i.Fragment,null),footer:i.createElement("div",{className:Q},i.createElement(ie,{step:o,disabled:y,onClick:()=>{"initial"===o&&a?(s("createRule"),v(T.lY.Type.gbPromptCreateRule)):v(T.lY.Type.gbPromptApply)}}),i.createElement(ne,{step:o,onClick:()=>v(T.lY.Type.gbPromptDismiss)})),subActions:i.createElement(i.Fragment,null)})},ie=({step:e,disabled:t,onClick:r})=>{const n=i.useContext(C.m.Context).card.gbPrompt;return"initial"===e?i.createElement(I.zx.Primary,{name:"submitGbPromptFeedbackForm",className:q,disabled:t,onClick:_.hz(r)},i.createElement(S.JO.StyleGuideWhite,{width:18,className:U}),n.addRule):i.createElement(I.zx.Primary,{name:"submitGbPromptFeedbackForm",className:q,disabled:t,onClick:_.hz(r)},n.saveRule)},ne=({step:e,onClick:t})=>{const r=i.useContext(C.m.Context).card.gbPrompt;return"initial"===e?i.createElement(I.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:X,onClick:_.hz(t)},r.dismiss):i.createElement(I.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:X,onClick:_.hz(t)},r.cancelSavingRule)},ae=(e,t)=>{const r=e.activeAlert,i=t.alertApplyActionProps.alternativeIndex;return k.$.isSuper(r)?E.BY.isVox(t.gbPrompt)?oe(r,i):se(r,i):{source:"",target:""}},oe=(e,t)=>{const r=e.labels;return{source:r.filter(((e,r)=>r!==t)).map(le)[0],target:le(r[t])}},se=(e,t)=>({source:"",target:e.labels[t].label}),le=({replacementTexts:e})=>[...e].sort()[0];var ce=r(87684),de=r(76578),ue=r(90845),pe=r(52575);const me=L.ux.style({marginRight:L.ux.rem(-.5),marginTop:L.ux.rem(.5)}),he=L.ux.style({padding:`0 ${L.ux.rem(1.625)} !important`,marginRight:L.ux.rem(.125)}),ge=L.ux.style({marginRight:0}),fe=({card:e,actions:t,showLabel:r=!0})=>{const n=i.useRef(h.h.create(!1));ue.P.useEffectOnWillUnmount((()=>{n.current.get()||(0,a.pipe)(e.muteCategory,y.map((r=>t.next({type:T.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:r.id}))))}));const o=i.useContext(C.m.Context).card.mutedAlertCard;return i.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:T.lY.Type.mutedAlertSuccessShow}),theme:(0,K.Gh)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,r?i.createElement(pe.__,{alert:e.activeAlert,options:e.renderOptions}):null,i.createElement(A.XY,null,o.description((0,a.pipe)(e.muteCategory,y.fold((()=>""),(e=>e.description)))))),mainActions:i.createElement(i.Fragment,null),footer:i.createElement("div",{className:me},i.createElement(I.zx.Primary,{name:"gotIt",className:he,onClick:()=>_.hz((()=>t.next({type:T.lY.Type.switchToNext})))()},o.successButtonLabel),i.createElement(I.zx.Ghost,{name:"turnBackOn",onClick:_.hz((()=>{n.current.set(!0),(0,a.pipe)(e.muteCategory,y.map((r=>t.next({type:T.lY.Type.undoMuteAlertCategory,categoryId:r.id,viewType:e.activeAlert.type,id:e.id}))))}))},o.undoButtonLabel,i.createElement(S.JO.Undo,{color:N.Il.CoreBlue50,className:ge}))),subActions:i.createElement(I.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:T.lY.Type.mutedAlertSuggestionManagementClick})},o.settingsLabel,i.createElement(S.JO.OuterLink,null))})};var ye=r(93462),ve=r(97428),xe=r(66346),be=r(54001);const Ce=({onLeftClick:e,onRightClick:t,currentMatch:r,totalMatch:n,replaceOneMatch:a=!0,disableOnEnd:o=!0,style:s})=>{const l=i.useContext(C.m.Context).card.matchesNavigation;return 0===n?null:1===n&&a?i.createElement("div",(0,be.Sh)(we.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),i.createElement(A.ck,(0,be.Sh)(we.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.numberOfMatches(n))):i.createElement("div",(0,be.Sh)(we.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),i.createElement(I.zx.Ghost,{disabled:o&&0===r,name:"left",title:l.prev,"aria-label":l.prev,onClick:e},i.createElement(S.JO.Arrow,(0,be.Sh)(we.leftButtonIcon,!!Boolean(s.leftButtonIcon)&&s.leftButtonIcon))),i.createElement(A.ck,(0,be.Sh)(we.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.currentMatchPosition(r+1,n)),i.createElement(I.zx.Ghost,{disabled:o&&r===n-1,name:"right",title:l.next,"aria-label":l.next,onClick:t},i.createElement(S.JO.Arrow,(0,be.Sh)(we.rightButtonIcon,!!Boolean(s.rightButtonIcon)&&s.rightButtonIcon))))},Ie={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:L.ux.rem(.25)}}},Se={textTransform:"uppercase",letterSpacing:L.ux.px(.8),lineHeight:L.ux.rem(2)},we=L.ux.stylesheet({matchesRow:[Ie],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[Se]});function Ae(e,t,r){const{activeAlert:i,activeHighlightIndex:n}=t,a=i.getHighlightRanges(),o=(n+("left"===e?a.length-1:1))%a.length;r.next({type:T.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}const Ee=({card:e,actions:t,selectedLabelIndex:r,isChecking:n})=>{const a=i.useContext(C.m.Context),o=h.h.create(!1);return ue.P.useSubscriptionTo(n.pipe(s.tap((e=>o.set(e))))),i.createElement(pe.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:o,onClick:()=>{t.next({type:T.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r.get(),id:e.id,eligibleForSurvey:l.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:l.X.isEligibleForGbPrompt(e),cardType:T.lY.getCardType(e)})}})},_e=({card:e,actions:t})=>i.createElement(Ce,{onLeftClick:()=>Ae("left",e,t),onRightClick:()=>Ae("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var ke=r(78416);const Te=({activeAlert:e,selectedLabelIndex:t,actions:r})=>{const n=i.useContext(C.m.Context);return i.createElement("div",{className:ke.V.optionsContainer},e.labels.map(((a,o)=>i.createElement(i.Fragment,{key:`option-${o}`},i.createElement(g.V.Item,{id:`${e.id}-${o}`,className:ke.V.optionLabel,onChange:()=>{t.set(o),r.next({type:T.lY.Type.alternativeReplacementRadioButtonClick,index:o})},checked:t.view((e=>e===o))},a.label),i.createElement(A.x4,{className:ke.V.optionExample},a.replacementTexts.join("; ")),i.createElement(A.x4,{className:ke.V.optionSecondaryAttribute},n.card.matchesNavigation.numberOfMatches(a.matches))))))},Me=({card:e,actions:t,isChecking:r,isCheckingGlobal:n})=>{const a=h.h.create(0);return i.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:T.lY.Type.alertCardShow,cardType:T.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,p._)({wrapper:(o=e.renderOptions,o.hasOwnProperty("features")&&o.features.has(d.j.Features.sduiContainerStyle)?ke.V.sduiSuperWrapper:ke.V.superWrapper),content:n.pipe(s.map((0,v.RN)(ke.V.loadingWrapperInvisible,ke.V.loadingWrapper)))},(0,K.f8)(e.renderOptions.layoutDensity)),extra:i.createElement(pe.o,{isChecking:n}),body:i.createElement(i.Fragment,null,i.createElement(pe.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(pe.Ot,{alert:e.activeAlert}),i.createElement(pe.ko,{card:e,isChecking:r}),i.createElement(pe.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),i.createElement(Te,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:i.createElement(pe.Kg,{card:e,feedbackActions:t}),footer:i.createElement(i.Fragment,null,i.createElement(pe.lJ,{card:e}),i.createElement(Ee,{selectedLabelIndex:a,card:e,actions:t,isChecking:r})),navigation:i.createElement(_e,{card:e,actions:t}),subActions:i.createElement(xe.Vh,{actions:t,card:e,mode:"mini"})});var o};var Ne;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:r,isCheckingGlobal:a,transform:c}=l.X.useCardStates(e),d=e=>i.createElement(ce.J,{card:e,actions:t,isChecking:r,transform:c,isCheckingGlobal:a});return i.createElement(o.F.Fragment,null,e.pipe(s.distinctUntilChanged(((e,t)=>e.hashCode()===t.hashCode())),s.map((0,n.ls)(l.X.match({super:e=>i.createElement(Me,{card:e,actions:t,isChecking:r,isCheckingGlobal:a}),takeaway:d,synfony:d,shortenIt:d,toneAI:d,ethicalAI:d,suggestedSnippet:d,knowledgeHubSuggestedTerm:d,default:d}),l.X.foldCard))))},e.Mini=({card:e,actions:n})=>i.createElement(o.F.Fragment,null,e.pipe(s.map((e=>d.j.Density.matchL((()=>i.createElement(t,{card:e,actions:n})),(()=>i.createElement(r,{card:e,actions:n})),(()=>i.createElement(r,{card:e,actions:n})))(e.renderOptions.layoutDensity)))));var t=e.MiniSingleLined=({card:e,actions:t})=>{function r(e){return i.createElement(de.P.Standard,{card:e,actions:t})}return(0,a.pipe)(e,l.X.match({super:r,takeaway:r,synfony:r,shortenIt:r,toneAI:r,ethicalAI:function(e){return i.createElement(ye.T.Mini,{card:e,actions:t})},suggestedSnippet:r,knowledgeHubSuggestedTerm:r,default:r}),l.X.foldCard)},r=e.MiniTwoLined=({card:e,actions:t})=>{function r(e){return i.createElement(de.P.TwoLined,{card:e,actions:t})}return(0,a.pipe)(e,l.X.match({super:r,takeaway:r,synfony:r,shortenIt:r,toneAI:r,ethicalAI:function(e){return i.createElement(ye.T.Mini,{card:e,actions:t,twoLined:!0})},suggestedSnippet:r,knowledgeHubSuggestedTerm:r,default:r}),l.X.foldCard)};e.Success=({cardData:e,actions:t,isLastCard:r})=>{function n(){return i.createElement(u.b.Success,{actions:t,isLastCard:r})}return(0,a.pipe)(e,c.i.match({takeaway:n,default:n,synfony:n,super:n,shortenIt:n,toneAI:n,ethicalAI:n,suggestedSnippet:function(e){return i.createElement(ve.w.Success,{card:e,actions:t})},knowledgeHubSuggestedTerm:n}),l.X.foldCard)},e.FeedbackForm=({cardData:e,actions:t})=>{function r(e){return i.createElement(ee,{card:e,actions:t})}return(0,a.pipe)(e,c.i.match({takeaway:r,default:r,synfony:r,super:r,shortenIt:r,toneAI:r,ethicalAI:r,suggestedSnippet:r,knowledgeHubSuggestedTerm:r}),l.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function r(e){return i.createElement(fe,{card:e,actions:t})}return(0,a.pipe)(e,c.i.match({takeaway:r,default:r,synfony:r,super:r,shortenIt:r,toneAI:r,ethicalAI:r,suggestedSnippet:r,knowledgeHubSuggestedTerm:r}),l.X.foldCard)}}(Ne||(Ne={}))},97428:(e,t,r)=>{r.d(t,{w:()=>i});var i,n=r(50858),a=r(55818),o=r(27378),s=r(57050),l=r(23239),c=r(5114),d=r(95195),u=r(44060),p=r(50474),m=r(64757),h=r(4870),g=r(66672),f=r(3656),y=r(89894),v=r(40219),x=r(28706),b=r(90845),C=r(66268),I=r(4557),S=r(66346),w=r(1883),A=r(52575),E=r(19025);!function(e){e.Full=({card:e,actions:r,isChecking:i})=>{const n=o.useContext(p.m.Context),[a,u]=o.useState(""),[m,h]=o.useState(e.activeAlert.snippetText),[y,v]=o.useState(""),[b,w]=o.useState(""),E=(0,s.zG)(e.activeAlert.snippetsTrigger,c.fold((()=>"\\"),s.yR));return o.createElement(A.eb,{card:e,actions:r,isChecking:i,body:o.createElement("div",null,o.createElement(A.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(f.XY,{className:R.subheader},n.card.suggestedSnippet.subheader),o.createElement("div",{className:R.inputContainer},o.createElement(g.B2,{name:"snippet-name",placeholder:n.card.suggestedSnippet.namePlaceholder,value:a,onChange:e=>u(e.target.value),className:R.snippetName}),y.length>0&&o.createElement(f.x4,{className:R.inputError},y)),o.createElement("div",{className:R.inputContainer},o.createElement(g.E_,{blockExtension:!0,name:"snippet-content",placeholder:n.card.suggestedSnippet.textPlaceholder,value:m,onChange:e=>h(e.target.value),className:R.snippetText}),b.length>0&&o.createElement(f.x4,{className:R.inputError},b)),o.createElement(f.x4,{className:R.explanation},n.card.suggestedSnippet.explanation(o.createElement(t,{trigger:E}))),o.createElement(A.Nm,{title:n.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:l.h.create(!1),onClick:x.hz((()=>{(0,s.zG)(I.B.validate(a,m,n.card.suggestedSnippet.validationMessages),d.fold((({nameError:e,contentError:t})=>{(0,s.zG)(e,c.fold((()=>v("")),v)),(0,s.zG)(t,c.fold((()=>w("")),w))}),(()=>{r.next({type:C.lY.Type.createSnippet,id:e.id,alertId:e.activeAlert.id,snippetName:a,snippetText:m}),v(""),w("")})))}))})),footer:o.createElement(S.G3,{key:"card-actions-details",visualState:e.visualState,className:R.more},o.createElement(f.XY,null,n.card.suggestedSnippet.details(o.createElement(o.Fragment,null,E))))})};const t=({trigger:e})=>o.createElement("span",{className:R.snippetsTrigger},e);e.Success=({card:e,actions:t})=>{const r=o.useContext(p.m.Context);return b.P.useEffectOnWillUnmount((()=>{t.next({type:C.lY.Type.suggestedSnippetSuccessDismissed,id:e.id,alertId:e.activeAlert.id})})),o.createElement(w.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:C.lY.Type.mutedAlertSuccessShow}),theme:(0,E.Gh)(e.renderOptions),visualState:e.visualState,body:o.createElement("div",{className:R.successHeader},o.createElement(h.JO.ValidationOk,{className:R.successIcon}),o.createElement(f.x4,null,r.card.suggestedSnippet.successStateTitle)),mainActions:o.createElement(o.Fragment,null),footer:o.createElement(o.Fragment,null),subActions:o.createElement("div",{className:R.successAction},o.createElement(m.zx.Tertiary,{name:"openSnippetsLibrary",onClick:()=>t.next({type:C.lY.Type.snippetsOpenExternalLink,externalLink:e.activeAlert.libLink,alertId:e.activeAlert.id,itemId:e.id})},r.card.suggestedSnippet.libraryLinkCaption,o.createElement(h.JO.OuterLink,null)),o.createElement(m.zx.Ghost,{name:"done",onClick:()=>x.hz((()=>t.next({type:C.lY.Type.switchToNext})))()},r.done))})}}(i||(i={}));const _={paddingTop:y.ux.rem(.75),paddingBottom:y.ux.rem(.5),letterSpacing:u.xv.SubheadingLetterSpacing,fontSize:y.ux.rem(u.xv.SubheadingSize),lineHeight:y.ux.rem(u.xv.SubheadingLineHeight),color:u.xv.SubheadingColor,textTransform:"uppercase"},k={fontFamily:"inherit",boxSizing:"border-box",padding:`${y.ux.rem(.5)}`,fontSize:y.ux.rem(.875)},T=(0,a._)((0,n._)({},k),{height:y.ux.rem(2.5)}),M=(0,a._)((0,n._)({},k),{height:y.ux.rem(8)}),N={marginBottom:y.ux.rem(.5)},L={color:u.Il.CoreRed50},D={display:"block",color:u.Il.CoreNeutral50,marginBottom:y.ux.rem(.75)},F={position:"absolute",left:y.ux.rem(.5),width:y.ux.rem(1),height:y.ux.rem(1),minWidth:y.ux.rem(1),minHeight:y.ux.rem(1)},P={display:"inline-block",width:y.ux.rem(1),height:y.ux.rem(1),backgroundColor:u.Il.CoreBlue1,borderRadius:y.ux.rem(v.fx),textAlign:"center"},R=y.ux.stylesheet({subheader:[_],snippetName:[T],snippetText:[M],explanation:[D],successIcon:[F],successHeader:[{display:"flex",alignItems:"center"}],successAction:[{display:"flex",justifyContent:"space-between",width:"100%"}],inputContainer:[N],inputError:[L],more:[A.IH],snippetsTrigger:[P]})},78416:(e,t,r)=>{r.d(t,{V:()=>w});var i=r(53514),n=r(32096),a=r(44060),o=r(89894),s=r(40219),l=r(52187),c=r(50858);const d=(e,t,r,i,n,s)=>(0,c._)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:o.ux.rem(2),borderRadius:n,backgroundColor:a.Il.CoreNeutral0,boxShadow:i,content:"' '"},Boolean(s)&&"bottom"!==s?{top:r}:{bottom:r}),u=`0 ${o.ux.rem(.25)} ${o.ux.rem(1.625)} 0 rgba(198, 203, 222, .25)`,p={marginRight:o.ux.rem(1),flexShrink:0,maxWidth:o.ux.percent(100)},m={padding:`0 ${o.ux.rem(1)}`},h={padding:`0 ${o.ux.rem(1.9)} 0 ${o.ux.rem(1)}`},g={position:"absolute",top:o.ux.rem(.27),right:o.ux.rem(.5)},f={display:"grid",width:o.ux.percent(100),gridTemplateColumns:"fit-content(60%) auto min-content",columnGap:o.ux.rem(.5),alignItems:"center"},y={minWidth:o.ux.rem(7)},v={marginLeft:o.ux.rem(.5)},x={color:a.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:o.ux.rem(1.5)},b={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic",paddingRight:o.ux.rem(i.F2)},C={$nest:{"&:before":d(o.ux.rem(.5),-10,o.ux.rem(-.5),u,o.ux.rem(s.Jr)),"&:after":d(o.ux.rem(1),-20,o.ux.rem(-1),u,o.ux.rem(s.Jr))}},I={boxShadow:l.s.llamaShadowToken,borderRadius:o.ux.rem(n.Jr)},S={transition:"opacity .2s"},w=o.ux.prefixedStylesheet("super",{updateAllBtnCommon:[p],updateAllBtn:[p,m],updateAllBtnLoading:[p,h],updateBtnSpinner:[g],optionsContainer:[f],optionLabel:[y],optionRadio:[v],optionSecondaryAttribute:[x],optionExample:[x,b],superWrapper:[C],sduiSuperWrapper:[I],loadingWrapper:[S],loadingWrapperInvisible:[S,{opacity:0,pointerEvents:"none"}]})},28748:(e,t,r)=>{r.d(t,{Y:()=>xe});var i=r(50858),n=r(55818),a=r(27378),o=r(57050),s=r(40327),l=r(54001),c=r(8543),d=r(77176),u=r(76974),p=r(5114),m=r(44060),h=r(50474),g=r(48643),f=r(48911),y=r(3656),v=r(89894),x=r(90845),b=r(28706),C=r(98637),I=r(26027),S=r(91549),w=r(66268),A=r(4890),E=r(54290),_=r(52575),k=r(32941),T=r(11662),M=r(32952),N=r(24209),L=r(17343),D=r(93508),F=r(41398),P=r(85985),R=r(60797),O=r(28043),B=r(2834),$=r(2844),U=r(98403);const W=({toneAlternatives:e,onSelectToneAlternative:t})=>{const r=new M.xQ,o=new M.xQ,u=new M.xQ,m=new M.xQ,h=new M.xQ,g=new M.xQ,{ref:y,onMount:b}=x.P.useElWatcher(),C=N.T(h.pipe(L.h(!0)),u.pipe(L.h(!1)),m.pipe(L.h(!1))).pipe(D.O(!1)),I=N.T(h,o).pipe(F.M(C),P.h((([e,t])=>t)),d.U((([e,t])=>e)),F.M(y),d.U((([e,t])=>(0,s.pipe)(t,p.map((e=>e.getBoundingClientRect())),p.bindTo("sliderClientRect"),p.apS("containerMouseEventVal",p.some(e))))),R.oA,d.U((({containerMouseEventVal:e,sliderClientRect:t})=>{const r=t.x,i=t.x+t.width;let n=0;return n=e.clientX<=r?0:e.clientX>=i?100:(e.clientX-r)/(i-r)*100,n}))),S=N.T(I.pipe(O.x()),C.pipe(O.x(),P.h((e=>!e)),F.M(I),d.U((([e,t])=>t)),d.U((e=>e>=50?100:0))),r.pipe(P.h((e=>"ArrowRight"===e.key||"ArrowLeft"===e.key)),B.b((e=>{e.preventDefault(),e.stopPropagation()})),d.U((e=>e.key)),P.h((e=>"ArrowRight"===e||"ArrowLeft"===e)),d.U((e=>"ArrowRight"===e?100:0))),g.pipe(d.U((e=>1===e?100:0)))).pipe(D.O(100)),w=S.pipe(O.x(),d.U((e=>e>=50?1:0))),A=$.aj([w,U.Dx(e)]).pipe(d.U((([e,t])=>t[e])));return x.P.useSubscriptionTo(w.pipe(O.x(),B.b(t))),a.createElement(c.F.div,{className:ve.outerContainer,onKeyDown:e=>r.next(e)},a.createElement(c.F.div,{className:ve.label},A.pipe(d.U((e=>e.name)))),a.createElement(c.F.div,{className:ve.container,onMouseMove:e=>o.next(e),onMouseUp:e=>u.next(e),onMouseLeave:e=>m.next(e)},a.createElement(c.F.div,(0,n._)((0,i._)({},(0,l.Sh)(ve.slider,C.pipe(d.U((e=>e?ve.sliderDragging:null))))),{mount:b}),a.createElement(c.F.div,(0,n._)((0,i._)({},(0,l.Sh)(ve.sliderInner,C.pipe(d.U((e=>e?ve.sliderInnerDragging:null))))),{style:{width:S.pipe(d.U(v.ux.percent))}}),a.createElement(c.F.div,(0,n._)((0,i._)({},(0,l.Sh)(ve.knob,C.pipe(d.U((e=>e?ve.knobDragging:null))))),{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),h.next(e)},tabIndex:0}),A.pipe(d.U((e=>a.createElement(f.In,{id:e.emojiID,className:ve.knobEmoji})))))),$.aj([w,C]).pipe(d.U((([e,t])=>a.createElement(a.Fragment,null,a.createElement("div",(0,l.Sh)(ve.sliderDivisionPoint,ve.sliderDivisionPointLeft)),0===e||t?null:a.createElement(c.F.div,(0,n._)((0,i._)({},(0,l.Sh)(ve.sliderDivisionPointHoverArea,ve.sliderDivisionPointHoverAreaLeft)),{onClick:()=>g.next(0)})),a.createElement("div",(0,l.Sh)(ve.sliderDivisionPoint,ve.sliderDivisionPointRight)),1===e||t?null:a.createElement(c.F.div,(0,n._)((0,i._)({},(0,l.Sh)(ve.sliderDivisionPointHoverArea,ve.sliderDivisionPointHoverAreaRight)),{onClick:()=>g.next(1)})))))))))},z="toneSliderOuterContainer",G="toneSliderLabel",j="toneSliderContainer",H="toneSlider",Y="toneSliderDragging",V="toneSliderSliderDivisionPoint",Z="toneSliderDivisionPointLeft",J="toneSliderDivisionPointRight",Q="toneSliderDivisionPointHoverArea",q="toneSliderDivisionPointHoverAreaLeft",X="toneSliderDivisionPointHoverAreaRight",K="toneSliderInner",ee="toneSliderInnerDragging",te="toneSliderKnob",re="toneSliderKnobDragging",ie="toneSliderKnobEmoji",ne={fontWeight:700,fontSize:v.ux.rem(.875),lineHeight:v.ux.rem(1),width:v.ux.rem(7.5)},ae={width:v.ux.rem(5.375),height:v.ux.rem(1.75),display:"flex",flexDirection:"column",justifyContent:"center"},oe={position:"relative",width:v.ux.percent(100),backgroundColor:m.Il.CoreNeutral40,height:v.ux.rem(.125),borderRadius:v.ux.rem(.375),transition:"all 0.15s ease-in-out",$nest:{"&:hover":{height:v.ux.rem(.5)},[`&:hover .${V}`]:{visibility:"visible"}}},se={height:v.ux.rem(.5),$nest:{[`& .${V}`]:{visibility:"visible"}}},le={position:"absolute",width:v.ux.rem(.25),height:v.ux.rem(.25),backgroundColor:m.Il.CoreNeutral0,top:v.ux.rem(.125),bottom:v.ux.rem(.125),borderRadius:v.ux.percent(100),visibility:"hidden"},ce={left:v.ux.rem(.125)},de={right:v.ux.rem(.125)},ue={background:m.Il.CoreNeutral90,opacity:0,width:v.ux.rem(1.5),height:v.ux.rem(1.5),position:"absolute",borderRadius:v.ux.percent(100),cursor:"pointer",top:v.ux.rem(-.5),zIndex:1,transition:"all 0.15s ease-in-out",$nest:{"&:hover":{opacity:.1}}},pe={left:v.ux.rem(-.5)},me={right:v.ux.rem(-.5)},he={position:"relative",display:"flex",alignItems:"center",backgroundColor:m.Il.CorePurple40,height:v.ux.percent(100),borderRadius:v.ux.rem(.375),transition:"all 0.15s ease-in-out"},ge={position:"absolute",right:v.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",width:v.ux.rem(1.75),height:v.ux.rem(1.75),backgroundColor:m.Il.CoreNeutral0,boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)",borderRadius:v.ux.rem(1.875),cursor:"ew-resize",transition:"all 0.15s ease-in-out",zIndex:1,$nest:{"&:hover":{width:v.ux.rem(2),height:v.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},fe={width:v.ux.rem(2),height:v.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},ye={width:v.ux.rem(.9375),height:v.ux.rem(.9375),pointerEvents:"none"},ve={outerContainer:v.ux.joinClasses([z,v.ux.style({display:"flex",alignItems:"center"})]),label:v.ux.joinClasses([G,v.ux.style(ne)]),container:v.ux.joinClasses([j,v.ux.style(ae)]),slider:v.ux.joinClasses([H,v.ux.style(oe)]),sliderDragging:v.ux.joinClasses([Y,v.ux.style(se)]),sliderDivisionPoint:v.ux.joinClasses([V,v.ux.style(le)]),sliderDivisionPointLeft:v.ux.joinClasses([Z,v.ux.style(ce)]),sliderDivisionPointRight:v.ux.joinClasses([J,v.ux.style(de)]),sliderDivisionPointHoverArea:v.ux.joinClasses([Q,v.ux.style(ue)]),sliderDivisionPointHoverAreaLeft:v.ux.joinClasses([q,v.ux.style(pe)]),sliderDivisionPointHoverAreaRight:v.ux.joinClasses([X,v.ux.style(me)]),sliderInner:v.ux.joinClasses([K,v.ux.style(he)]),sliderInnerDragging:v.ux.joinClasses([ee,v.ux.style({transition:"none"})]),knob:v.ux.joinClasses([te,v.ux.style(ge)]),knobDragging:v.ux.joinClasses([re,v.ux.style(fe)]),knobEmoji:v.ux.joinClasses([ie,v.ux.style(ye)])};var xe;!function(e){e.BundleMini=({card:e,actions:t})=>a.createElement(E.b.Mini,(0,n._)((0,i._)({},(0,l.Sh)(k.l$.wrapper,k.l$.bundleContainer)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:a.createElement(y.CL,{className:k.l$.alertsCounter},e.alerts.length),inert:e.positionState.inert,hideDot:!0}),a.createElement(c.F.div,{className:Ce.content},a.createElement(f.In,{id:e.activeAlert.toneAlternatives[e.activeAlert.selectedToneAlternativeIdx].emojiID,className:Ce.emoji}),a.createElement("div",{className:k.l$.highlightedText},S.R.bundleTitle(e)))),e.Full=({card:e,actions:t,isChecking:r,isCheckingGlobal:i})=>{const n=a.useContext(h.m.Context),l=x.P.useAtomOf(e.activeAlert.toneAlternatives),m=a.useCallback((r=>{"focused"!==e.visualState.transition.type&&"expanded"!==e.visualState.transition.type||t.next({type:w.lY.Type.toneAIChangeToneAlternative,alertId:e.activeAlert.id,itemId:e.id,selectedToneAlternativeIdx:r})}),[t,e.visualState.transition.type,e.activeAlert.id,e.id]);return(0,s.pipe)(e.transform,p.filter(C.b$.isToneAI),p.fold((()=>null),(s=>a.createElement(_.VM,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardBody:r=>a.createElement(a.Fragment,null,a.createElement(_.__,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(c.F.Fragment,null,l.pipe(d.U((e=>a.createElement(W,{toneAlternatives:e,onSelectToneAlternative:m}))))),0===e.activeAlert.selectedToneAlternativeIdx?a.createElement("div",{className:we.replacementContainer},e.activeAlert.highlightTexts[0]):a.createElement(g.T9,{classes:{rendered:we.replacement,removing:we.replacementHidden},timeout:250,content:u.of(a.createElement(T.RF,{label:s.labels[e.activeAlert.selectedToneAlternativeIdx-1],className:we.replacementContainer,a11yContrast:e.renderOptions.features.has(A.j.Features.a11yContrast)}))}),0!==e.activeAlert.selectedToneAlternativeIdx?a.createElement(_.Nm,{title:n.card.todoAction(s.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:b.hz((()=>t.next({type:w.lY.Type.alertApply,alertId:e.activeAlert.id,id:e.id,alternativeIndex:e.activeAlert.selectedToneAlternativeIdx-1,cardType:w.lY.getCardType(e),eligibleForSurvey:I.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:I.X.isEligibleForGbPrompt(e)})))}):null),mainActions:(0,o.a9)(a.createElement(_.Kg,{card:e,feedbackActions:t})),subActions:(0,o.a9)(a.createElement(_.q4,{card:e,actions:t})),cardFooter:(0,o.a9)(a.createElement(_.lJ,{card:e}))}))))}}(xe||(xe={}));const be={width:v.ux.rem(1),height:v.ux.rem(1),marginRight:v.ux.rem(.5)},Ce=v.ux.stylesheet({content:[{display:"flex",alignItems:"center"}],emoji:[be]}),Ie={transition:`opacity ${v.ux.seconds(_.k_)}`},Se={width:v.ux.percent(100),background:m.Il.CoreNeutral10,borderRadius:v.ux.px(4),fontSize:v.ux.rem(.875),lineHeight:v.ux.rem(1.5),fontFeatureSettings:"'ss03' on",padding:v.ux.px(8),marginTop:v.ux.px(12),boxSizing:"border-box"},we=v.ux.stylesheet({replacement:[Ie],replacementHidden:[Ie,{opacity:0}],replacementContainer:[Se]})},18955:(e,t,r)=>{r.d(t,{d:()=>v});var i=r(18775),n=r(50858),a=r(55818),o=r(27378),s=r(8543),l=r(23239),c=r(5114),d=r(19962),u=r(42040),p=r(46680),m=r(19751),h=r(9922),g=r(85089),f=r(98403),y=r(74238);class v extends o.Component{componentDidMount(){!0===this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),!0===this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:r}=this.props;return o.createElement(s.F.div,{"data-purpose":"card-list-connector",style:r.pipe(m.map((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}constructor(...e){super(...e),(0,i._)(this,"_log",u.C8.Logging.getLogger("CardsListConnectorView",p.i.DEBUG)),(0,i._)(this,"_subs",new h.w.Keeper)}}!function(e){let t;!function(e){e.create=()=>l.h.create({scrollProvider:c.none,scrollConsumer:c.none,viewport:c.none,title:c.none})}(t=e.Elements||(e.Elements={}));e.boundedScrollListener=(e,t)=>m.mergeStatic(m.defer((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(m.switchMap(c.fold((()=>m.EMPTY),(e=>g.YC(e).pipe(m.map((t=>(0,a._)((0,n._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),m.tap((t=>e.viewport.set({top:y.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(m.switchMap(c.fold((()=>m.EMPTY),(t=>m.fromEvent(t,"scroll").pipe(m.map((()=>t.scrollTop)),m.startWith(t.scrollTop),m.tap((t=>e.scrollTop.set(t))),m.mapTo(f.PU)))))),t.view("title").pipe(m.switchMap(c.fold((()=>m.of(d.UL.empty)),(e=>g.YC(e)))),m.map((e=>e.height)),m.shareReplay({bufferSize:1,refCount:!0}),m.tap((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(m.switchMap(c.fold((()=>m.EMPTY),(t=>e.scrollOffset.pipe(m.tap((e=>{t.scrollTop+=e})))))))).pipe(m.mapTo(void 0)),e.superScrollListener=(e,t)=>{const r=t.view("title").pipe(m.switchMap(c.fold((()=>m.of(d.UL.empty)),(e=>g.YC(e)))),m.map((e=>e.height)),m.shareReplay({bufferSize:1,refCount:!0}));return m.mergeStatic(m.defer((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(m.switchMap(c.fold((()=>m.EMPTY),(e=>g.YC(e).pipe(m.map((t=>(0,a._)((0,n._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),m.tap((t=>e.viewport.set({top:y.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(m.switchMap(c.fold((()=>m.EMPTY),(t=>m.fromEvent(t,"scroll").pipe(m.map((()=>t.scrollTop)),m.startWith(t.scrollTop),m.tap((t=>e.scrollTop.set(t))),m.mapTo(f.PU)))))),t.view("scrollConsumer").pipe(m.switchMap(c.fold((()=>m.EMPTY),(t=>e.scrollOffset.pipe(m.scan(((e,t)=>e-t),0),m.tap((e=>{t.style.transform=`translateY(${e}px)`})))))),m.combineLatest(r),m.tap((([t,r])=>e.paddingTop.set(t+r))))).pipe(m.mapTo(void 0))}}(v||(v={}))},4948:(e,t,r)=>{r.d(t,{J:()=>c});var i=r(27378),n=r(44060);if(3075==r.j)var a=r(64757);var o=r(94632),s=r(89894),l=r(40219);const c=e=>i.createElement(a.zx.Animated,(0,a.L_)(e,p.gray)),d={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},u={overflow:"hidden",padding:`0 ${s.ux.rem(.5)}`,borderRadius:s.ux.rem(l.fx),backgroundColor:n.Il.CoreNeutral60,color:n.Il.CoreNeutral0,textTransform:"none",letterSpacing:s.ux.rem(n.xv.ButtonLetterSpacing),fontSize:s.ux.rem(n.xv.ButtonSize),lineHeight:s.ux.rem(n.xv.ButtonLineHeight),transitionDuration:s.ux.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:n.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:n.Il.CoreNeutral50,color:n.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:n.Il.CoreNeutral50,color:n.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:n.Il.CoreNeutral50,color:n.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:n.Il.CoreNeutral60,color:n.Il.CoreNeutral50},[`.${o.vD} &`]:{padding:`0 ${s.ux.rem(.5)}`,marginRight:s.ux.px(2),borderRadius:0,backgroundColor:n.Il.CoreNeutral60,$nest:{"&:first-child":{borderRadius:`${s.ux.rem(l.fx)} 0 0 ${s.ux.rem(l.fx)}`},"&:last-child":{marginRight:0,borderRight:"none",borderRadius:`0 ${s.ux.rem(l.fx)} ${s.ux.rem(l.fx)} 0`},"&[data-active='true']":{backgroundColor:n.Il.CoreBlue50,color:n.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:n.Il.CoreBlue40,color:n.Il.CoreNeutral0}}}}}}},p=s.ux.stylesheet({button:[d],gray:[d,u]})},82858:(e,t,r)=>{r.d(t,{s:()=>R});var i,n,a=r(50858),o=r(55818),s=r(27378),l=r(8543),c=r(22232),d=r(44060),u=r(35407),p=r(88056),m=r(19429),h=r(76024),g=r(98314),f=r(20096),y=r(95195),v=r(69243),x=r(55485);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(i||(i={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian",e.indian="indian"}(n||(n={}));var b,C=v.mM({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),I=(0,f._)(Object.keys(C.keys)).concat(["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net","outlook.live.com","127.0.0.1"]).map((function(e){return e.startsWith(".")?e.slice(1):e})),S=v.G0([v.dt({state:v.i0("disabled")}),v.dt({state:v.i0("enabled")}),v.dt({state:v.i0("test")})]),w=(v.dt({version:v.Z_}),new v.Dy("HttpString",v.Z_.is,(function(e,t){return y.either.chain(v.Z_.validate(e,t),(function(r){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?v.Vp(r):v.Rn(e,t,"URL parsing failed (".concat(r,")"))}))}),String)),A=new v.Dy("RelativeUrlPath",v.Z_.is,(function(e,t){return y.either.chain(v.Z_.validate(e,t),(function(r){return/^\/[a-zA-Z0-9-._~:\/?#[\]@!$&'()*+,;=%]*$/.test(r)?v.Vp(r):v.Rn(e,t,"Relative URL path parsing failed (".concat(r,")"))}))}),String),E=new v.Dy("MsStoreUrlString",v.Z_.is,(function(e,t){return y.either.chain(v.Z_.validate(e,t),(function(r){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?v.Vp(r):v.Rn(e,t,"Edge URL parsing failed (".concat(r,")"))}))}),String),_=new v.Dy("AllowedHttpString",w.is,(function(e,t){return y.either.chain(w.validate(e,t),(function(r){var i=(0,g._)(r.split("//"),2)[1],n=(0,g._)(i.split("/"),1)[0],a=(0,g._)(n.split(":"),1)[0],o=!0,s=!1,l=void 0;try{for(var c,d=I[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;if(a.endsWith(u))return v.Vp(r)}}catch(e){s=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}var p="Domain (".concat(a,") is not allowed in ").concat(I.join(", "));return v.Rn(e,t,p)}))}),w.encode),k=v.mM({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),T=(v.r$({env:x.D.createStringEnum(i,"Environment"),logLevel:k,accumulateCrashLogLevel:k,sendCrashOnLogLevel:k,collectLogs:v.O7,collectCrashLogs:v.O7,copyLogsToConsole:v.O7,crashLogsCacheSize:v.pk,debugLogsCacheSize:v.pk,tracking:S,alertCache:v.r$({prefix:v.Z_,version:v.Z_}),mutedCategoriesCache:v.r$({prefix:v.Z_,version:v.Z_}),outcomeScoreCache:v.r$({prefix:v.Z_,version:v.Z_}),userSettingsPrefix:v.Z_,userSettingsVersion:v.Z_,defaultDialect:x.D.createStringEnum(n,"DialectEnum"),notificationShowTimeMs:v.pk,maxNotificationsOnTheScreen:v.pk,selfUpdate:v.r$({versionCheckInterval:v.pk,selfUpdateDelay:v.pk,canReloadCheckInterval:v.pk,blockingModalAutoReloadDelay:v.pk,retryFailedVersionCheckInterval:v.pk,retryFailedVersionCheckLimit:v.pk,debugBuildVersion:v.Z_,versionFilePath:v.Z_}),pingMaybeGnarDelay:v.pk,domains:v.r$({cookie:C,localServer:v.Z_}),api:v.r$({analyticsUrl:_,analyticsPrivateUrl:_,authUrl:_,institutionUrl:_,snippetsUrl:_,clientControlsUrl:_,institutionAdminUrl:_,institutionAnalyticsUrl:_,institutionMembersUrl:_,institutionInviteesUrl:_,institutionGroupsUrl:_,institutionTonesUrl:_,institutionVaultUrl:_,knowledgeHubUrl:_,profileTonesUrl:_,tonesUrl:_,dapiUrl:_,doxUrl:_,doxWsUrl:_,irbisUrl:_,subscriptionUrl:_,paymentsUrl:_,discountUrl:_,dataReportUrl:_,capiWsUrl:_,capiApiUrl:_,gnarApi:v.r$({url:_}),femetricsUrl:_,felogUrl:_,felogDebugUrl:_,sumoUrl:_,crashLogUrl:_,onlineTestUrl:v.Z_,wsTest:_,proofitResultUrl:_,redirect:_,mailApiUrl:_,ssoUrl:_,scimUrl:_,voxInstitutionUrl:_,writingStylesUrl:_,appsUrl:_,tokensUrl:_,cheetahUrl:_,cheetahInstitutionUrl:_,inProductReportUrl:_,vito:_}),app:v.r$({nameWeb:v.Z_,nameMacEditor:v.Z_,nameDesktop:v.Z_,webOnboarding:v.Z_}),urls:v.r$({free:v.Z_,account:_}),onlineEditor:v.r$({base:_,docId:_}),external:v.r$({gmail:_,gDocs:_,outlook:_}),funnel:v.r$({base:_,resetPassword:_,accountDeleted:_,businessLanding:_,businessStyleguideLanding:_,businessUpgradeLanding:_,subscribe:_,upgrade:_,upgradeTry:_,plans:_,signin:_,socialSignin:_,signup:_,mainPage:_,deleteSocialAccount:_,subscriptionCancellationSurvey:_,keyboardInstall:_,desktopAppInstall:_,claimedUserJoinFallback:_,userTrustGuidelines:_,llamaServiceDownload:_,llamaServiceDownloadDirect:_,productRecommendation:_,tour:_,facebookTour:_,gDocsTour:_,gmailTour:_,canvasTour:_,linkedInTour:_,outlookTour:_,slackTour:_}),desktop:v.r$({windows:v.r$({installURL:_,infoURL:_}),mac:v.r$({installURL:_,infoURL:_})}),llama:v.r$({windows:_,mac:_}),mobileApp:v.r$({android:_,iOS:_}),extension:v.r$({autoCitations:v.r$({demoPageUrl:v.Z_}),chrome:v.r$({installURL:_,infoURL:_}),firefox:v.r$({installURL:_,infoURL:_}),safari:v.r$({installURL:_}),edge:v.r$({installURL:E,infoURL:_}),edgeChromium:v.r$({installURL:_})}),edu:v.r$({adminPanelURL:_}),support:v.r$({login:_,email:v.Z_,mainPage:_,newRequest:_,contact:_,emailExistsKBUrl:_,safariDownloadFilesKBUrl:_,rtfCompatibilityUrl:_,documentAcceptTrackedChanges:_,introducingGrammarlyEditor:_,deDeprecationArticle:_,troubleshooting:v.r$({connectionTroubleshooting:_,connectionIsUnstable:_,somethingWentWrong:_,diagnosticTestPath:A,serverEncounteredAnError:_,howDoIClearCacheAndCookies:_,statusPage:_,textCheckingUnavailable:_})}),privacyPolicy:_,termsOfService:_,account:v.r$({customize:_,subscription:_,adminSubscription:_,members:_,styleGuide:_,writingStyle:_,suggestions:_,writingProgress:_}),preconnectLinks:v.IX(w),ideas:v.r$({galleryURL:_})}),m.VF((function(){return{env:i.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:n.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*h.wn,selfUpdateDelay:12*h.p7,canReloadCheckInterval:5*h.cK,blockingModalAutoReloadDelay:1*h.wn,retryFailedVersionCheckInterval:5*h.wn,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*h.p7,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://goldengate.grammarly.com/institution/api",snippetsUrl:"https://goldengate.ppgr.io/snippets/v1/snippets",clientControlsUrl:"https://goldengate.grammarly.com/client-controls",institutionAdminUrl:"https://goldengate.grammarly.com/institution/api/institution/admin",institutionMembersUrl:"https://goldengate.grammarly.com/institution/api/institution/members",institutionInviteesUrl:"https://goldengate.grammarly.com/institution/api/institution/invitees",institutionGroupsUrl:"https://goldengate.grammarly.com/institution/api/groups",institutionVaultUrl:"https://goldengate.grammarly.com/institution/api/vault",knowledgeHubUrl:"https://goldengate.grammarly.com/knowledge-hub/v1/institution",analyticsUrl:"https://goldengate.grammarly.com/analytics/api/institution/statistics",analyticsPrivateUrl:"https://analytics.grammarly.com/private/api",institutionAnalyticsUrl:"https://goldengate.grammarly.com/institution/public/api/institution/statistics",institutionTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",profileTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",tonesUrl:"https://goldengate.ppgr.io/brand-tones/v1",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",doxWsUrl:"wss://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",paymentsUrl:"https://api.payments.grammarly.com",discountUrl:"https://irbis.grammarly.com/api/discounts",dataReportUrl:"https://datareport.grammarly.com",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},femetricsUrl:"https://editor.femetrics.grammarly.io/batch/import",felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com",scimUrl:"https://goldengate.grammarly.com/auth/api/token/scim",voxInstitutionUrl:"https://goldengate.grammarly.com/vox/v2/institution",writingStylesUrl:"https://goldengate.grammarly.com/writing-style",appsUrl:"https://apps.grammarly.com",tokensUrl:"https://tokens.grammarly.com",cheetahUrl:"https://capi.grammarly.com/api/cheetah/v1/settings",cheetahInstitutionUrl:"https://goldengate.grammarly.com/cheetah/v1/institution/settings",inProductReportUrl:"https://in-product.report.grammarly.io/v1/report",vito:"https://goldengate.grammarly.com/vito"},app:{nameWeb:"editor",nameMacEditor:"macEditor",nameDesktop:"desktopEditor",webOnboarding:"webOnboarding"},urls:{free:"/free",account:"https://account.grammarly.com"},onlineEditor:{base:"https://app.grammarly.com",docId:"https://app.grammarly.com/ddocs/"},external:{gmail:"https://mail.google.com/",gDocs:"https://docs.google.com",outlook:"https://outlook.live.com/mail"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",upgradeTry:"https://www.grammarly.com/upgrade/try",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1",userTrustGuidelines:"https://www.grammarly.com/trust",llamaServiceDownload:"https://www.grammarly.com/service/download",llamaServiceDownloadDirect:"https://www.grammarly.com/service/download/direct",productRecommendation:"https://www.grammarly.com/product/recommendation",tour:"https://www.grammarly.com/tour",facebookTour:"https://www.grammarly.com/tour-facebook",gDocsTour:"https://www.grammarly.com/tour-gdocs",gmailTour:"https://www.grammarly.com/tour-gmail",canvasTour:"https://grammarly.com/tour-canvas",linkedInTour:"https://grammarly.com/tour-linkedin",outlookTour:"https://grammarly.com/tour-outlook",slackTour:"https://grammarly.com/tour-slack"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlyEditor.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/GrammarlyEditor.dmg",infoURL:"https://www.grammarly.com/native/mac"}},llama:{windows:"https://download-windows.grammarly.com/GrammarlyInstaller.exe",mac:"https://download-mac.grammarly.com/Grammarly.dmg"},mobileApp:{android:"https://play.google.com/store/apps/details?id=com.grammarly.android.keyboard",iOS:"https://apps.apple.com/us/app/grammarly-grammar-keyboard/id1158877342"},extension:{autoCitations:{demoPageUrl:"https://www.sciencedirect.com/science/article/abs/pii/S0885200618300826"},chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc",introducingGrammarlyEditor:"https://support.grammarly.com/hc/en-us/articles/360003474732-Introducing-the-Grammarly-Editor",deDeprecationArticle:"https://support.grammarly.com/hc/en-us/articles/21742304179085",troubleshooting:{connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",connectionIsUnstable:"https://support.grammarly.com/hc/en-us/articles/360024580031-Error-Your-Internet-Connection-Is-Unstable",somethingWentWrong:"https://support.grammarly.com/hc/en-us/articles/360001608811-Error-Hm-something-went-wrong",diagnosticTestPath:"/diagnostic-test?origin=editor",serverEncounteredAnError:"https://support.grammarly.com/hc/en-us/articles/115000090252-Error-The-server-encountered-an-error-Please-try-to-reload-the-page",howDoIClearCacheAndCookies:"https://support.grammarly.com/hc/en-us/articles/115000090272-How-do-I-clear-cache-and-cookies-",statusPage:"https://status.grammarly.com",textCheckingUnavailable:"https://support.grammarly.com/hc/en-us/articles/115000090251-Error-Text-Checking-Is-Temporarily-Unavailable"}},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",writingStyle:"https://account.grammarly.com/admin/style-guide-writing-style",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1",writingProgress:"https://account.grammarly.com/writing-progress"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com"],ideas:{galleryURL:"https://app.grammarly.com/ideas/sales"}}})));!function(e){e.createFromPlatformConfig=u.Pj(T),e.Context=s.createContext(p.Y.invariantContent("PlatformConfig"))}(b||(b={}));var M=r(42040),N=r(50474),L=r(64757),D=r(50790),F=r(89894),P=r(4948);var R;!function(e){e.UnauthorizedError=({action:e})=>s.createElement(D.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",s.createElement("br",null),s.createElement(P.J,{name:"login",className:$.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>s.createElement(D.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. Well try to reconnect you in"," ",s.createElement(l.F.span,null,t.view((e=>e)))," seconds.",s.createElement("br",null),s.createElement(P.J,{name:"reconnect",className:$.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const e=t(P.J,"UnknownConnectionError"),r=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Grammarly couldnt establish a connection to the server"},"Try reloading the page in 5 minutes. If the issue persists, check"," ",s.createElement(L.zx,{name:"serverEncounteredAnError",className:$.link,href:r.support.troubleshooting.serverEncounteredAnError,target:"_blank"},"this article"),".",s.createElement("br",null),s.createElement(e,{name:"reload-page",className:$.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Cant Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",s.createElement("br",null),s.createElement(P.J,{name:"troubleshoot",className:$.footerLink,href:e.support.troubleshooting.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const e=t(P.J,"ClientConnectionErrorNotification"),r=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Grammarly couldnt establish a connection to the server"},"Try reloading the page in 5 minutes. If the issue persists, check"," ",s.createElement(L.zx,{name:"serverEncounteredAnError",className:$.link,href:r.support.troubleshooting.serverEncounteredAnError,target:"_blank"},"this article"),".",s.createElement("br",null),s.createElement(e,{name:"reload-page",className:$.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>s.createElement(D.DI.TitledContent,{title:"Cant find this document"},"It looks like this document was removed or URL is incorrect.",s.createElement("br",null),s.createElement(P.J,{name:"goto-docs",className:$.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const e=s.useContext(N.m.Context),r=t(L.zx,"SelfUpdateBlocker");return s.createElement(D.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",s.createElement(r,{name:"reload-page",className:$.link},"reload")," ","the page ",e.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=s.useContext(N.m.Context).desktopUpdate;return s.createElement(D.DI.TitledContent,{title:t.hardTitle},t.hard,s.createElement("br",null),s.createElement(P.J,{name:"reload-desktop",className:$.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=s.useContext(N.m.Context).desktopUpdate;return s.createElement(D.DI.TitledContent,{title:t.hardTitle},t.hard,s.createElement("br",null),s.createElement(P.J,{name:"download-desktop",className:$.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>{const e=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Your internet connection is unstable"},"Check"," ",s.createElement(L.zx,{name:"connectionIsUnstable",className:$.link,href:e.support.troubleshooting.connectionIsUnstable,target:"_blank"},"this article")," ","to resolve the issue.")},e.CheckingIsDownError=()=>{const e=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Text checking is temporarily unavailable"},"To resolve the issue, check"," ",s.createElement(L.zx,{name:"textCheckingUnavailable",className:$.link,href:e.support.troubleshooting.textCheckingUnavailable,target:"_blank"},"this article"),".")},e.Error=()=>{const e=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"We couldnt perform this action"},s.createElement(L.zx,{name:"howDoIClearCacheAndCookies",className:$.link,href:e.support.troubleshooting.howDoIClearCacheAndCookies,target:"_blank"},"Clear cache")," ","and try again.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const r=s.useContext(N.m.Context).proofitPayment,i=function(e,t,r){switch(e){case"creditCard":return t;case"payPal":return r;default:const i=`Unknown payment method: ${e}`;throw M.C8.Logging.getLogger("ProofitView").warn(i),new Error(i)}}(e,r.creditCard,r.payPal);return s.createElement(D.DI.TitledContent,{title:"Order can not be processed"},s.createElement("div",null,i),"Please update your credit card information in the Manage Subscription section.",s.createElement("br",null),s.createElement(P.J,{name:"manage-subscription",className:$.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=s.useContext(N.m.Context).proofitOrderModal.card.paymentSuccess;return s.createElement(D.DI.TitledContent,{title:e.title},s.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=s.useContext(N.m.Context).proofitOrderModal.card.paymentError,t=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:e.title},s.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>s.createElement(D.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>s.createElement(D.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",s.createElement("br",null),s.createElement(P.J,{name:"goto-docs",className:$.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>s.createElement(D.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading is either too long or has a complex internal structure. Please edit your text (e.g., reduce length, remove significantly long tables) or select another document.",s.createElement("br",null),s.createElement(P.J,{name:"goto-docs",className:$.footerLink,onClick:e},"Go to your documents"));var t=e.withReload=(e,t)=>{class r extends s.Component{render(){return s.createElement(e,(0,o._)((0,a._)({},this.props),{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:self.location.href,timestamp:Date.now()}))}catch(e){}self.location.reload()}}))}}return r};e.CopyToClipboardError=()=>{const e=s.useContext(N.m.Context);return s.createElement(D.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",s.createElement(P.J,{name:"support",className:$.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:r})=>s.createElement(D.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders marks has been emailed to you at ",r," in .docx format.",s.createElement("br",null),s.createElement(P.J,{name:"download",className:$.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=s.useContext(N.m.Context),t=s.useContext(b.Context);return s.createElement(D.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your documents formatting, Grammarlys formatting tools are temporarily not available.",s.createElement("br",null),s.createElement(P.J,{name:"support",className:$.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=s.useContext(N.m.Context);return s.createElement(D.DI.TitledContent,{title:t.title},t.text,"",s.createElement(L.zx,{name:"goto-docs",className:$.link,onClick:e},t.link))},e.AlertsNothingFound=()=>s.createElement(D.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=s.useContext(N.m.Context).desktopUpdate;return s.createElement(D.DI.TitledContent,{title:t.softTitle},t.soft,s.createElement("br",null),s.createElement(P.J,{name:"reload-desktop",className:$.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=s.useContext(N.m.Context).desktopUpdate;return s.createElement(D.DI.TitledContent,{title:t.softTitle},t.soft,s.createElement("br",null),s.createElement(P.J,{name:"download-desktop",className:$.footerLink,onClick:e},t.download))},e.DownloadDocumentNotFoundError=()=>{const e=s.useContext(N.m.Context);return s.createElement(D.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=s.useContext(N.m.Context);return s.createElement(D.DI.Content,null,t.hotkeyUnsupported,s.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const r=s.useContext(N.m.Context).fileSizeExceededNotification;return s.createElement(D.DI.TitledContent,{title:r.title},r.body,"windows"===e&&s.createElement(P.J,{name:"officeAddin",className:$.footerLink,href:t,target:"_blank"},r.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=s.useContext(N.m.Context).documentUploaded;return s.createElement(D.DI.Content,null,t.message,s.createElement("br",null),s.createElement(P.J,{name:"goto-doc",className:$.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=s.useContext(N.m.Context);return s.createElement(D.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>s.createElement(D.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",s.createElement(L.zx,{name:"document-accept-tracked-changes",className:$.link,href:e,target:"_blank"},"here")," ","for details.");const r=(e,t)=>{switch(e){case U.switchToDenali:return t.switchToDenali;case U.feedbackSend:return t.feedbackSend;case U.statisticsError:return t.statisticsError;case U.referenceCopied:return t.referenceCopied;case U.documentCopied:return t.documentCopied;case U.somethingCopied:return t.somethingCopied;case U.isTemporaryDownloadError:return t.isTemporaryDownloadError;case U.documentUploadGeneralError:return t.documentUploadGeneralError;case U.documentIsEmpty:return t.documentIsEmpty;case U.noFileToUpload:return t.noFileToUpload;case U.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,c.vE)(e)}};e.Generic=({type:e})=>{const t=s.useContext(N.m.Context);return s.createElement(D.DI.TitledContent,{title:r(e,t)})}}(R||(R={}));const O={display:"inline-flex",overflow:"unset",color:d.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},B={marginTop:F.ux.rem(.5),textDecoration:"none"},$=F.ux.stylesheet({link:[O],footerLink:[O,B]});var U;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.somethingCopied="somethingCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(U||(U={}))},32380:(e,t,r)=>{r.d(t,{A:()=>b});var i=r(50858),n=r(55818),a=r(27378),o=r(18208),s=r(44060),l=r(50474),c=r(4870),d=r(50790),u=r(89894),p=r(4948);const m=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return a.createElement(a.Fragment,null,a.createElement("span",null,e.alerts)," ",o._6(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return a.createElement(a.Fragment,null,e.transform);case"addToDictionary":return a.createElement(a.Fragment,null,a.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as Will address";case"markAsNotHelpful":return"Marked as Not helpful";case"acknowledge":return"Acknowledged";default:return""}},h={display:"flex",marginTop:u.ux.rem(-1.1),marginBottom:u.ux.rem(-.5),alignItems:"center",justifyContent:"space-between"},g={marginTop:u.ux.rem(.6),marginRight:u.ux.rem(1),color:s.Il.CoreNeutral0,flexGrow:0,flexShrink:0},f={marginTop:u.ux.rem(-.25),paddingRight:u.ux.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},y={marginTop:u.ux.rem(.6),maxWidth:u.ux.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},v={marginRight:u.ux.rem(1.4)},x=u.ux.stylesheet({alertUndoWrapper:[h],alertUndoWrapperFlexible:[h,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[h,{flexWrap:"wrap"}],alertUndoBtn:[g],alertUndoIcon:[f],alertUndoContent:[y],alertUndoContentFlexible:[y,v],addToDictionary:[{wordBreak:"break-all"}]});var b;!function(e){const t={wrapper:x.alertUndoWrapperFlexible,content:x.alertUndoContent,icon:x.alertUndoIcon,button:x.alertUndoBtn};e.Standard=({action:e,params:o})=>a.createElement(d.DI.Content,null,a.createElement(r,{action:e,content:m(o),theme:(0,n._)((0,i._)({},t),{wrapper:x.alertUndoWrapperFullWidth})})),e.Flexible=({notification:e,onClose:o,action:s,params:l})=>a.createElement(d.SJ.Wrapper,{notification:e,onClose:o},a.createElement(d.DI.Content,null,a.createElement(r,{action:s,content:m(l,{addToDictionary:x.addToDictionary}),theme:(0,n._)((0,i._)({},t),{wrapper:x.alertUndoWrapperFlexible,content:x.alertUndoContentFlexible})})));var r=e.Content=({action:e,content:r,theme:i=t})=>{const n=a.useContext(l.m.Context);return a.createElement("div",{className:i.wrapper},a.createElement("div",{className:i.content},r),a.createElement(p.J,{name:"alertUndoButton",className:i.button,onClick:e},a.createElement(c.JO.Undo,{className:i.icon}),n.undo))}}(b||(b={}))},91463:(e,t,r)=>{r.d(t,{E2:()=>xe,TG:()=>be});var i,n,a=r(18775),o=r(50858),s=r(55818),l=r(98410),c=r(27378),d=r(57050),u=r(40327),p=r(49524),m=r(8543),h=r(54001),g=r(23239),f=r(5114),y=r(22232),v=r(83078),x=r(19962),b=r(15073),C=r(101),I=r(19751),S=r(98403),w=r(60797),A=r(40151),E=r(42040),_=r(76974);!function(e){e.mock=()=>({isStepEnabled:d.jv,subscribeForStep:()=>{throw new Error("Not implemented")},getStepCompletionCallback:(0,d.a9)(d.Q1),changeState:d.Q1,relaunchAllSteps:d.Q1,getFirstTargetRect:()=>_.of(f.none),isLastStep:d.jv,completionTrigger:g.h.create(!1)})}(i||(i={})),function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Popover="popover",e.Passed="passed"}(n||(n={}));class k{isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){E.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=g.h.create(n.Hidden);return Boolean(this._steps[e])?this._steps[e]:this._steps[e]={id:e,state:t,dotShown:d.Q1,dotClicked:()=>t.set(n.Popup),popupClosed:()=>t.set(n.Passed),popupIgnored:()=>t.set(n.Hidden),actionTaken:()=>t.set(n.Passed)}}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}constructor(){(0,a._)(this,"completionTrigger",g.h.create(!1)),(0,a._)(this,"_steps",{}),(0,a._)(this,"getFirstTargetRect",(()=>A.E))}}var T=r(53514),M=r(69470),N=r(44060),L=r(89894),D=r(24588),F=r(40219);const P=N.Il.BackgroundTooltip,R=N.Il.CoreNeutral90,O=N.Il.CoreNeutral40,B=L.ux.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${L.ux.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),$={width:L.ux.rem(1),height:L.ux.rem(1),borderRadius:L.ux.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${B} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},U=L.ux.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),W={width:L.ux.rem(1),height:L.ux.rem(1),borderRadius:L.ux.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:L.ux.rem(1),height:L.ux.rem(1),borderRadius:L.ux.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${U} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},z={margin:`${L.ux.rem(-1.5)} 0 0 ${L.ux.rem(-1.5)}`,padding:L.ux.rem(1),borderRadius:L.ux.percent(50),cursor:"pointer",pointerEvents:"all"},G={margin:`0 0 ${L.ux.rem(.5)}`,color:N.Il.CoreNeutral0,fontWeight:"bold"},j={color:N.Il.CoreNeutral0,lineHeight:L.ux.rem(1.25)},H={display:"flex",padding:`${L.ux.rem(1)} ${L.ux.rem(1.5)} ${L.ux.rem(1.25)} ${L.ux.rem(2)}`,width:L.ux.rem(20),borderRadius:L.ux.rem(F.fx),background:P,color:N.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},Y={display:"inline-block",marginRight:L.ux.rem(T.x)},V={marginRight:L.ux.rem(2),width:L.ux.rem(2),flexShrink:0,alignSelf:"center"},Z={position:"absolute",top:0,right:0},J={stroke:D.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:N.Il.CoreNeutral0,fill:N.Il.CoreNeutral0}}},Q={position:"absolute",top:L.ux.percent(50),left:L.ux.percent(50),zIndex:F.I3},q={position:"relative",zIndex:F.VN},X={zIndex:F.w$},K={position:"absolute",zIndex:F.w$},ee=L.ux.prefixedStylesheet("onboarding",{pulse:[$],pulseWrapper:[z],header:[G],description:[j],stepWrapper:[H],content:[Y],alertIcon:[V],closeIconWrapper:[Z],closeIcon:[J],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[Q],containerDiv:[{}],editor:[q],onboardingPopup:[X],notificationContainer:[K],pulseOptimized:[W]}),te={display:"flex",flexDirection:"column",width:L.ux.percent(100)},re=(0,s._)((0,o._)({},Z),{top:L.ux.rem(.5),right:L.ux.rem(.5)}),ie=(0,s._)((0,o._)({},J),{$nest:(0,s._)((0,o._)({},J.$nest),{svg:{height:L.ux.rem(1),width:L.ux.rem(1)}})}),ne=(0,s._)((0,o._)({},H),{background:R,color:N.Il.CoreNeutral0,borderRadius:L.ux.rem(M.ze),padding:L.ux.rem(1)}),ae={width:L.ux.percent(100),backgroundColor:"#2DC9B6",color:R,fontWeight:"bold",borderRadius:L.ux.rem(M.xB),marginTop:L.ux.rem(1),padding:L.ux.rem(.5)},oe=(0,s._)((0,o._)({},j),{color:O}),se=L.ux.prefixedStylesheet("a11y-onboarding",{contentWrapper:[te],closeIconWrapper:[re],closeIcon:[ie],stepWrapper:[ne],completeButton:[ae],description:[oe]});var le=r(64757),ce=r(4870),de=r(11413),ue=r(3656),pe=r(1509);const me=e=>c.createElement(le.zx,{className:se.completeButton,onClick:e.onClick},e.text),he=({alignment:e,rect:t,onClose:r,className:i,children:n,icon:a,pinTargetRect:l,hideCloseButton:d,onMount:p})=>c.createElement(de.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:ee.notificationContainer},de.t.Alignment.toSelector(e)),{pinTargetRect:l,withPin:!0}),c.createElement(m.F.div,(0,s._)((0,o._)({},(0,h.Sh)(ee.stepWrapper,i)),{mount:p}),(0,u.pipe)(a,f.fold((()=>c.createElement(ce.JO.Grammarly,{className:ee.alertIcon})),(e=>c.createElement(e,{className:ee.alertIcon})))),n,!(null!=d&&d)&&c.createElement(le.zx,{name:"onboard-close",className:ee.closeIconWrapper,onClick:()=>r&&r()},c.createElement(ce.JO.Close,{className:ee.closeIcon,width:12})))),ge=({alignment:e,rect:t,onClose:r,className:i,children:n,pinTargetRect:a,hideCloseButton:l,onMount:d})=>c.createElement(de.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:ee.notificationContainer},de.t.Alignment.toSelector(e)),{pinTargetRect:a,withPin:!0}),c.createElement(m.F.div,(0,s._)((0,o._)({},(0,h.Sh)(se.stepWrapper,i)),{mount:d}),n,!(null!=l&&l)&&c.createElement(le.zx,{name:"onboard-close",className:se.closeIconWrapper,onClick:()=>{var e;return null===(e=r)||void 0===e?void 0:e()}},c.createElement(ce.JO.Close,{className:se.closeIcon,width:12,color:N.Il.CoreNeutral40})))),fe=e=>{var{title:t,description:r}=e,i=(0,l._)(e,["title","description"]);return c.createElement(he,i,c.createElement("span",{className:ee.content},Boolean(t)?c.createElement(ue.P1,{className:ee.header},t):null,c.createElement(ue.XY,{className:ee.description},r)))},ye=e=>{var{title:t,description:r,isLastStep:i,onComplete:n}=e,a=(0,l._)(e,["title","description","isLastStep","onComplete"]);return c.createElement(ge,a,c.createElement("div",{className:se.contentWrapper},c.createElement("div",{className:ee.content},Boolean(t)?c.createElement(pe.Z.Base,{className:ee.header},t):null,c.createElement(pe.Z.Base,{className:se.description},r)),c.createElement(me,{text:i?"Done":"Next",onClick:n})))},ve=({className:e,onClick:t,customStyle:r})=>c.createElement(m.F.div,(0,s._)((0,o._)({},(0,h.Sh)(ee.pulseWrapper,e)),{style:r,onClick:()=>t&&t()}),c.createElement("div",{className:ee.pulseOptimized}));var xe;function be(e){const t=c.useContext(be.Context),{stepId:r,onboardingViewModel:i}=e,n=(0,l._)(e,["stepId","onboardingViewModel"]),a=i||t,d=Ce(r,a),p=c.useContext(C.l.Context).pipe(I.map((e=>e.rect)));return(0,u.pipe)(d,f.fold((()=>c.Children.only(e.children)),(e=>{var t,i;return c.createElement(Ie,(0,s._)((0,o._)({},n),{onboardingStep:e,viewportRect:p,isLastStep:null===(t=(i=a).isLastStep)||void 0===t?void 0:t.call(i,r)}))})))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(xe||(xe={}));const Ce=(e,t)=>((0,y.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?f.some(t.subscribeForStep(e)):f.none);class Ie extends c.Component{componentWillUnmount(){const e=this.props.onboardingStep;"popup"!==e.state.get()&&"popover"!==e.state.get()||e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;var t;e?this._subs.push(I.mergeStatic(this.context,this.props.onboardingStep.state.pipe(I.filter((e=>"dot"===e||"popup"===e||"popover"===e)))).pipe(I.delay(500),I.withLatestFrom(this._wrapperElement,this._containerElement),I.switchMap((([t,r,i])=>(0,u.pipe)((0,d.bc)(r,i),(0,d.og)(v.vB(((t,r)=>{switch(e.kind){case"findFirstButton":return S.Dx(e.buttonOrder).pipe(I.switchMap((i=>I.of(void 0).pipe(I.delay(500),I.map((()=>{const[n,a]=Ae(t,r,e.position,i,e.selector);return this._exactTargetRect.set(a),n})),w.oA))));case"dotAtPosition":return I.of(Se(e.position));default:return(0,y.vE)(e)}}))),f.fold((()=>I.EMPTY),p.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)})),I.combineLatestStatic([null!==(t=this.props.dismissalTrigger)&&void 0!==t?t:I.EMPTY,this.props.onboardingStep.state]).pipe(I.filter((([e,t])=>e&&("dot"===t||"popup"===t||"popover"===t))),I.take(1)).subscribe((()=>{this.props.onboardingStep.actionTaken()}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return c.createElement(m.F.div,(0,s._)((0,o._)({key:"onboarding-wrapper"},(0,h.Sh)(ee.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName)),{mount:e=>this._wrapperElement.set(f.fromNullable(e))}),c.createElement("div",(0,s._)((0,o._)({key:"container",ref:e=>this._containerElement.set(f.fromNullable(e))},(0,h.Sh)(ee.containerDiv,this.props.themes&&this.props.themes.containerClassName)),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),g.h.combine(e.state,this._visibilityState,((t,r)=>{if(!r)return null;switch(t){case n.Dot:const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),c.createElement(ve,(0,s._)((0,o._)({customStyle:this._spotStyle,key:"spot"},(0,h.Sh)(ee.onboardingSpot,t)),{onClick:()=>e.dotClicked()}));case n.Popup:return c.createElement(fe,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(f.fold((()=>x.UL.empty),x.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:f.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(v.Fc)});case n.Popover:return c.createElement(ye,{key:"step",title:this.props.title,isLastStep:Boolean(this.props.isLastStep),alignment:this.props.alignment,rect:this._containerElement.view(f.fold((()=>x.UL.empty),x.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,onClose:()=>e.popupClosed(),onComplete:()=>e.actionTaken(),pinTargetRect:this._exactTargetRect.view(v.Fc)});default:return null}})))}constructor(...e){super(...e),(0,a._)(this,"context",void 0),(0,a._)(this,"_subs",[]),(0,a._)(this,"_wrapperElement",g.h.create(f.none)),(0,a._)(this,"_containerElement",g.h.create(f.none)),(0,a._)(this,"_exactTargetRect",g.h.create(f.none)),(0,a._)(this,"_visibilityState",g.h.create(!1)),(0,a._)(this,"_spotStyle",g.h.create({})),(0,a._)(this,"_onEventActionTaken",((e,t=!0)=>r=>{const i=e.state.get();if("popup"===i||"popover"===i||t&&"dot"===i){var n;const i=r.target;if(x.pK(i))return;const a=t||x.q_(i,ee.containerDiv);if("findFirstButton"===(null===(n=this.props.dotPosition)||void 0===n?void 0:n.kind)&&!x.q2(i,"role","button"))return;a&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}))}}(0,a._)(Ie,"contextType",b.u.Context),(0,a._)(Ie,"defaultProps",{alignment:"left"});const Se=e=>{switch(e){case xe.leftTop:return{top:0,left:0};case xe.leftCenter:return{top:"50%",left:0};case xe.leftBottom:return{top:"100%",left:0};case xe.rightTop:return{top:0,left:"100%"};case xe.rightCenter:return{top:"50%",left:"100%"};case xe.rightBottom:return{top:"100%",left:"100%"};case xe.center:return{top:"50%",left:"50%"};default:return(0,y.vE)(e)}},we=(e,t,r)=>{switch(r){case xe.rightTop:return{top:e.top-t.top,left:e.left-t.left+e.width};case xe.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,y.vE)(r)}},Ae=(e,t,r,i,n)=>{const a=t.querySelectorAll(null!=n?n:'[role="button"], [role="insertion"], [role="deletion"]'),o=a.length>0&&(void 0===i?a[a.length-1]:a[i]);if(Boolean(o)){const t=x.UL.fromEl((0,d.MZ)(o)),i=x.UL.fromEl(e);return[f.some(we(t,i,r)),f.some(t)]}return Boolean(n)?[f.none,f.none]:[f.some({top:"50%",left:"50%"}),f.none]};!function(e){var t=e.Context=c.createContext(null);e.ContextMock=({children:e})=>c.createElement(t.Provider,{value:new k,children:e})}(be||(be={}))},51072:(e,t,r)=>{r.d(t,{Vi:()=>n});var i=r(95574);function n(e){return e().then(i.MH)}},31668:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(82900),n=r(74923),a=r(18775),o=r(98314),s=r(22232);var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams;(0,i._)(this,e),(0,a._)(this,"base",void 0),(0,a._)(this,"params",void 0),this.base=t,this.params=r;var n=e._toString(t,r).length;(0,s.kG)(n<e.MAX_URL_LENGTH,"url exceeded length limit",String(n))}return(0,n._)(e,[{key:"addParams",value:function(t){var r,i=Object.entries(t).reduce((function(e,t){var r=(0,o._)(t,2),i=r[0],n=r[1];return e.append(i,n),e}),(r=this.params,new URLSearchParams(r.toString())));return new e(this.base,i)}},{key:"toString",value:function(){return e._toString(this.base,this.params)}}],[{key:"_toString",value:function(e,t){var r=t.toString();return"".concat(e).concat(r.length?"?".concat(r):"")}}]),e}();(0,a._)(l,"MAX_URL_LENGTH",2083)},31903:(e,t,r)=>{r.d(t,{Q:()=>c});var i=r(57050),n=r(37492),a=r(51072),o=r(42040);function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_capiSDUIClient",void 0),l(this,"_log",void 0),this._capiSDUIClient=t,this._log=o.C8.Logging.getLogger("SDUIFeedbackServiceImpl")}var t,r,c;return t=e,(r=[{key:"sendUserAction",value:function(e,t){var r=this;this._log.debug("Sending user action",{componentId:e,userAction:t}),(0,i.zG)(this._capiSDUIClient.sendUserAction(e,t),a.Vi,(function(e){return e.catch((function(e){n.EP.isDroppedError(e)?r._log.debug("Stopped listening for sendUserAction message acknowledge",e):n.YG.isNotConnectedError(e)?r._log.warn("Failed to sendUserAction as CAPI was not connected",e):r._log.error("Failed to sendUserAction",e)}))}))}}])&&s(t.prototype,r),c&&s(t,c),e}()},52726:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(57050),n=r(5114),a=r(83078),o=r(34217),s=r(35416),l=r(76201),c=r(76974),d=r(77176);function u(e,t){return o.Z.composeKnot({content:o.Z.fromSideEffect(i.Q1,m(e,t)),root:p()})}var p=function(){return function(){return c.of({})}};function m(e,t){var r=e.view(t.getActiveAlertsCount).view((function(e){return 0===e})),o=e.view(l.v.Prism.getFeedItems());return e.pipe(d.U(s.In.getActiveItem),d.U((function(e){if(n.isNone(e))return{root:"empty",card:{kind:"empty"}};var s=a.MH(e),l=o.get(),c=(0,i.zG)(l.getAt(l.size-1),n.exists((function(e){return e.id===s.id})));return{root:s.id,card:t.viewState(r.get(),c)(s)}})))}},94810:(e,t,r)=>{r.d(t,{c:()=>i});var i,n=r(27378),a=r(8543),o=r(5114),s=r(34217);!function(e){var t,r=function(e){return s.UI.Knot.make(l,{card:e})};!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.assistant=function(e){return s.UI.Knot.make(i,{content:r(e)})};var i=e.AssistantBox=s.UI.Grid.make((function(e){var r=e.notify,i=e.slots;return n.createElement(a.F.div,{id:"assistant-feed-wrapper",mount:function(e){return r({kind:t.onMount,element:o.fromNullable(e)})()}},i.content)}));e.card=r;var l=e.IdProvider=s.UI.Grid.make((function(e){var t=e.slots,r=e.state;return n.createElement(a.F.div,{"data-id":r},t.card)}))}(i||(i={}))},8821:(e,t,r)=>{r.d(t,{N:()=>i});var i,n=r(64015),a=r(57050),o=r(77176),s=r(60797),l=r(41398),c=r(85985),d=r(5114),u=r(35416),p=r(40330);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){!function(e){!function(e){e.fromSduiCardActions=(0,a.ls)(o.U((function(e){var t=(0,a.zG)(e.actions,n.hX(p.zx.Action.isTransitionAction));return e.actions.find((function(e){return"prevCard"===e.type}))?d.some({kind:"prevClicked",transitions:t}):e.actions.find((function(e){return"nextCard"===e.type}))?d.some({kind:"nextClicked",transitions:t}):d.none})),s.oA)}(e.Events||(e.Events={}));e.sideEffect=function(e,t,r){return{id:"SingleCardAssistant.prevNextNavigation",when:u.nL.Effect.When.isSidebarOpen,what:u.nL.Effect.ItemsApplicator.create((0,a.zG)(e,l.M(t.pipe(c.h(u.nL.hasCards))),o.U((function(e){var t=h(e,2),r=t[0],i=t[1];return(0,a.zG)(i.currentLens.cardIndex,d.chain((function(e){return i.currentLens.items.getAt("nextClicked"===r.kind?e+1:e-1)})))})),s.oA,o.U((function(e){return function(t){return u.nL.Prism.getLensWithItems().modify(r.selectItemById(e.id),t)}}))))}}}(e.PrevNextNavigation||(e.PrevNextNavigation={}))}(i||(i={}))},1386:(e,t,r)=>{r.d(t,{N:()=>n});var i=r(27378);const n=(0,r(91961).I)("color",(({title:e,titleId:t,desc:r,descId:n,...a})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...a},r?i.createElement("desc",{id:n},r):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinejoin:"round",d:"M5.727 6.615H3V14h10V6.615h-2.727m-4.546 0V4.273a2.273 2.273 0 1 1 4.545 0v2.342m-4.545 0h4.546"}))))},18657:(e,t,r)=>{r.d(t,{O:()=>n});var i=r(27378);const n=(0,r(91961).I)("color",(({title:e,titleId:t,desc:r,descId:n,...a})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...a},r?i.createElement("desc",{id:n},r):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M2 6.448 4.526 3h2.527M2 6.448 8 13M2 6.448h3.474m8.526 0L11.474 3H8.947M14 6.448 8 13m6-6.552h-3.79M8 13 5.474 6.448M8 13l2.21-6.552m-4.736 0h4.736m-4.736 0L7.053 3m3.157 3.448L8.948 3m0 0H7.053"}))))}}]);